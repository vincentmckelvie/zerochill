/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/Abilities.js":
/*!**************************!*\
  !*** ./src/Abilities.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Abilities\": () => (/* binding */ Abilities)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ, CHILD) {\n\t\t\n\t\tthis.type = OBJ.type;\n\t\tthis.cooldown = OBJ.cooldown;\n\t\tthis.killOnLand = OBJ.killOnLand;\n\t\tthis.key = OBJ.key;\t\n\t\tthis.abilityTime = OBJ.abilityTime;\n\t\tthis.name = OBJ.name;\n\t\tthis.cooldownTimeout;\n\t\tthis.canDoAbility = false;\n\t\tthis.doingAbility = false;\n\t\tthis.child;\n\t\tthis.canSetClosestWorld = true;\n\t\tthis.worldIndex = 0;\n\t\tthis.cooldownUI = OBJ.cooldownUI;\n\t\tthis.cooldownFill;\n\t\tthis.dom;\n\t\tthis.sound = OBJ.sound;\n\t\tthis.abilityKey = OBJ.abilityKey;\n\t\tthis.initedAbility = false;\n\t\tthis.timerHelper = false;\n\n\t\tif(this.cooldownUI){\n\n\t\t\tthis.dom = document.createElement(\"div\");\n\t\t\tthis.dom.className = \"ability\";\n\t\t\tdocument.getElementById('abilities-holder').append(this.dom);\n\n\t\t\tthis.cooldownFill = document.createElement(\"div\");\n\t\t\tthis.cooldownFill.className = \"ability-fill\";\n\t\t\tthis.dom.append(this.cooldownFill);\n\n\t\t\tconst outline = document.createElement(\"div\");\n\t\t\toutline.className = \"ability-outline\";\n\t\t\tthis.dom.append(outline);\n\t\t\toutline.innerHTML = this.abilityKey;\n\n\t\t\tconst name = document.createElement(\"div\");\n\t\t\tname.className = \"ability-name\";\n\t\t\tname.innerHTML = this.name;\n\t\t\tthis.dom.append(name);\n\n\t\t}else{\n\t\t\t\n\t\t\tif(OBJ.name!=\"bot\"){\n\t\t\t\tthis.dom = document.createElement(\"div\");\n\t\t\t\tthis.dom.className = \"passive\";\n\t\t\t\tthis.dom.innerHTML = this.name;\n\t\t\t\tdocument.getElementById('passive-ability').prepend(this.dom);\n\t\t\t}\n\n\t\t}\n\t}\n\n\tupdate(){\n\t}\n\n\tupdateLooped(){\n\t}\n\n\t\n\n\tinit(CHILD){\n\t\tthis.child = CHILD;\n\t\tthis.canDoAbility = true;\n\t}\n\n\n\tactivateAbility(){\n\t\tswitch(this.type){\n\t\t\tcase \"press\":\n\t\t\t\tif(this.child.doAbility != null){\n\t\t\t\t\tthis.child.doAbility();\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"pressConfirm\":\n\t\t\t\t\n\t\t\t\tif(!this.initedAbility){\n\t\t\t\t\tappGlobal.localPlayer.weapon.abilityCanShoot = false;\n\t\t\t\t\tthis.initedAbility = true;\n\t\t\t\t\tif(this.child.initAbilityChild!=null){\n\t\t\t\t\t\tthis.child.initAbilityChild();\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tthis.initedAbility = false;\n\t\t\t\t\tif(this.child.doAbility != null){\n\t\t\t\t\t\tthis.child.doAbility();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\t// case \"hold\":\n\t\t\t// \tthis.doingAbility = true;\n\t\t\t// break;\n\t\t\n\t\t}\n\t}\n\n\tconfirmAbility(){\n\t\t\n\t\tthis.canDoAbility = false;\n\t\tthis.doingAbility = true;\n\t\t\n\t\tconst self = this;\n\t\t\n\t\tif(this.cooldownFill != null){\n\t\t\tthis.cooldownFill.style.height = \"0px\";\n\t\t}\n\t\t\n\t\tif(this.sound!=null){\n\t\t\tappGlobal.soundHandler.playSoundByName({name:this.sound, dist:1});\n\t\t}\n\t\tif(window.socket != null){\n\t\t\tsocket.emit('abilityVisual', {\n\t\t\t\t  id: appGlobal.localPlayer.id,\n\t\t\t\t  abilityName:this.name,\n\t\t\t\t  position:appGlobal.localPlayer.playerCollider.end,\n\t\t\t\t  sound:this.sound\n\t\t\t});\n\t\t}\n\n\n\t\tif(this.abilityTime>0){\n\n\t\t\tthis.abilityTimeout = setTimeout(function(){\n\t\t\t\t//self.deactivateAbility();\n\t\t\t\tappGlobal.localPlayer.weapon.abilityCanShoot = true;\n\t\t\t\tself.doingAbility = false;\n\t\t\t\tif(self.child.deactivateAbility != null){\n\t\t\t\t\tself.child.deactivateAbility();\n\t\t\t\t}\n\t\t\t}, this.abilityTime);\n\n\t\t}else{\n\t\t\tappGlobal.localPlayer.weapon.abilityCanShoot = true;\n\t\t}\n\n\t\tif(this.cooldown > 0){\n\n\t\t\tif(this.cooldownFill!=null){\n\t\t\t\tgsap.to(this.cooldownFill, {duration:(this.cooldown/1000)+.5, height:39, delay:(this.abilityTime/1000)+.5});\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.cooldownTimeout = setTimeout(function(){\n\t\t\t\tself.reset();\n\t\t\t\tif(self.child.childReset!=null){\n\t\t\t\t\tself.child.childReset();\n\t\t\t\t}\n\n\t\t\t}, this.abilityTime + this.cooldown);\n\n\t\t}else{\n\t\t\tif(!this.killOnLand){\n\t\t\t\tif(self.child.childReset!=null){\n\t\t\t\t\tself.child.childReset();\n\t\t\t\t}\n\t\t\t\tself.reset();\n\t\t\t}\n\t\t}\n\n\t}\n\n\thandlePlayerLand(){\n\n\t\tif(this.killOnLand && this.timerHelper){\n\t\t\tif(this.cooldownFill!=null)\n\t\t\t\tthis.cooldownFill.style.height= \"39px\" ;\n\t\t\t//this.canSetClosestWorld = true;\n\t\t\tthis.reset();\n\t\t\tthis.timerHelper = false;\n\t\t}\n\t}\n\n\thandleKeyDown(key){\n\t\t\n\t\tif(key == this.key && this.canDoAbility){\n\t\t\tthis.activateAbility();\n\t\t}\n\n\t}\n\n\thandleKeyUp(key){\n\t\t// if(key==this.key && this.doingAbility){\n\t\t// \tthis.deactivateAbility();\n\t\t// }\t\n\t}\n\t\n  \treset(){\n  \t\t\n  \t\tthis.canDoAbility = true;\n  \t\tthis.doingAbility = false;\n  \t\t//this.deactivateAbility();\n  \t\t// if(this.child.deactivate != null){\n  \t\t// \tthis.child.deactivateAbility();\n  \t\t// };\n  \t\t// if(this.child.reset != null){\n  \t\t// \tthis.child.reset();\n  \t\t// }\n  \t}\n\n  \n  \tupdateClosestWorldIndex(i){\n  \t\tthis.worldIndex = i;\n  \t}\n\n  \tkill(){\n  \t\tif(this.dom!=null)\n  \t\t\tthis.dom.remove();\n  \t\tclearTimeout(this.abilityTimeout);\n  \t\tclearTimeout(this.cooldownTimeout);\n  \t}\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Abilities.js?");

/***/ }),

/***/ "./src/AbilityBlink.js":
/*!*****************************!*\
  !*** ./src/AbilityBlink.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityBlink\": () => (/* binding */ AbilityBlink)\n/* harmony export */ });\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n// import {\n// \tObject3D,\n// \tCylinderGeometry,\n// \tMeshStandardMaterial,\n// \tMesh,\n// \tVector3,\n// \tQuaternion,\n// \tSphere,\n// \tVector2\n// } from 'three';\n\n\nclass AbilityBlink extends _Abilities_js__WEBPACK_IMPORTED_MODULE_0__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t\tappGlobal.localPlayer.canBlink = true;\n\t}\n\tchildReset(){\n\t\tappGlobal.localPlayer.canBlink = true;\n\t}\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityBlink.js?");

/***/ }),

/***/ "./src/AbilityBullet.js":
/*!******************************!*\
  !*** ./src/AbilityBullet.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityBullet\": () => (/* binding */ AbilityBullet)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass AbilityBullet {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ, ISLOCAL) {\n\t\t\n\t\tthis.isLocal = ISLOCAL;\n\t\tthis.id = OBJ.id;\n\t\tthis.worldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.worldPosition);\n\t\t\n\t\tthis.vector1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tthis.alivetime = 2000;\n\t\t\n\t\tconst rad = .2;\n\t\tconst sphereGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( rad, 6, 6 );\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff, roughness: 0.8, metalness: 0.5 } );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sphereGeometry, sphereMaterial );\n\t\tthis.mesh.castShadow = true;\n\t\tthis.receiveShadow = true;\n\t\tappGlobal.scene.add( this.mesh );\n\n\t\t//spheres.push( { mesh: sphere, collider: new THREE.Sphere( new THREE.Vector3( 0, 0, 0 ), SPHERE_RADIUS ), velocity: new THREE.Vector3() } );\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), rad );\n\t\tconst impulse = OBJ.impulse;\n\t\tthis.velocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.dir).multiplyScalar( impulse );\n\t\tthis.collider.center.copy( OBJ.pos );\n\t\tthis.velocityMult = 1;\n\t\tthis.startPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.pos);\n\t\tthis.killed = false;\n\t\tthis.contactParticle = appGlobal.particles.explosion;\n\t\tconst self = this;\n\t\tthis.grav = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 5000);\n\n\t\tthis.world = null;\n\t\t//sphereIdx = ( sphereIdx + 1 ) % spheres.length;\n\t}\n\t\n\tupdate(){\n\t\tif(!this.killed){\n\t\t\tthis.handlePhysics();\n\t\t\t//this.playerSphereCollision();\n\t\t}\n\t}\n\n\thandlePhysics(){\n\n\t\tthis.collider.center.addScaledVector( this.velocity, appGlobal.deltaTime );\n\n\t\tthis.grav.copy(this.collider.center).sub(this.worldPosition).normalize();\n\t\tthis.velocity.x -= this.grav.x*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.y -= this.grav.y*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.z -= this.grav.z*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\n\t\tconst damping = Math.exp( - 1.5 * appGlobal.deltaTime ) - 1;\n\t\tthis.velocity.addScaledVector( this.velocity, damping );\n\t\tthis.velocity.multiplyScalar(this.velocityMult);\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst s1 = this;\n\t\t\tconst s2 = appGlobal.worlds[i];\n\n\t\t\tconst d2 = s1.collider.center.distanceToSquared( s2.collider.center );\n\t\t\tconst r = s1.collider.radius + s2.collider.radius;\n\t\t\tconst r2 = r * r;\n\n\t\t\tif ( d2 < r2 ) {\n\t\t\t\tthis.world = appGlobal.worlds[i];\n\t\t\t\tthis.velocityMult = 0;\n\t\t\t\tthis.kill();\n\t\t\t}\n\t\t}\n\n\t\tthis.mesh.position.copy( this.collider.center );\n\t\t\n\t}\n\n\t\n\tkill(){\n\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tif(this.isLocal){\n\t\t\t\n\t\t\t\t\n\t\t\t\t// this.contactParticle.pos = this.mesh.position;\n\t\t\t\t// appGlobal.particleHandler.createEmitter(this.contactParticle);\n\t\t\t\t\n\t    \t\t// const dist = appGlobal.globalHelperFunctions.getDistanceForSound(this.collider.center);\n\t\t    \t// appGlobal.soundHandler.playSoundByName({name:this.contactParticle.sound, dist:dist});\n\n\t\t\t\tthis.killed = true;\n\t\t\t\tthis.mesh.geometry.dispose();\n\t\t\t\tthis.mesh.material.dispose();\n\t\t\t\tappGlobal.scene.remove(this.mesh);\n\n\t\t\t}\n\t\t}\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityBullet.js?");

/***/ }),

/***/ "./src/AbilityDirectionalBoost.js":
/*!****************************************!*\
  !*** ./src/AbilityDirectionalBoost.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityDirectionalBoost\": () => (/* binding */ AbilityDirectionalBoost)\n/* harmony export */ });\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n// import {\n// \tObject3D,\n// \tCylinderGeometry,\n// \tMeshStandardMaterial,\n// \tMesh,\n// \tVector3,\n// \tQuaternion,\n// \tSphere,\n// \tVector2\n// } from 'three';\n\n\nclass AbilityDirectionalBoost extends _Abilities_js__WEBPACK_IMPORTED_MODULE_0__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t\tappGlobal.localPlayer.directionalBoostMult = 1;\n\t\tappGlobal.localPlayer.abilityMult = 1.8;\n\t}\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityDirectionalBoost.js?");

/***/ }),

/***/ "./src/AbilityDoubleJump.js":
/*!**********************************!*\
  !*** ./src/AbilityDoubleJump.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityDoubleJump\": () => (/* binding */ AbilityDoubleJump)\n/* harmony export */ });\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n// import {\n// \tObject3D,\n// \tCylinderGeometry,\n// \tMeshStandardMaterial,\n// \tMesh,\n// \tVector3,\n// \tQuaternion,\n// \tSphere,\n// \tVector2\n// } from 'three';\n\n\nclass AbilityDoubleJump extends _Abilities_js__WEBPACK_IMPORTED_MODULE_0__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t\tappGlobal.localPlayer.canDoubleJump = true;\n\t}\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityDoubleJump.js?");

/***/ }),

/***/ "./src/AbilityJumpPad.js":
/*!*******************************!*\
  !*** ./src/AbilityJumpPad.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityJumpPad\": () => (/* binding */ AbilityJumpPad)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n/* harmony import */ var _AbilityBullet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbilityBullet.js */ \"./src/AbilityBullet.js\");\n/* harmony import */ var _JumpPad_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./JumpPad.js */ \"./src/JumpPad.js\");\n\n\n\n\n\nclass AbilityJumpPad extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t\tthis.arr = [];\n\t\tthis.throw;\n\t\tthis.jumpPad;\n\t\tthis.worldPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.id;\n\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t}\n\tupdate(){\n\t\tsuper.update();\n\t}\n\tupdateLooped(){\n\t\tsuper.updateLooped();\n\t\tif(this.throw){\n\t\t\tif(!this.throw.killed){\n\t\t\t\tthis.throw.update();\n\t\t\t}else{\n\t\t\t\tsuper.confirmAbility();\n\t\t\t\tthis.jumpPad = new _JumpPad_js__WEBPACK_IMPORTED_MODULE_3__.JumpPad({worldPosition:this.throw.world.collider.center, position:this.throw.collider.center}) \n\t\t\t\tthis.throw = null;\t\n\t\t\t}\n\t\t}\n\n\t\tif(this.jumpPad){\n\t\t\tif(!this.jumpPad.killed){\n\t\t\t\tthis.jumpPad.update();\t\n\t\t\t}\n\t\t}\n\t\t\t \t\n\t}\n\t\n\tdoAbility(){\n\t\tif(appGlobal.localPlayer!=null){\n\n\t\t\tthis.id = appGlobal.localPlayer.id;\n\t\t\tthis.worldPos.copy(appGlobal.world.worldPosition);\n\t\t\tconst dir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tappGlobal.localPlayer.camera.getWorldDirection( dir );\n\t\t\t\t\t\n\t\t\t//if(this.player.adsing){\n\t\t\tconst rndMult = .01;\n\t\t\t//}\n\t\t\tconst r = .3;\n\t\t\tconst rx = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst ry = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rz = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t\tdir.add(rnd);\n\t\t\tdir.multiplyScalar(.5);\n\t\t\t\n\t\t\t//const cross = new Vector3().crossVectors(appGlobal.localPlayer.grav, dir);\n\t\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( appGlobal.localPlayer.playerCollider.end ).addScaledVector( dir, appGlobal.localPlayer.playerCollider.radius * 1.5 );//.add(cross);\n\t\t\t//pos = appGlobal.localPlayer.fps.tipPosition;\n\t\t\tconst kp = {\n\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\tdistance:10, \n\t\t\t\tstrength:40, \n\t\t\t\tgravMult:4\n\t\t\t}\n\n\t\t\tconst obj = {\n\t\t\t\tpos:pos,\n\t\t\t\timpulse:60,\n\t\t\t\tdir:dir,\n\t\t\t\tknockParams:kp,\n\t\t\t\tdamage:60,\n\t\t\t\tid:this.id,\n\t\t\t\tworldPosition:this.worldPos,\n\t\t\t}\n\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"rocket2\", dist:1});\n\t\t\t\n\t\t\tif(window.socket !=null ){\n\t\t\t\t// socket.emit('shoot', {\n\t\t\t\t// \tobj: obj,\n\t\t\t\t// \tid: socket.id,\n\t\t\t\t// \tname: \"jumpPad\"\n\t\t\t\t// });\n\t\t\t}\n\t\t\tthis.throw = new _AbilityBullet_js__WEBPACK_IMPORTED_MODULE_2__.AbilityBullet(obj, true); \n\t\t}\n\n\n\t}\n\n\tdeactivateAbility(){\n\t\t\n\t}\n\n\tkill(){\n\t\tsuper.kill();\n\n\t}\n\t\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityJumpPad.js?");

/***/ }),

/***/ "./src/AbilityNade.js":
/*!****************************!*\
  !*** ./src/AbilityNade.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityNade\": () => (/* binding */ AbilityNade)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n/* harmony import */ var _StickyBullet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StickyBullet.js */ \"./src/StickyBullet.js\");\n\n\n\n\nclass AbilityNade extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t\tthis.arr = [];\n\t\tthis.firstThrow;\n\t\tthis.id;\n\t\tthis.worldPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\n\t}\n\t\n\tinit(){\n\n\t\tsuper.init(this);\n\t}\n\tupdate(){\n\t\tsuper.update();\n\t\tif(!this.canDoAbility){ // doing ability\n\n\t\t\tif(this.firstThrow != null && this.firstThrow.killed){\n\n\t\t\t\tfor(let i = 0; i<5; i++){\n\t\t\t\t\tconst dir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.firstThrow.grav).multiplyScalar(.3);\n\t\t\t\t\t\n\t\t\t\t\tconst rndMult = .5;\n\t\t\t\t\tconst r = 1;\n\t\t\t\t\tconst rx = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\t\t\tconst ry = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\t\t\tconst rz = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\t\t\tconst rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t\t\t\tdir.add(rnd);\n\t\t\t\t\t\n\t\t\t\t\t//const cross = new Vector3().crossVectors(appGlobal.localPlayer.grav, dir);\n\t\t\t\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( this.firstThrow.collider.center );\n\t\t\t\t\t//pos = appGlobal.localPlayer.fps.tipPosition;\n\t\t\t\t\tconst kp = {\n\t\t\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\t\t\tdistance:10, \n\t\t\t\t\t\tstrength:40, \n\t\t\t\t\t\tgravMult:4\n\t\t\t\t\t}\n\n\t\t\t\t\tconst obj = {\n\t\t\t\t\t\tpos:pos,\n\t\t\t\t\t\timpulse:60,\n\t\t\t\t\t\tdir:dir,\n\t\t\t\t\t\tknockParams:kp,\n\t\t\t\t\t\tdamage:60,\n\t\t\t\t\t\tid:this.id,\n\t\t\t\t\t\tworldPosition:this.worldPos,\n\t\t\t\t\t}\n\n\t\t\t\t\tappGlobal.soundHandler.playSoundByName({name:\"rocket2\", dist:1});\n\t\t\t\t\t\n\t\t\t\t\tif(window.socket !=null ){\n\t\t\t\t\t\t// socket.emit('shoot', {\n\t\t\t\t\t\t// \tobj: obj,\n\t\t\t\t\t\t// \tid: socket.id,\n\t\t\t\t\t\t// \tname: \"sticky\"\n\t\t\t\t\t\t// });\n\t\t\t\t\t}\n\t\t\t\t\tconst nade = new _StickyBullet_js__WEBPACK_IMPORTED_MODULE_2__.StickyBullet(obj, true); \n\t\t\t\t\tthis.arr.push(nade);\n\n\t\t\t\t}\n\n\t\t\t\tthis.firstThrow = null;\n\n\t\t\t}\n\n\t\t}\n\t}\n\tupdateLooped(){\n\t\tsuper.updateLooped();\n\t\t\n\n\t\tfor(let i = 0; i<this.arr.length; i++){\n\t\t\tthis.arr[i].update();\n\t\t}\n\t\t// if(Math.random()>.96)\n\t\t// console.log(\"cscw \"+this.canSetClosestWorld)\n\t\t\t \t\n\t}\n\t\n\tdoAbility(){\n\t\tif(appGlobal.localPlayer!=null){\n\t\t\tthis.id = appGlobal.localPlayer.id;\n\t\t\tthis.worldPos.copy(appGlobal.world.worldPosition);\n\t\t\tconst dir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tappGlobal.localPlayer.camera.getWorldDirection( dir );\n\t\t\t\t\t\n\t\t\t//if(this.player.adsing){\n\t\t\tconst rndMult = .01;\n\t\t\t//}\n\t\t\tconst r = .3;\n\t\t\tconst rx = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst ry = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rz = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t\tdir.add(rnd);\n\t\t\tdir.multiplyScalar(.5);\n\t\t\t\n\t\t\t//const cross = new Vector3().crossVectors(appGlobal.localPlayer.grav, dir);\n\t\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( appGlobal.localPlayer.playerCollider.end ).addScaledVector( dir, appGlobal.localPlayer.playerCollider.radius * 1.5 );//.add(cross);\n\t\t\t//pos = appGlobal.localPlayer.fps.tipPosition;\n\t\t\tconst kp = {\n\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\tdistance:10, \n\t\t\t\tstrength:40, \n\t\t\t\tgravMult:4\n\t\t\t}\n\n\t\t\tconst obj = {\n\t\t\t\tpos:pos,\n\t\t\t\timpulse:60,\n\t\t\t\tdir:dir,\n\t\t\t\tknockParams:kp,\n\t\t\t\tdamage:60,\n\t\t\t\tid:this.id,\n\t\t\t\tworldPosition:this.worldPos,\n\t\t\t}\n\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"rocket2\", dist:1});\n\t\t\t\n\t\t\tif(window.socket !=null ){\n\t\t\t\tsocket.emit('shoot', {\n\t\t\t\t\tobj: obj,\n\t\t\t\t\tid: socket.id,\n\t\t\t\t\tname: \"sticky\"\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.firstThrow = new _StickyBullet_js__WEBPACK_IMPORTED_MODULE_2__.StickyBullet(obj, true); \n\t\t\tthis.arr.push(this.firstThrow);\n\t\t}\n\n\t\t\n\t\tsuper.confirmAbility();\n\t}\n\n\tdeactivateAbility(){\n\t\t\n\t}\n\n\tkill(){\n\t\tsuper.kill();\n\n\t}\n\t\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityNade.js?");

/***/ }),

/***/ "./src/AbilityPlanetSwitch.js":
/*!************************************!*\
  !*** ./src/AbilityPlanetSwitch.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityPlanetSwitch\": () => (/* binding */ AbilityPlanetSwitch)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n\n\n\nclass AbilityPlanetSwitch extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\t\n\t\tsuper(OBJ);\n\t\tthis.outlinedWorld;\n\t\tthis.outlinedPoint = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.lastWorld;\n\t\t//this.timerTest = false;\n\t}\n\t\n\tinit(){\n\t\t//console.log(\"init\")\n\t\tsuper.init(this);\n\t}\n\t\n\tupdate(){\n\t\tsuper.update();\n\t\tif(this.canDoAbility){\n\t\t\tthis.timerTest = false;\n\t\t\tthis.updateOutline();\n\t\t}else{\n\t\t\tconst closestWorld = this.getClosestWorld();\n\t\t\tif(closestWorld != this.lastWorld){\n\t\t\t\tthis.canSetClosestWorld = true;\n\t\t\t}\n\t\t}\n\t\t// if(Math.random()>.96)\n\t\t// console.log(\"cscw \"+this.canSetClosestWorld)\n\t\t\t \t\n\t}\n\n\t// activateAbility(){\n\t// \tsuper.activateAbility();\n\t// }\n\n\tdoAbility(){\n\t\tthis.handleGrapple();\t\n\t}\n\n\tupdateOutline(){\n\t\t\n\t\tappGlobal.raycaster.setFromCamera( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0), appGlobal.controller.playerCamera );\n\t\tconst intersection = appGlobal.raycaster.intersectObjects( appGlobal.grappleMeshes, false );\n\t\t\n\t\tif ( intersection.length > 0 ) {\n\t\t\t\n\t\t\tif(intersection[0].object.worldIndex != this.worldIndex){\n\t\t\t\tthis.outlinedPoint.copy(intersection[0].point);\n\t\t\t\tthis.outlinedWorld = appGlobal.worlds[intersection[0].object.worldIndex];\n\t\t\t\tappGlobal.scene.updateOutlined([intersection[0].object]);\n\t\t\t}else{\n\t\t\t\tthis.outlinedWorld = null;\n\t\t\t\tappGlobal.scene.updateOutlined([]);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tthis.outlinedWorld = null;\n\t\t\tappGlobal.scene.updateOutlined([]);\n\t\t}\n\t\t\n\t}\n\n\tgetClosestWorld(){\n\n\t\tlet lowestDist = 1000000;\n\t\tlet currClosest = null;\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = v1.addVectors( appGlobal.localPlayer.playerCollider.start, appGlobal.localPlayer.playerCollider.end ).multiplyScalar( 0.5 );\n\n\t\t\tconst sphere_center = appGlobal.worlds[i].collider.center;\n\n\t\t\tconst r = appGlobal.localPlayer.playerCollider.radius + appGlobal.worlds[i].collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\tconst d2 = appGlobal.localPlayer.playerCollider.start.distanceToSquared( sphere_center );\n\t\t\t\n\t\t\t//if ( d2 < r2 ) {\n\t\t\t\n\t\t\tconst total = d2-r2;\n\t\t\t\n\t\t\tif ( total < lowestDist ) {\n\n\t\t\t\tlowestDist = total;\n\t\t\t\tcurrClosest = appGlobal.worlds[i];\n\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn currClosest;\n\n\t}\n\n\thandleGrapple(){\n\n\t\tif(this.outlinedWorld){\n\t\t\tsuper.confirmAbility();\n\t\t\tthis.canSetClosestWorld = false;\n\t\t\tthis.lastWorld = appGlobal.world;\n\t\t\tthis.worldIndex = this.outlinedWorld.index;\n\t\t\tappGlobal.world = this.outlinedWorld;\n\t\t\t\n\t\t\tconst p = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.outlinedPoint);\n\t\t\tconst toNewWorld = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(p.sub(appGlobal.localPlayer.playerCollider.end).multiplyScalar(200));\n\t\t\t\n\t\t\tconst fnl = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(toNewWorld.add( appGlobal.localPlayer.grav.multiplyScalar(200) ) )\n\t\t\t\n\t\t\tif( appGlobal.localPlayer.playerOnFloor )\n\t\t\t\tappGlobal.localPlayer.playerVelocity.add(  appGlobal.localPlayer.grav.multiplyScalar(200)  );\n\t\t\t\n\t\t\tthis.timerHelper = false;\n\t\t\tconst self = this;\n\t\t\tsetTimeout(function(){\n\t\t\t\tif(appGlobal.localPlayer !=null ){\n\t\t\t\t\tappGlobal.localPlayer.playerVelocity.add( toNewWorld);\n\t\t\t\t}\n\t\t\t\t// self.lastWorld = lastWorld;\n\t\t\t\t// self.worldIndex = outlined.index;//worldIndex;\n\t\t\t\t// appGlobal.world = outlined;\n\t\t\t\tself.timerHelper = true;\n\t\t\t},200);\n\t\t\t//appGlobal.localPlayer.playerVelocity.add(.add( appGlobal.localPlayer.grav.multiplyScalar(200) ) );\n\t\t\t\n\t\t\t//appGlobal.localPlayer.playerOnFloor = false;\n\t\t\t\n\t\t\t\n\t\t}\n\t}\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityPlanetSwitch.js?");

/***/ }),

/***/ "./src/AbilitySticky.js":
/*!******************************!*\
  !*** ./src/AbilitySticky.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilitySticky\": () => (/* binding */ AbilitySticky)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n/* harmony import */ var _AbilityBullet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AbilityBullet.js */ \"./src/AbilityBullet.js\");\n/* harmony import */ var _StickyAOE_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StickyAOE.js */ \"./src/StickyAOE.js\");\n\n\n\n\n\nclass AbilitySticky extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t\tthis.arr = [];\n\t\tthis.throw;\n\t\tthis.sticky;\n\t\tthis.worldPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.id;\n\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t}\n\tupdate(){\n\t\tsuper.update();\n\t}\n\tupdateLooped(){\n\t\tsuper.updateLooped();\n\t\tif(this.throw){\n\t\t\tif(!this.throw.killed){\n\t\t\t\tthis.throw.update();\n\t\t\t}else{\n\t\t\t\tsuper.confirmAbility();\n\t\t\t\tthis.sticky = new _StickyAOE_js__WEBPACK_IMPORTED_MODULE_3__.StickyAOE({worldPosition:this.throw.world.collider.center, position:this.throw.collider.center}) \n\t\t\t\tthis.throw = null;\t\n\t\t\t}\n\t\t}\n\n\t\tif(this.sticky){\n\t\t\tif(!this.sticky.killed){\n\t\t\t\tthis.sticky.update();\t\n\t\t\t}\n\t\t}\n\t\t\t \t\n\t}\n\t\n\tdoAbility(){\n\t\tif(appGlobal.localPlayer!=null){\n\n\t\t\tthis.id = appGlobal.localPlayer.id;\n\t\t\tthis.worldPos.copy(appGlobal.world.worldPosition);\n\t\t\tconst dir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tappGlobal.localPlayer.camera.getWorldDirection( dir );\n\t\t\t\t\t\n\t\t\t//if(this.player.adsing){\n\t\t\tconst rndMult = .01;\n\t\t\t//}\n\t\t\tconst r = .3;\n\t\t\tconst rx = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst ry = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rz = ((-r*.5)+Math.random()*r)*rndMult;\n\t\t\tconst rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t\tdir.add(rnd);\n\t\t\tdir.multiplyScalar(.5);\n\t\t\t\n\t\t\t//const cross = new Vector3().crossVectors(appGlobal.localPlayer.grav, dir);\n\t\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( appGlobal.localPlayer.playerCollider.end ).addScaledVector( dir, appGlobal.localPlayer.playerCollider.radius * 1.5 );//.add(cross);\n\t\t\t//pos = appGlobal.localPlayer.fps.tipPosition;\n\t\t\tconst kp = {\n\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\tdistance:10, \n\t\t\t\tstrength:40, \n\t\t\t\tgravMult:4\n\t\t\t}\n\n\t\t\tconst obj = {\n\t\t\t\tpos:pos,\n\t\t\t\timpulse:60,\n\t\t\t\tdir:dir,\n\t\t\t\tknockParams:kp,\n\t\t\t\tdamage:60,\n\t\t\t\tid:this.id,\n\t\t\t\tworldPosition:this.worldPos,\n\t\t\t}\n\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"rocket2\", dist:1});\n\t\t\t\n\t\t\t// if(window.socket !=null ){\n\t\t\t// \tsocket.emit('shoot', {\n\t\t\t// \t\tobj: obj,\n\t\t\t// \t\tid: socket.id,\n\t\t\t// \t\tname: \"jumpPad\"\n\t\t\t// \t});\n\t\t\t// }\n\t\t\tthis.throw = new _AbilityBullet_js__WEBPACK_IMPORTED_MODULE_2__.AbilityBullet(obj, true); \n\t\t}\n\n\n\t}\n\n\tdeactivateAbility(){\n\t\t\n\t}\n\n\tkill(){\n\t\tsuper.kill();\n\t\tif(this.throw!=null){\n\t\t\tthis.throw.kill();\n\t\t}\n\n\t}\n\t\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilitySticky.js?");

/***/ }),

/***/ "./src/AbilityTeleport.js":
/*!********************************!*\
  !*** ./src/AbilityTeleport.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityTeleport\": () => (/* binding */ AbilityTeleport)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n\n\n\nclass AbilityTeleport extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\t// const geo = new BoxGeometry(1,1,1);\n\t\t// this.mesh = new Mesh(geo,mat);\n\t\tsuper(OBJ);\n\t\tthis.clickPoint = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.clickWorld;\n\n\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(2,8,8);\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(0,1,.6), transparent:true, opacity:.8, blendMode:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), fog:false});\n\t\t\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\tthis.mesh.visible = false;\n\t\tappGlobal.scene.add(this.mesh);\n\n\t\t\n\t}\n\n\tupdate(){\n\t\tsuper.update();\n\t\tif(this.initedAbility){\n\t\t\tthis.updateMousePos();\n\t\t\tif(this.clickWorld!=null){\n\t\t\t\tthis.mesh.visible = true;\n\t\t\t}else{\n\t\t\t\tthis.mesh.visible = false;\n\t\t\t}\n\t\t}\n\t}\n\tinit(){\n\t\tsuper.init(this);\n\t}\n\n\tinitAbilityChild(){\n\t\tthis.mesh.visible = true;\n\t}\n\n\tdoAbility(){\n\t\tthis.handleTeleport();\n\t}\n\n\tupdateMousePos(){\n\t\t\n\t\tappGlobal.raycaster.setFromCamera( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0), appGlobal.controller.playerCamera );\n\t\tconst intersection = appGlobal.raycaster.intersectObjects( appGlobal.grappleMeshes, false );\n\t\t\n\t\tif ( intersection.length > 0 ) {\n\t\t\t\n\t\t\tif(this.canDoAbility){\n\t\t\t\t\n\t\t\t\t//this.clickPoint.copy(intersection[0].point.add(intersection[0].normal.multiplyScalar(2)));\n\t\t\t\tconst p = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(intersection[0].point);\n\t\t\t\tconst n = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(intersection[0].face.normal)\n\t\t\t\t//this.mesh.visble = true; \n\t\t\t\tthis.mesh.position.copy(p);\n\t\t\t\t///console.log(this.mesh.visble + \" mesh vis pre\" )\n\n\t\t\t\tthis.clickPoint.copy(p.add(n.multiplyScalar(2)));\n\t\t\t\tthis.clickWorld = appGlobal.worlds[intersection[0].object.worldIndex];\n\t\t\t\t//appGlobal.scene.updateOutlined([intersection[0].object]);\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tthis.clickWorld = null;\n\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tthis.clickWorld = null;\n\t\t}\n\t\t//console.log(this.mesh.visble + \" mesh vis post\" )\n\t\t\n\t}\n\n\thandleTeleport(){\n\n\t\tif(this.clickWorld){\n\t\t\t\n\t\t\tthis.canSetClosestWorld = false;\n\t\t\tthis.worldIndex = this.clickWorld.index;\n\t\t\tappGlobal.world = this.clickWorld;\n\t\t\tappGlobal.localPlayer.playerOnFloor = false;\n\t\t\tconst clp = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.clickPoint);\n\t\t\tconst grv = clp.sub(appGlobal.world.worldPosition).normalize();\n\t\t\tappGlobal.localPlayer.grav.copy(grv);\n\t\t\t\n\t\t\tappGlobal.localPlayer.playerCollider.start.copy(this.clickPoint);\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.start).add(grv.multiplyScalar(appGlobal.localPlayer.playerHeight));\n\t\t\t\n\t\t\tappGlobal.localPlayer.playerCollider.end.copy(end);\n\t\t\tappGlobal.localPlayer.worldPosEase.copy(appGlobal.world.worldPosition)\n\t\t\t\n\t\t\tthis.canSetClosestWorld = true;\n\t\t\t//this.initedAbility = false;\n\t\t\tthis.mesh.visible = false;\n\t\t\tsuper.confirmAbility();\n\t\t}\n\t}\n\t\n  \tchildKill(){\n  \t\tthis.mesh.geometry.dispose();\n  \t\tthis.mesh.material.dispose();\n  \t\tappGlobal.scene.remove(this.mesh);\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityTeleport.js?");

/***/ }),

/***/ "./src/AbilityWalls.js":
/*!*****************************!*\
  !*** ./src/AbilityWalls.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AbilityWalls\": () => (/* binding */ AbilityWalls)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Abilities_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Abilities.js */ \"./src/Abilities.js\");\n\n\n\nclass AbilityWalls extends _Abilities_js__WEBPACK_IMPORTED_MODULE_1__.Abilities {\n\t// {\n\t// \ttype:\"hold\",//\"press\"\n\t//\thasCooldown:false\n\t//\tcooldown:8000,\n\t//  key:\"ShiftLeft\"//\"KeyE\"\n\t// }\n\tconstructor(OBJ) {\n\t\tsuper(OBJ);\n\t}\n\t\n\tinit(){\n\t\tsuper.init(this);\n\t}\n\t\n\tdoAbility(){\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tappGlobal.worlds[i].mesh.material.transparent = true;\n\t\t\tappGlobal.worlds[i].mesh.material.opacity = .3;\n\t\t\tappGlobal.worlds[i].mesh.material.needsUpdate = true;\n\t\t}\t\n\t\tsuper.confirmAbility();\n\t}\n\n\tdeactivateAbility(){\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tappGlobal.worlds[i].mesh.material.transparent = false;\n\t\t\tappGlobal.worlds[i].mesh.material.opacity = 1;\n\t\t\tappGlobal.worlds[i].mesh.material.needsUpdate = true;\n\t\t}\n\t}\n\t\n  \t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AbilityWalls.js?");

/***/ }),

/***/ "./src/AutoBullet.js":
/*!***************************!*\
  !*** ./src/AutoBullet.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AutoBullet\": () => (/* binding */ AutoBullet)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass AutoBullet {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ, ISLOCAL) {\n\t\t\n\t\tthis.isLocal = ISLOCAL;\n\t\tthis.damage = OBJ.damage;\n\t\tthis.id = OBJ.id;\n\t\tthis.knockParams = OBJ.knockParams;\n\t\t\n\t\tthis.worldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.worldPosition); \n\t\t\n\t\tconst rad = .09;\n\t\tconst sphereGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( rad, rad, rad );\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff } );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sphereGeometry, sphereMaterial );\n\t\tthis.mesh.castShadow = true;\n\t\tthis.receiveShadow = true;\n\t\tappGlobal.scene.add( this.mesh );\n\n\t\t//spheres.push( { mesh: sphere, collider: new THREE.Sphere( new THREE.Vector3( 0, 0, 0 ), SPHERE_RADIUS ), velocity: new THREE.Vector3() } );\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), rad );\n\t\tconst impulse = OBJ.impulse ;\n\t\tthis.velocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.dir).multiplyScalar( impulse );\n\t\tthis.collider.center.copy( OBJ.pos );\n\t\tthis.startPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.pos);\n\t\tthis.contactParticle = appGlobal.particles.shot;\n\t\t//console.log(OBJ.pos)\n\t\tthis.killed = false;\n\t\tconst self = this;\n\t\tthis.isBulletDoingDamage = false;\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 1000);\n\t\t//sphereIdx = ( sphereIdx + 1 ) % spheres.length;\n\t}\n\t\n\tupdate(){\n\t\t\n\t\tif(!this.killed){\n\t\t\t//if(this.isLocal){\n\t\t\tthis.playerSphereCollision();\n\t\t\t//}\n\t\t\tthis.handlePhysics();\n\t\t}\n\t}\n\n\thandlePhysics(){\n\n\t\tthis.collider.center.addScaledVector( this.velocity, window.appGlobal.deltaTime );\n\n\t\tconst g = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.collider.center).sub(this.worldPosition).normalize();\n\t\tthis.velocity.x -= g.x*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.y -= g.y*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.z -= g.z*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\n\t\tconst damping = Math.exp( - 1.5 * window.appGlobal.deltaTime ) - 1;\n\t\tthis.velocity.addScaledVector( this.velocity, damping*.1 );\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst s1 = this;\n\t\t\tconst s2 = appGlobal.worlds[i];\n\n\t\t\tconst d2 = s1.collider.center.distanceToSquared( s2.collider.center );\n\t\t\tconst r = s1.collider.radius + s2.collider.radius;\n\t\t\tconst r2 = r * r;\n\n\t\t\tif ( d2 < r2 ) {\n\t\t\t\tthis.kill();\n\t\t\t}\n\t\t}\n\n\t\tthis.mesh.position.copy( this.collider.center );\n\n\t}\n\t\n\tkill(){\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tif(this.isLocal && !this.isBulletDoingDamage){\n\t\t\t\tthis.knockParams.pos = this.mesh.position;\n\t\t\t\tappGlobal.globalHelperFunctions.knockPlayer(this.knockParams);\n\t\t\t}\n\n\t\t\tthis.contactParticle.pos = this.mesh.position;\n\t\t\tappGlobal.particleHandler.createEmitter(this.contactParticle);\n\n\t\t\tclearTimeout(this.killTimeout);\n\t\t\tthis.killed = true;\n\t\t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\tappGlobal.scene.remove(this.mesh);\n\t\t}\n\t}\n\n\tplayerSphereCollision() {\n\t\t\n\t\tconst id = appGlobal.globalHelperFunctions.playerSphereCollision(this.collider, this.id);\n\n\t\tif(id != null){\n\t\t\tif(this.isLocal){\n\t\t\t\tconst self = this;\n\t\t\t\tthis.isBulletDoingDamage = true;\n\t\t\t\tif(window.socket != null){\n\t\t\t\t\tconst obj = {\n\t\t\t\t\t  id: id.id,\n\t\t\t\t\t  damage:self.damage,\n\t\t\t\t\t  position:this.startPos,\n\t\t\t\t\t  headShot:id.headShot,\n\t\t\t\t\t  fromDamageId:socket.id\n\t\t\t\t\t}\n\t\t\t\t\tsocket.emit('doDamage', obj);\n\t\t\t\t\tappGlobal.globalHelperFunctions.playerDoDamage(obj);\n\t\t\t\t}else{\n\t\t\t\t\tif(id.headShot){\n\t\t\t\t\t\tthis.damage *= 1.5;\n\t\t\t\t\t}\n\t\t\t\t\t//console.log(id.headShot)\n\t\t\t\t\tappGlobal.remotePlayers[id.id].receiveDamage({headShot:id.headShot, position:this.startPos, health:this.damage})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tthis.kill();\n\t\t}\n\t\t\n\t}\n\n\t\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/AutoBullet.js?");

/***/ }),

/***/ "./src/CharacterAnimationHandler.js":
/*!******************************************!*\
  !*** ./src/CharacterAnimationHandler.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CharacterAnimationHandler\": () => (/* binding */ CharacterAnimationHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\r\nclass CharacterAnimationHandler{\r\n\tconstructor(OBJ){\r\n\t\tthis.contains = [ \r\n\t\t\t\"thigh\",\r\n\t\t\t\"calf\", \r\n\t\t\t\"spine\", \r\n\t\t\t\"pelvis\", \r\n\t\t\t\"foot\",\r\n\t\t\t\"ball\",\r\n\t\t];\r\n\r\n\t\tthis.meshes = OBJ.meshes;\r\n\r\n\t\tthis.flock = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\r\n\t\tfor(let i = 0; i<this.meshes.length; i++){\r\n\t\t\tthis.flock.add(this.meshes[i]);\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.mixer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(this.flock);\r\n\t\t//mixers.push(this.mixer);\r\n\t\tthis.animations = OBJ.animations;\r\n\t\t\r\n\t\tthis.idle;\r\n\t\tthis.forward;\r\n\t\tthis.right;\r\n\t\tthis.left;\r\n\t\tthis.back;\r\n\t\tthis.gunIdle;\r\n\t\tthis.adsIdle;\r\n\t\tthis.gunFire;\r\n\t\tthis.jump;\r\n\t\tthis.jumpStart;\r\n\t\tthis.ezTime = .2;\r\n\t\tthis.shouldDoAni =  false;\r\n\t\tthis.spineBones = [];\r\n\r\n\t\tthis.adsTarg = 1;\r\n\t\tthis.gunTarg = 0;\r\n\t\t\r\n\t\tthis.idleTarg = 1;\r\n\t\tthis.leftTarg = 0;\r\n\t\tthis.rightTarg = 0;\r\n\t\tthis.forwardTarg = 0;\r\n\t\tthis.backTarg = 0;\r\n\t\tthis.jumpTarg = 0;\r\n\t\t\r\n\t\t\r\n\r\n\t\tthis.gunAnis = [];\r\n\t\tthis.modelName = OBJ.name;\r\n\r\n\t}\r\n\t\r\n\t\r\n\tinitAnimation(){\r\n\r\n\t\tconst tposeAni = this.getAniByName(this.animations,\"tpose\");\r\n\t\tconst idleAni = this.getAniByName(this.animations,\"idle-2\");\r\n\t\t//idleAni.timeScale = 20;\r\n\t\tconst runFAni = this.getAniByName(this.animations,\"run_f\");\r\n\t\tconst runRAni = this.getAniByName(this.animations,\"run_r\");\r\n\t\tconst runLAni = this.getAniByName(this.animations,\"run_l\");\r\n\t\tconst runBAni = this.getAniByName(this.animations,\"run_b\");\r\n\t\tconst jumpAni = this.getAniByName(this.animations,\"jump\");\r\n\t\t\r\n\t\tconst gunAniSubmachine =  this.getAniByName(this.animations,\"submachine-idle\");\r\n\t\tconst adsAniSubmachine =  this.getAniByName(this.animations,\"submachine-ads\");\r\n\t\t\r\n\t\tconst gunAniAssault =  this.getAniByName(this.animations,\"assault-idle\");\r\n\t\tconst adsAniAssault =  this.getAniByName(this.animations,\"assault-ads\");\r\n\t\tconst gunAniSticky =  this.getAniByName(this.animations,\"sticky-idle\");\r\n\t\tconst adsAniSticky =  this.getAniByName(this.animations,\"sticky-ads\");\r\n\t\tconst gunAniLauncher =  this.getAniByName(this.animations,\"launcher-idle\");\r\n\t\tconst adsAniLauncher =  this.getAniByName(this.animations,\"launcher-ads\");\r\n\t\tconst gunAniSixGun =  this.getAniByName(this.animations,\"sixgun-idle\");\r\n\t\tconst adsAniSixGun =  this.getAniByName(this.animations,\"sixgun-ads\");\r\n\t\tconst gunAniSniper =  this.getAniByName(this.animations,\"sniper-idle\");\r\n\t\tconst adsAniSniper =  this.getAniByName(this.animations,\"sniper-ads\");\r\n\r\n\t\t\r\n\t\tthis.parseAnimation(idleAni, true);\r\n\t\tthis.parseAnimation(runRAni, true);\r\n\t\tthis.parseAnimation(runLAni, true);\r\n\t\tthis.parseAnimation(runFAni, true);\r\n\t\tthis.parseAnimation(runBAni, true);\r\n\t\tthis.parseAnimation(jumpAni, true);\r\n\r\n\t\tthis.parseAnimation(tposeAni, false);\r\n\t\tthis.parseAnimation(gunAniSubmachine,  false);\r\n\t\tthis.parseAnimation(adsAniSubmachine,  false);\r\n\t\tthis.parseAnimation(gunAniAssault,     false);\r\n\t\tthis.parseAnimation(adsAniAssault,     false);\r\n\t\tthis.parseAnimation(gunAniSticky,      false);\r\n\t\tthis.parseAnimation(adsAniSticky,      false);\r\n\t\tthis.parseAnimation(gunAniLauncher,    false);\r\n\t\tthis.parseAnimation(adsAniLauncher,    false);\r\n\t\tthis.parseAnimation(gunAniSixGun,      false);\r\n\t\tthis.parseAnimation(adsAniSixGun,      false);\r\n\t\tthis.parseAnimation(gunAniSniper,      false);\r\n\t\tthis.parseAnimation(adsAniSniper,      false);\r\n\r\n\t\tthis.idle = this.mixer.clipAction(     idleAni);  \r\n\t\tthis.idle.timeScale = 1.4;\r\n\t\tthis.right = this.mixer.clipAction(    runRAni);\r\n\t\tthis.left = this.mixer.clipAction(     runLAni);\r\n\t\tthis.forward = this.mixer.clipAction(  runFAni);\r\n\t\tthis.back = this.mixer.clipAction(     runBAni);\r\n\t\t\r\n\t\tswitch(this.modelName){\r\n\t\t\tcase \"submachine\":\r\n\t\t\t\tconst gunIdleSubmachine = this.mixer.clipAction(  gunAniSubmachine);\r\n\t\t\t\tconst adsIdleSubmachine = this.mixer.clipAction(  adsAniSubmachine);\r\n\t\t\t\tthis.adsIdle = adsIdleSubmachine;\r\n\t\t\t\tthis.gunIdle = gunIdleSubmachine;\r\n\t\t\t\t//this.gunAnis.push({name:\"submachine\", idle:gunIdleSubmachine, ads:this.adsIdleSubmachine})\r\n\t\t\tbreak;\r\n\t\t\tcase \"assault\":\r\n\t\t\t\tconst gunIdleAssault = this.mixer.clipAction(     gunAniAssault);\r\n\t\t\t\tconst adsIdleAssault = this.mixer.clipAction(     adsAniAssault);\r\n\t\t\t\t//this.gunAnis.push({name:\"assault\", idle:gunIdleAssault, ads:adsIdleAssault})\r\n\t\t\t\tthis.adsIdle = adsIdleAssault;\r\n\t\t\t\tthis.gunIdle = gunIdleAssault;\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\t\tcase \"sticky\":\r\n\t\t\t\tconst gunIdleSticky = this.mixer.clipAction(      gunAniSticky);\r\n\t\t\t\tconst adsIdleSticky = this.mixer.clipAction(      adsAniSticky);\r\n\t\t\t\t//this.gunAnis.push({name:\"sticky\", idle:gunIdleSticky, ads:adsIdleSticky})\r\n\t\t\t\tthis.adsIdle = adsIdleSticky;\r\n\t\t\t\tthis.gunIdle = gunIdleSticky;\r\n\t\t\tbreak;\r\n\t\t\tcase \"launcher\":\r\n\t\t\t\tconst gunIdleLauncher = this.mixer.clipAction(    gunAniLauncher);\r\n\t\t\t\tconst adsIdleLauncher = this.mixer.clipAction(    adsAniLauncher);\r\n\t\t\t\tthis.adsIdle = adsIdleLauncher;\r\n\t\t\t\tthis.gunIdle = gunIdleLauncher;\r\n\t\t\t\t//this.gunAnis.push({name:\"launcher\", idle:gunIdleLauncher, ads:adsIdleLauncher})\r\n\t\t\tbreak;\r\n\t\t\tcase \"sixgun\":\r\n\t\t\t\tconst gunIdleSixGun = this.mixer.clipAction(      gunAniSixGun);\r\n\t\t\t\tconst adsIdleSixGun = this.mixer.clipAction(      adsAniSixGun);\r\n\t\t\t\tthis.adsIdle = adsIdleSixGun;\r\n\t\t\t\tthis.gunIdle = gunIdleSixGun;\r\n\t\t\tbreak;\r\n\t\t\t//this.gunAnis.push({name:\"sixgun\", idle:gunIdleSixGun, ads:adsIdleSixGun})\r\n\t\t\tcase \"sniper\":\r\n\t\t\t\tconst gunIdleSniper = this.mixer.clipAction(      gunAniSniper);\r\n\t\t\t\tconst adsIdleSniper = this.mixer.clipAction(      adsAniSniper);\r\n\t\t\t\tthis.adsIdle = adsIdleSniper;\r\n\t\t\t\tthis.gunIdle = gunIdleSniper;\r\n\t\t\tbreak;\r\n\t\t\tcase \"bot\":\r\n\t\t\t\tconst gunIdleBot = this.mixer.clipAction(      tposeAni);\r\n\t\t\t\tconst adsIdleBot = this.mixer.clipAction(      tposeAni);\r\n\t\t\t\tthis.adsIdle = adsIdleBot;\r\n\t\t\t\tthis.gunIdle = gunIdleBot;\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t//this.gunAnis.push({name:\"sniper\", idle:gunIdleSniper, ads:adsIdleSniper})\r\n\t\t\r\n\t\tthis.jump = this.mixer.clipAction(     jumpAni);\r\n\r\n\t\tfor(let i = 0; i<this.animations.length; i++){\r\n\t\t\tthis.removeAnimationFromBone(this.animations[i], \"spine_01\");\r\n\t\t}\r\n\t\t//this.jumpStart = this.mixer.clipAction(this.animations[7]);\r\n\t\t\r\n\t\tthis.idle.play();\r\n\t\tthis.forward.play();\r\n\t\tthis.right.play();\r\n\t\tthis.left.play();\r\n\t\tthis.back.play();\r\n\t\tthis.jump.play();\r\n\t\t\r\n\t\t\r\n\t\tthis.gunIdle.play();\r\n\t\tthis.adsIdle.play();\r\n\r\n\t\tthis.idle.weight = 0;\r\n\t\tthis.forward.weight = 0;\r\n\t\tthis.right.weight = 0;\r\n\t\tthis.left.weight = 0;\r\n\t\tthis.jump.weight = 1;\r\n\t\t//this.jumpStart.setLoop(LoopOnce);\r\n\t\t\r\n\t\tthis.shouldDoAni = true;\r\n\t\tthis.deltaMult = 4;\r\n\t\t\r\n\t}\r\n\t\r\n\t// updateSpineRotation (ROT){\r\n\t// \tfor(let k = 0; k<this.spineBones.length; k++){\r\n\t// \t\tthis.spineBones[k].rotation.z = ROT;\r\n\t// \t}\r\n\t// }\r\n\t\r\n\t//this.aniInfo = null;// this.cah.getServerInfo();\r\n\thandleAnimationEasing (TIME, OBJ){\r\n\t\t\r\n\t\tthis.idleTarg = 0;\r\n\t\tthis.leftTarg = 0;\r\n\t\tthis.rightTarg = 0;\r\n\t\tthis.forwardTarg = 0;\r\n\t\tthis.jumpTarg = 0;\r\n\t\tthis.backTarg = 0;\r\n\t\tif( OBJ.jump ){\r\n\t\t\tthis.jumpTarg = 1;\r\n\t\t}else{\r\n\t\t\tif(!Math.abs(OBJ.xAxis) > 0 && !Math.abs(OBJ.yAxis) > 0 ){\r\n\t\t\t\tthis.idleTarg = 1;\r\n\t\t\t}else{\r\n\t\t\t\tif( Math.abs(OBJ.yAxis) > 0){\r\n\t\t\t\t\tif(OBJ.yAxis>0){\r\n\t\t\t\t\t\tthis.forwardTarg = 1;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.backTarg = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if( Math.abs(OBJ.xAxis) > 0){\r\n\t\t\t\t\tif(OBJ.xAxis>0){\r\n\t\t\t\t\t\tthis.rightTarg = 1;\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.leftTarg = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// if(Math.random() > 0.98){\r\n\t\t// \tconsole.log(this.rightTarg)\r\n\t\t// }\r\n\r\n\t\t// gsap.to(this.idle,   {duration:TIME, weight:idle}); \r\n  //   gsap.to(this.forward,{duration:TIME, weight:forward});\r\n  //   gsap.to(this.left,   {duration:TIME, weight:left});\r\n  //   gsap.to(this.right,  {duration:TIME, weight:right}); \r\n  //   gsap.to(this.back,   {duration:TIME, weight:back}); \r\n  //   gsap.to(this.jump,   {duration:TIME, weight:jump}); \r\n    \r\n    this.deltaMult = 4;\r\n    \r\n    if(OBJ.boost){\r\n    \tthis.deltaMult = 7;\r\n    }\r\n\t\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tif(this.shouldDoAni){\r\n\t\t\tthis.mixer.update(appGlobal.deltaTime*this.deltaMult);\r\n\t\t\tif(this.adsing){\r\n\t\t\t\tthis.adsTarg = 1;\r\n\t\t\t\tthis.gunTarg = 0;\r\n\t\t\t}else{\r\n\t\t\t\tthis.adsTarg = 0;\r\n\t\t\t\tthis.gunTarg = 1;\r\n\t\t\t}\r\n\r\n\t\t\tthis.adsIdle.weight += (this.adsTarg-this.adsIdle.weight)*(appGlobal.deltaTime*90)\r\n\t\t\tthis.gunIdle.weight += (this.gunTarg-this.gunIdle.weight)*(appGlobal.deltaTime*90)\r\n\t\t\t\r\n\t\t\r\n\t\t\tthis.idle.weight    +=  (this.idleTarg-this.idle.weight)      *(appGlobal.deltaTime*150)\r\n\t\t\tthis.forward.weight +=  (this.forwardTarg-this.forward.weight)*(appGlobal.deltaTime*150)\r\n\t\t\tthis.left.weight    +=  (this.leftTarg   -this.left.weight)   *(appGlobal.deltaTime*150)\r\n\t\t\tthis.right.weight   +=  (this.rightTarg-this.right.weight)    *(appGlobal.deltaTime*150)\r\n\t\t\tthis.back.weight    +=  (this.backTarg-this.back.weight)      *(appGlobal.deltaTime*150)\r\n\t\t\tthis.jump.weight    +=  (this.jumpTarg-this.jump.weight)      *(appGlobal.deltaTime*150)\r\n\r\n\r\n\t\t\t// this.idle.weight    =  this.idleTarg\r\n\t\t\t// this.forward.weight =  this.forwardTarg\r\n\t\t\t// this.left.weight    =  this.leftTarg\r\n\t\t\t// this.right.weight   =  this.rightTarg\r\n\t\t\t// this.back.weight    =  this.backTarg\r\n\t\t\t// this.jump.weight    =  this.jumpTarg\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\tupdateRemote(OBJ){\r\n\t\tthis.adsing = OBJ.adsing;\r\n\t\tif(this.shouldDoAni){\r\n\t\t\tthis.handleAnimationEasing(.2, OBJ);\t\r\n\t\t}\r\n\t}\r\n\r\n\tparseAnimation( animation, legs ) {\r\n\r\n\t  const hierarchyTracks = animation.tracks;\r\n\t  for ( let h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\t    const split = hierarchyTracks[h].name.split('.');\r\n\t    const check = this.checkContainsAniName(this.contains, split[0]);\r\n\t    if(legs){\r\n\t      if(!check){\r\n\t        hierarchyTracks.splice(h, 1);\r\n\t        h--; \r\n\t      }\r\n\t    }else{\r\n\t      if(check){\r\n\t        hierarchyTracks.splice(h, 1);\r\n\t        h--; \r\n\t      }     \r\n\t    }\r\n\t  }\r\n\r\n\t}\r\n\r\n\tgetAniByName(anis, name){\r\n\t\tfor(let i = 0; i<anis.length; i++){\r\n\t\t\tif(anis[i].name==name)\r\n\t\t\t\treturn anis[i];\r\n\t\t}\r\n\t}\r\n\r\n\tremoveAnimationFromBone( animation, name ) {\r\n\r\n\t  const hierarchyTracks = animation.tracks;\r\n\t  for ( let h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\t    const split = hierarchyTracks[h].name.split('.');\r\n\t    const check = this.checkContainsAniName([name],split[0]);\r\n\t    if(check){\r\n\t      hierarchyTracks.splice(h, 1);\r\n\t      h--; \r\n\t    }\r\n\t  }\r\n\r\n\t}\r\n\r\n\tcheckContainsAniName(array, aniName){\r\n  \r\n\t  for(var i = 0; i<array.length;i++){\r\n\t    if(aniName.includes(array[i])){\r\n\t      return true;\r\n\t    }\r\n\t  }\r\n\t  return false;\r\n\t}\r\n\r\n}\r\n\r\n\r\n/*\r\nfunction checkWalkBones(bone){\r\n  for(var i = 0; i<walkBones.length;i++){\r\n    if(bone == walkBones[i]){\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction checkShootBones(bone){\r\n  for(var i = 0; i<armBones.length;i++){\r\n    if(bone == armBones[i]){\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n//walkbones armbones\r\nfunction checkNameArray(arr, bone, print){\r\n  const split = bone.split('.');\r\n  for(var i = 0; i<arr.length; i++){\r\n    if(arr[i].name == split[0]){\r\n      if(print){\r\n        //console.log(\"bone = \"+arr[i].name)\r\n        //console.log(\"split = \"+split[0])\r\n      }\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nfunction checkContains(bone){\r\n\r\n  for(var i = 0; i<contains.length;i++){\r\n    if(bone.name.includes(contains[i])){\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\nfunction checkTrackName(arrCheck1, arrCheck2){\r\n  for(var i = 0; i<arrCheck1.length; i++){\r\n    for(var h = 0; h<arrCheck2.length; h++){\r\n      if(arrCheck1[i].name == arrCheck2[h].name){\r\n        // console.log(i)\r\n        // console.log(arrCheck1[i].name)\r\n        //return true;\r\n      }\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\nfunction handlePositionCheck(OBJ){\r\n    var target = new THREE.Vector3();\r\n    OBJ.getWorldPosition( target );\r\n    var dist = target.distanceTo( new THREE.Vector3() );\r\n    var distCheck = 50000000000000000.5;\r\n    if( dist > distCheck ){\r\n      return false;\r\n    }\r\n    return true;  \r\n}\r\n\r\n\r\n\r\nfunction movementCheckMobile(){\r\n  if(player){\r\n    if(mouse.delta.y>0){\r\n      if(handlePositionCheck(player.checkFront)){\r\n        return true;\r\n      } \r\n    }else {\r\n      if(handlePositionCheck(player.checkBack)){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction movementCheckDesktop(){\r\n  if(player){\r\n    if(keys.w){\r\n      if(handlePositionCheck(player.checkFront)){\r\n        return true;\r\n      } \r\n    }else if (keys.s){\r\n      if(handlePositionCheck(player.checkBack)){\r\n        return true;\r\n      }\r\n    }\r\n    if(keys.a){\r\n      if(handlePositionCheck(player.checkRight)){\r\n        return true;\r\n      } \r\n    }else if (keys.d){\r\n      if(handlePositionCheck(player.checkLeft)){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  return false;\r\n}\r\n*/\n\n//# sourceURL=webpack://zerochill/./src/CharacterAnimationHandler.js?");

/***/ }),

/***/ "./src/CharacterSkin.js":
/*!******************************!*\
  !*** ./src/CharacterSkin.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CharacterSkin\": () => (/* binding */ CharacterSkin)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\r\n\r\n//import { Swatches } from './Swatches.js';\r\n\r\nclass CharacterSkin {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    const self = this;\r\n    \r\n    //this.swatches = new Swatches();\r\n    //this.isSwatch = OBJ.isSwatch;\r\n    \r\n    // if(OBJ.fps){\r\n    //   this.meshes = OBJ.fps\r\n    // }\r\n    // if(OBJ.body){\r\n    //   this.meshes = OBJ.body;\r\n    // }\r\n    \r\n    this.meshes = OBJ.meshes;\r\n\r\n    //console.log(this.swatchObj);\r\n    //if(this.isSwatch){\r\n      // this.swatchObj = this.swatches.getSwatchByName(OBJ.character, OBJ.name);\r\n      // for(let i = 0; i<this.meshes.length; i++){\r\n      //   this.meshes[i].traverse( function ( obj ) {\r\n      //     if(obj.isMesh || obj.isSkinnedMesh){\r\n      //       if(obj.materials !=null ){\r\n      //         for(let i = 0; i<obj.materials.length; i++){\r\n      //           const newColor = self.checkIfMaterialMatchesSwatch(obj.materials[i].name, self.swatchObj.array); \r\n      //           if( newColor != null ){\r\n      //             obj.materials[i].color.set(newColor.color);\r\n      //             obj.materials[i].emissive.set(newColor.emissive);\r\n      //           }\r\n      //         }\r\n      //       }\r\n      //       if(obj.material !=null ){\r\n      //         const newColor = self.checkIfMaterialMatchesSwatch(obj.material.name, self.swatchObj.array);\r\n      //         //console.log(newColor) \r\n      //         if( newColor != null ){\r\n      //           obj.material.color.set(\"#\"+newColor.color);\r\n      //           obj.material.emissive.set(\"#\"+newColor.emissive);\r\n      //           //obj.material.needsUpdate = true;\r\n      //         }\r\n      //       }\r\n      //     }\r\n      //   });\r\n      // }\r\n    //}\r\n  }\r\n\r\n  changeSwatch(OBJ){\r\n    //this.swatchObj = OBJ.swatches.getSwatchByName(OBJ.character, OBJ.name);\r\n    const swatchObj = OBJ.swatchObj;\r\n    for(let i = 0; i<this.meshes.length; i++){\r\n      this.meshes[i].traverse( function ( obj ) {\r\n        if(obj.isMesh || obj.isSkinnedMesh){\r\n          // if(obj.materials !=null ){\r\n          //   for(let i = 0; i<obj.materials.length; i++){\r\n          //     const newColor = self.checkIfMaterialMatchesSwatch(obj.materials[i].name, self.swatchObj.array); \r\n          //     if( newColor != null ){\r\n          //       obj.materials[i].color.set(newColor.color);\r\n          //       obj.materials[i].emissive.set(newColor.emissive);\r\n          //     }\r\n          //   }\r\n          // }\r\n          if(obj.material !=null ){\r\n            const newColor = self.checkIfMaterialMatchesSwatch(obj.material.name, swatchObj.array);\r\n            //console.log(newColor) \r\n            if( newColor != null ){\r\n              obj.material.color.set(\"#\"+newColor.color);\r\n              obj.material.emissive.set(\"#\"+newColor.emissive);\r\n              //obj.material.needsUpdate = true;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  checkIfMaterialMatchesSwatch(matName, swatches){\r\n\r\n    for(let i = 0; i<swatches.length; i++){\r\n      if(matName == swatches[i].ogName){\r\n        return {color:swatches[i].newColor, emissive:swatches[i].newEmissive};\r\n      }  \r\n    }\r\n    return null;\r\n     \r\n  }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/CharacterSkin.js?");

/***/ }),

/***/ "./src/CustomScene.js":
/*!****************************!*\
  !*** ./src/CustomScene.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CustomScene\": () => (/* binding */ CustomScene)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_math_Octree_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/math/Octree.js */ \"./src/scripts/jsm/math/Octree.js\");\n/* harmony import */ var _scripts_jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scripts/jsm/postprocessing/EffectComposer.js */ \"./src/scripts/jsm/postprocessing/EffectComposer.js\");\n/* harmony import */ var _scripts_jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scripts/jsm/postprocessing/RenderPass.js */ \"./src/scripts/jsm/postprocessing/RenderPass.js\");\n/* harmony import */ var _scripts_jsm_postprocessing_ShaderPass_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scripts/jsm/postprocessing/ShaderPass.js */ \"./src/scripts/jsm/postprocessing/ShaderPass.js\");\n/* harmony import */ var _scripts_jsm_postprocessing_OutlinePass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scripts/jsm/postprocessing/OutlinePass.js */ \"./src/scripts/jsm/postprocessing/OutlinePass.js\");\n/* harmony import */ var _scripts_jsm_shaders_FXAAShader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scripts/jsm/shaders/FXAAShader.js */ \"./src/scripts/jsm/shaders/FXAAShader.js\");\n/* harmony import */ var _World_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./World.js */ \"./src/World.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass CustomScene {\r\n\r\n\t//constructor( i = 0, parent = null, worldScale=20 ) {\r\n\tconstructor() {\r\n\r\n\t\tthis.clock = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tthis.STEPS_PER_FRAME = 5;\r\n\t\t\r\n\t\tthis.scene = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\t//this.scene.background = new Color( 0x88ccff );\r\n\t\t\r\n\t\tthis.renderer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { antialias: false } );\r\n\t\t//this.renderer.setPixelRatio( .9 );\r\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\r\n\t\tthis.renderer.shadowMap.enabled = true;\r\n\t\tthis.renderer.shadowMap.type = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\r\n\r\n\t\tthis.composer;\r\n\t\tthis.outlinePass; \r\n\t\tthis.characterOutlinePass;\r\n\t\tthis.renderPass;\r\n\t\t//this.sprite;\r\n\t\tthis.starsGeometry;\r\n\t\tthis.particles;\r\n\t\tthis.test = 0;\r\n\t\t// this.outlineParams = {\r\n\t\t// \tedgeStrength: 3.0,\r\n\t\t// \tedgeGlow: 0.0,\r\n\t\t// \tedgeThickness: 1.0,\r\n\t\t// \tpulsePeriod: 0,\r\n\t\t// \trotate: false,\r\n\t\t// \tusePatternTexture: false\r\n\t\t// };\r\n\t\t//const self = this;\r\n\t\t//self.reset();\r\n\t}\r\n\r\n\tinitComposer(){\r\n\t\tthis.composer = new _scripts_jsm_postprocessing_EffectComposer_js__WEBPACK_IMPORTED_MODULE_2__.EffectComposer( this.renderer );\r\n\t\tthis.renderPass = new _scripts_jsm_postprocessing_RenderPass_js__WEBPACK_IMPORTED_MODULE_3__.RenderPass( this.scene, appGlobal.controller.playerCamera );\r\n\t\tthis.composer.addPass( this.renderPass );\r\n\t\t\r\n\t\tthis.outlinePass = new _scripts_jsm_postprocessing_OutlinePass_js__WEBPACK_IMPORTED_MODULE_5__.OutlinePass( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( window.innerWidth, window.innerHeight*.5 ), this.scene, appGlobal.controller.playerCamera );\r\n\t\tthis.composer.addPass( this.outlinePass );\r\n\r\n\t\tthis.characterOutlinePass = new _scripts_jsm_postprocessing_OutlinePass_js__WEBPACK_IMPORTED_MODULE_5__.OutlinePass( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( window.innerWidth, window.innerHeight ), this.scene, appGlobal.controller.playerCamera );\r\n\t\tthis.characterOutlinePass.visibleEdgeColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0xff0000);\r\n\t\tthis.composer.addPass( this.characterOutlinePass );\r\n\t\t\r\n\t\t//this.effectFXAA = new ShaderPass( FXAAShader );\r\n\t\t//this.effectFXAA.uniforms[ 'resolution' ].value.set( 1 / window.innerWidth, 1 / window.innerHeight );\r\n\t\t//this.composer.addPass( this.effectFXAA );\r\n\t\t//addSelectedObject( selectedObject );\r\n\t}\r\n\r\n\tinitSkySphere(){\r\n\r\n\t\t//const top = appGlobal.random();\r\n\t\tconst top = appGlobal.hue;\r\n\t\tconst bottom = (top+.1)%1.0\r\n\t\tconst vertexShader = this.getBgVertex();\r\n\t\tconst fragmentShader = this.getBgFragment();\r\n\t\tconst uniforms = {\r\n\t\t\ttopColor: { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(top, .5, .4) },\r\n\t\t\tbottomColor: { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(bottom, .5, .2) },\r\n\t\t\toffset: { value: 0 },\r\n\t\t\texponent: { value: 0.9 }\r\n\t\t};\r\n\r\n\t\t//uniforms.topColor.value.copy( light.color );\r\n\r\n\t\tconst skyGeo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 500, 12, 12 );\r\n\t\tconst skyMat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\r\n\t\t\tuniforms: uniforms,\r\n\t\t\tvertexShader: vertexShader,\r\n\t\t\tfragmentShader: fragmentShader,\r\n\t\t\tside: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\r\n\t\t} );\r\n\r\n\t\tconst sky = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( skyGeo, skyMat );\r\n\t\tappGlobal.hitScanArray.push(sky);\r\n\t\tthis.scene.add( sky );\r\n\r\n\t}\r\n\r\n\t\r\n\t\r\n\tupdateOutlined(ARR){\r\n\t\tthis.outlinePass.selectedObjects = ARR;\r\n\t}\r\n\r\n\tupdate(){\r\n\r\n\t\tappGlobal.deltaTime = this.getDelta();\r\n\t\tappGlobal.particleHandler.update();\r\n\t\tappGlobal.world.update();\r\n\t\tappGlobal.remoteBullets.update();\r\n\t\tappGlobal.itemHandler.update();\r\n\t\tappGlobal.controller.update();\r\n\r\n\t\tfor(let i = 0; i<appGlobal.remotePlayers.length; i++){\r\n\t\t\tappGlobal.remotePlayers[i].update();\t\r\n\t\t}\r\n\r\n\t\tif(this.composer && appGlobal.playing)\r\n\t\t\tthis.composer.render();\r\n\t\telse\r\n\t\t\tthis.renderer.render( this.scene, appGlobal.controller.camera );\r\n\t}\r\n\r\n\tinitLights(){\r\n\t\tthis.scene.fog = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(appGlobal.hue, 0.7,.2), 0.01 );\r\n\t\t\r\n\t\tconst ambientlight = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0x6688cc );\r\n\t\tthis.scene.add( ambientlight );\r\n\t\t\r\n\t\t// const fillLight1 = new DirectionalLight( 0xf0f0f0, 0.5 );\r\n\t\t// fillLight1.position.set( -1, 1, 2 );\r\n\t\t// this.scene.add( fillLight1 );\r\n\r\n\t\tconst fillLight2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0x8888ff, 0.2 );\r\n\t\tfillLight2.position.set( 0, -1, 0 );\r\n\t\tthis.scene.add( fillLight2 );\r\n\r\n\t\tconst directionalLight = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0xffffc7, 1.2 );\r\n\t\tdirectionalLight.position.set( - 5, 25, - 1 );\r\n\t\tdirectionalLight.castShadow = true;\r\n\t\tdirectionalLight.shadow.camera.near = 0.01;\r\n\t\tdirectionalLight.shadow.camera.far = 500;\r\n\t\tdirectionalLight.shadow.camera.right = 30;\r\n\t\tdirectionalLight.shadow.camera.left = - 30;\r\n\t\tdirectionalLight.shadow.camera.top\t= 30;\r\n\t\tdirectionalLight.shadow.camera.bottom = - 30;\r\n\t\tdirectionalLight.shadow.mapSize.width = 1024;\r\n\t\tdirectionalLight.shadow.mapSize.height = 1024;\r\n\t\tdirectionalLight.shadow.radius = 4;\r\n\t\tdirectionalLight.shadow.bias = - 0.00006;\r\n\t\tthis.scene.add( directionalLight );\r\n\r\n\t\t// if(this.sprite == null){\r\n\t\t// \tthis.sprite = new TextureLoader().load( 'assets/textures/star.png' );\r\n\t\t// }\r\n\t\tthis.starsGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tconst vertices = [];\r\n\t\tfor ( let i = 0; i < 1000; i ++ ) {\r\n\r\n\t\t\tconst x = Math.random() * 200 - 100;\r\n\t\t\tconst y = Math.random() * 200 - 100;\r\n\t\t\tconst z = Math.random() * 200 - 100;\r\n\r\n\t\t\tvertices.push( x, y, z );\r\n\r\n\t\t}\r\n\r\n\t\tthis.starsGeometry.setAttribute( 'position', new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( vertices, 3 ) );\r\n\r\n\t\t//for ( let i = 0; i < parameters.length; i ++ ) {\r\n\r\n\t\t\t\r\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { size: .05+Math.random()*.08, blending: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), color:0xffffff, depthTest: true, transparent: true } );\r\n\t\t//materials[ i ].color.setHSL( color[ 0 ], color[ 1 ], color[ 2 ] );\r\n\r\n\t\tthis.particles = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.starsGeometry, mat );\r\n\t\t// particles.rotation.x = Math.random() * 6;\r\n\t\t// particles.rotation.y = Math.random() * 6;\r\n\t\t// particles.rotation.z = Math.random() * 6;\r\n\r\n\t\tthis.scene.add( this.particles );\r\n\t\tappGlobal.worldsHolder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tthis.scene.add(appGlobal.worldsHolder);\r\n\t\t//}\r\n\t\r\n\t}\r\n\r\n\tadd(obj){\r\n\t\tthis.scene.add(obj)\r\n\t}\r\n\tremove(obj){\r\n\t\tthis.scene.remove(obj);\r\n\t}\r\n\tupdateWindowSize(){\r\n\t\tappGlobal.controller.updateWindowSize();\r\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\r\n\t\tthis.composer.setSize( window.innerWidth, window.innerHeight );\r\n\t\tif(appGlobal.playerSelectScene!=null)\r\n\t\t\tappGlobal.playerSelectScene.updateWindowSize();\r\n\t\t//this.effectFXAA.uniforms[ 'resolution' ].value.set( 1 / window.innerWidth, 1 / window.innerHeight );\r\n\t}\r\n\tgetDelta(){\r\n\t\treturn Math.min( 0.05, this.clock.getDelta() ) / this.STEPS_PER_FRAME;\r\n\t}\r\n\t\r\n\tkill(){\r\n\t\t\r\n\t\r\n\t\tappGlobal.characterOutlineMeshes = [];\r\n\t\tappGlobal.globalHelperFunctions.tearDownObject(this.scene);\r\n\t\t\r\n\t\tthis.scene.remove.apply(this.scene, this.scene.children);\r\n\t\t//console.log(this.scene.children.length)\r\n\r\n\t}\r\n\treset(){\r\n\t\tappGlobal.hue = .35+appGlobal.random()*.35;\r\n\t\tthis.initSkySphere();\r\n\t\tthis.initLights();\r\n\t\tthis.initWorlds();\r\n\t\tthis.initComposer();\r\n\t\tappGlobal.itemHandler.reset();\r\n\t}\r\n\tgetBgVertex(){\r\n\t\tconst str = [\r\n\t\t\t\t\r\n\t\t\t'varying vec3 vWorldPosition;',\r\n\t\t\t'void main() {',\r\n\t\t\t\t'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\r\n\t\t\t\t'vWorldPosition = worldPosition.xyz;',\r\n\t\t\t\t'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\r\n\t\t\t'}',\r\n\t\t\t\r\n\t\t].join( '\\n' );\r\n\t\treturn str;\r\n\t}\r\n\tgetBgFragment(){\r\n\t\tconst str = [\r\n\t\t\t'uniform vec3 topColor;',\r\n\t\t\t'uniform vec3 bottomColor;',\r\n\t\t\t'uniform float offset;',\r\n\t\t\t'uniform float exponent;',\r\n\t\t\t'varying vec3 vWorldPosition;',\r\n\r\n\t\t\t'void main() {',\r\n\t\t\t\t'float h = normalize( vWorldPosition + offset ).y;',\r\n\t\t\t\t'gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) ), 1.0 );',\r\n\t\t\t'}',\r\n\t\t\t\r\n\t\t].join( '\\n' );\r\n\t\treturn str;\r\n\t}\r\n\r\n\tinitWorlds(){\r\n\t\tconst totalAmt =  Math.floor( 6+appGlobal.random()*5 );\r\n\t\tlet amt = 0;\r\n\t\twhile(amt<totalAmt){\r\n\t\t\t// if(amt==0){\r\n\t\t\t// \tconst pos = new Vector3();\r\n\t\t\t// \tpos.multiplyScalar((appGlobal.worldScale*2)*(1+appGlobal.random()*2))\r\n\t\t\t// \tconst scl = appGlobal.worldScale*(.3+appGlobal.random()*.9);\r\n\t\t\t// \tconst w = new World({scale:scl, position:pos, index:0});\r\n\t\t\t// \tappGlobal.worlds.push(w);\r\n\t\t\t// \tappGlobal.world = w;\r\n\t\t\t// \tamt++;\r\n\t\t\t// }else{\r\n\r\n\t\t\tlet check = this.checkBounds(amt);\r\n\t\t\tif(check!=null){\r\n\t\t\t\tconst w = new _World_js__WEBPACK_IMPORTED_MODULE_7__.World({scale:check.scl, position:check.pos, index:amt});\r\n\t\t\t\tappGlobal.worlds.push(w);\r\n\t\t\t\tappGlobal.world = w;\r\n\t\t\t\tamt++;\t\r\n\t\t\t}\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t\tappGlobal.world = appGlobal.worlds[Math.floor(Math.random()*appGlobal.worlds.length)];\r\n\t\tappGlobal.worldOctree = new _scripts_jsm_math_Octree_js__WEBPACK_IMPORTED_MODULE_1__.Octree();\r\n\t\tappGlobal.worldOctree.fromGraphNode( appGlobal.worldsHolder );\r\n\r\n\t\t// for( let i = 0; i <  Math.floor( 7+appGlobal.random()*7 ); i++){\r\n\t\t\t\r\n\t\t// \tconst pos = new Vector3();\r\n\t\t\t\r\n\t\t// \tif(i!=0){\t\r\n\t\t// \t\tpos.x = -1+appGlobal.random()*2;\r\n\t\t// \t\tpos.y = -1+appGlobal.random()*2;\r\n\t\t// \t\tpos.z = -1+appGlobal.random()*2;\r\n\t\t// \t}\r\n\t\t\t\r\n\t\t// \tpos.multiplyScalar((appGlobal.worldScale*2.5)*(1+appGlobal.random()*2))\r\n\t\t// \tconst scale = appGlobal.worldScale*(.6+appGlobal.random()*.8);\r\n\t\t// \tconst w = new World({scale:scale, position:pos, index:i});\r\n\t\t// \tappGlobal.worlds.push(w);\r\n\t\t// \tif(i==0){\r\n\t\t// \t\tappGlobal.world = w;\r\n\t\t// \t}\r\n\t\t\t\r\n\t\t// }\r\n\t}\r\n\r\n\tcheckBounds(int){\r\n\r\n\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\t\r\n\t\tpos.x = -1+appGlobal.random()*2;\r\n\t\tpos.y = -1+appGlobal.random()*2;\r\n\t\tpos.z = -1+appGlobal.random()*2;\r\n\t\r\n\t\tpos.multiplyScalar((appGlobal.worldScale*1.3)*(1+appGlobal.random()*2))\r\n\t\t\r\n\t\tconst ss = appGlobal.worldScale*(.35+appGlobal.random()*.7);\r\n\t\t//pos.x = this.test + (ss);\r\n\t\t//this.test = pos.x + (ss);\r\n\t\t//when scale was 3, distance was 6 equal apart\r\n\r\n\t\tif( this.actuallyCheckBounds({pos:pos, scl:ss}) ){\r\n\t\t\treturn {pos:pos, scl:ss};\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tactuallyCheckBounds(OBJ){\r\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\r\n\t\t\t//const checkPos = new Vector3().clone(appGlobal.worlds[i].worldPosition);\r\n\t\t\t//const checkScl = appGlobal.worlds[i].scale;\r\n\t\t\t// const r2 = ((OBJ.scl) * (OBJ.scl));\r\n\t\t\t// const d2 = ((checkScl)*(checkScl));\r\n\t\t\tconst dist = OBJ.pos.distanceTo( appGlobal.worlds[i].worldPosition );\r\n\t\t\t//console.log(dist);\r\n\t\t\tif( dist < ( appGlobal.worlds[i].scale + OBJ.scl )*.3 ){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/CustomScene.js?");

/***/ }),

/***/ "./src/EnvironmentObject.js":
/*!**********************************!*\
  !*** ./src/EnvironmentObject.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EnvironmentObject\": () => (/* binding */ EnvironmentObject)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\nclass EnvironmentObject {\n\n\t//constructor( i = 0, parent = null, worldScale=20 ) {\n\tconstructor( OBJ ) {\n\t\n\t\tthis.parent = OBJ.parent;\n\t\tthis.killed = false;\n\t\tthis.i = OBJ.i;\n\t\t\n\t\t// const geo = new SphereGeometry(.1+appGlobal.random()*.4,6,6);\n\t\t// const mat = new MeshStandardMaterial({color:OBJ.color});\n\t\t// this.mesh = new Mesh(geo,mat);\n\t\t\n\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tpos.x = -1.5+appGlobal.random()*3;\n\t\tpos.y = -2+appGlobal.random()*4;\n\t\tpos.z = -1.5+appGlobal.random()*3;\n\t\tpos.normalize();\n\t\tthis.meshHolder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tpos.multiplyScalar(OBJ.scale);\n\t\tthis.meshHolder.position.copy(pos);\n\t\tthis.meshHolder.lookAt(new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())());\n\t\tthis.color = OBJ.color;\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tappGlobal.scene.add(this.holder);\n\t\tthis.holder.position.copy(this.parent.position);\n\t\tthis.holder.add(this.meshHolder);\n\t\tconst self = this;\n\t\tself.handleMeshCreate();\n\t\t//this.parent.add(this.mesh);\n\t\t//this.rand = Math.random();\n\n\n\t}\n\n\thandleMeshCreate(){\n\t\tconst rnd = Math.floor(appGlobal.random()*4);\n\t\t//const rnd = 3;\n\t\tswitch(rnd){\n\t\t\tcase 0:\n\t\t\t\tfor(let i = 0; i<1+Math.floor(appGlobal.random()*3); i++){\n\t\t\t\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.1+appGlobal.random()*.6,6,6);\n\t\t\t\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t\t\t\tconst mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\t\t\t\tmesh.position.x += (-1+appGlobal.random()*2)*.8;\n\t\t\t\t\tmesh.position.y += (-1+appGlobal.random()*2)*.8;\n\t\t\t\t\tthis.meshHolder.add(mesh);\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tfor(let i = 0; i<3; i++){\n\t\t\t\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, .1, .2+appGlobal.random(), 8 );\n\t\t\t\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t\t\t\tconst mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\n\t\t\t\t\tmesh.position.x = i*.3;\n\t\t\t\t\tmesh.rotation.x-=Math.PI/2;\n\t\t\t\t\tmesh.position.x += (-1+appGlobal.random()*2)*.8;\n\t\t\t\t\tmesh.position.y += (-1+appGlobal.random()*2)*.8;\n\t\t\t\t\tthis.meshHolder.add(mesh);\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tconst amt = 8;\n\t\t\t\tconst height = .2+appGlobal.random()*1.5;\n\t\t\t\tconst hue = appGlobal.random()*.2\n\t\t\t\tfor(let i = 0; i<amt; i++){\n\t\t\t\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.2+height*.4,6,6);\n\t\t\t\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(hue ,1,.6), roughness:.2});\n\t\t\t\t\tconst mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\t\t\t\tmesh.scale.set( 1, .2, .2);\n\t\t\t\t\tmesh.rotation.z += (Math.PI*2)*(i/amt-1)\n\t\t\t\t\tthis.meshHolder.add(mesh);\n\t\t\t\t\tmesh.position.z -= (height/2);\n\t\t\t\t\tmesh.position.z -= -(.12);\n\t\t\t\t}\n\t\t\t\tconst geo1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.1,.1,height);\n\t\t\t\tconst mat1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t\t\tconst mesh1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo1,mat1);\n\t\t\t\tthis.meshHolder.add(mesh1);\n\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t//const halfSphere = new THREE.Mesh( geometry, material );\n\n\t\t\t\tconst height2 = .8+appGlobal.random()*.7;\n\t\t\t\t\n\t\t\t\tconst geo2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.2,.2, height2);\n\t\t\t\tconst mat2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t\t\tconst mesh2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo2, mat2);\n\n\t\t\t\tconst geo3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( .5, 8, 8, Math.PI / 2, Math.PI * 2, 0, Math.PI / 180 * 90 );\n\t\t\t\tconst mat3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t\t\tconst mesh3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo3, mat3);\n\t\t\t\t\n\t\t\t\tconst geo4 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( .5, .5, 0.01, 8, 1 );\n\t\t\t\tconst mat4 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: this.color } );\n\t\t\t\tconst mesh4 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo4, mat4);\n\n\t\t\t\tmesh3.position.z = (-height2)+.7;\n\t\t\t\tmesh4.position.z = (-height2)+.7;\n\t\t\t\tmesh3.rotation.x = mesh4.rotation.x = -Math.PI/2;\n\t\t\t\t\n\t\t\t\tthis.meshHolder.add(mesh4, mesh3, mesh2);\n\t\t\tbreak;\n\n\t\t}\n\t}\n\n\tupdate(OBJ){\n\t\t\t\n\t\t// if(!this.killed){\n\t\t\t\n\t\t// \tthis.mesh.scale.set( 1/OBJ.size, 1/OBJ.size, 1/OBJ.size );\n\t\t\t\n\t\t// \tfor(let i = 0; i<OBJ.envObjs.length; i++){\n\t\t// \t\tconst p1 = new Vector3();\n\t\t// \t\tOBJ.envObjs[i].mesh.getWorldPosition(p1);\n\t\t// \t\tconst p2 = new Vector3(); \n\t\t// \t\tthis.mesh.getWorldPosition(p2);\n\t\t// \t\tconst dist = p1.distanceTo(p2);\n\t\t\t\t\n\t\t// \t\tif(dist <3){\n\t\t// \t\t\tif(this.rand < OBJ.envObjs[i].rand){\n\t\t\t\t\t\t\n\t\t// \t\t\t\tthis.kill();\n\t\t\t\t\t\t\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t}\n\t\n\tkill(){\n\t\tif(!this.killed){\n\t\t\tappGlobal.globalHelperFunctions.tearDownObject(this.meshHolder);\n\t\t\tthis.holder.remove(this.meshHolder);\n\t\t\tappGlobal.scene.remove(this.holder);\n\t\t\tthis.killed = true;\n\t\t}\n\t}\n\t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/EnvironmentObject.js?");

/***/ }),

/***/ "./src/FPSAni.js":
/*!***********************!*\
  !*** ./src/FPSAni.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FPSAni\": () => (/* binding */ FPSAni)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/utils/SkeletonUtils.js */ \"./src/scripts/jsm/utils/SkeletonUtils.js\");\n/* harmony import */ var _WeaponEmissiveHandler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WeaponEmissiveHandler.js */ \"./src/WeaponEmissiveHandler.js\");\n\n\n\n\nclass FPSAni {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\n\t\tconst self = this;\n\t\tconst model = self.getModelByName(\"fps-\"+OBJ.model)\n\t\tthis.weaponName = OBJ.name;\n\t\tthis.mesh = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_1__.clone)( model.scene );\n\t\t// const ar=[];\n\t\t// this.mesh.traverse( function ( obj ) {\n\n\t //        if(obj.isMesh || obj.isSkinnedMesh){\n\t //          if(obj.material !=null ){\n\t //          \tif(!self.checkIsInArr(ar, obj.material.name)){\n\t //          \t\tar.push(obj.material.name);\n\t\t// \t\t\tconsole.log(\"{\");\n\t\t// \t\t\tconsole.log(\"name:'\"+obj.material.name+\"',\");\n\t\t// \t\t\tconsole.log(\"color:'\"+obj.material.color.getHexString()+\"',\");\n\t\t// \t\t\tconsole.log(\"emissive:'\"+obj.material.emissive.getHexString ()+\"'\");\n\t\t// \t\t\tconsole.log(\"}\");\n\t //            }\n\t //          }\n\t //        }\n\n  //     \t});\n\t\t\n\t\tappGlobal.controller.playerCamera.add(this.mesh);\n\n\t\tthis.mesh.position.z -= 0;\n\t\tthis.animations = model.animations;\n\t\tthis.flock = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.flock.add(this.mesh);\n\t\tthis.mixer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(this.flock);\n\t\t\n\t\tthis.idle = this.mixer.clipAction( self.getAniByName(this.animations, \"idle\"));\n\t\tthis.ads =  this.mixer.clipAction( self.getAniByName(this.animations, \"ads\" ));\n\t\tthis.run =  this.mixer.clipAction( self.getAniByName(this.animations, \"run\" ));\n\n\t\tthis.idle.play();\n\t\tthis.ads.play();\n\t\tthis.run.play();\n\t\tthis.inc = 0;\n\t\t\n\t\tthis.mesh.rotation.y += Math.PI;\n\t\tthis.idle.weight = 1;\n\t\tthis.ads.weight = 0;\n\t\tthis.deltaMult = 4;\n\t\tthis.idleTarg = 1;\n\t\tthis.adsTarg = 0;\n\t\tthis.rotTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst skin =  appGlobal.skinsHandler.getCurrentSkinOnCharacter(OBJ.model);\n\t\tconsole.log(OBJ.model)\n\t\tappGlobal.skinsHandler.changeSwatchOnMesh({meshes:[this.mesh], name:OBJ.model}, skin);\n\n\t\tconst emissive = self.getMaterialByName(\"emissive\", this.mesh);\n\t\tconst blast = self.getMaterialByName(\"blast\", this.mesh);\n\t\t//let name = \"tip\";\n\t\t//if(OBJ.model == \"sniper\" || OBJ.model == \"sixgun\" || OBJ.model == \"launcher\" || OBJ.model == \"submachine\")\n\t\tlet name = \"tip-\"+OBJ.model;\n\t\tthis.tipObject = this.mesh.getObjectByName(name);\n\t\tthis.tipPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(); \n\t\tthis.boosting = false;\n\t\tthis.boostTarg = 0;\n\t\t\n\t\tthis.emissiveHelper = new _WeaponEmissiveHandler_js__WEBPACK_IMPORTED_MODULE_2__.WeaponEmissiveHandler({name:OBJ.model, emissive:emissive, blast:blast, blastModel:this.tipObject, skin:skin});\n\t\t\n\t\tthis.reloading = false;\n\t\tthis.adsing = false;\n\t\tthis.player = OBJ.player;\n\t\t\n\t}\n\n\tcheckIsInArr(arr,s){\n\t\tfor(let i = 0; i<arr.length; i++){\n\t\t\tif(arr[i]==s){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\thide(){\n\t\tthis.mesh.visible = false;\n\t}\n\tshow(){\n\t\tthis.mesh.visible = true;\n\t}\n\t\n\tupdate(){\n\t\tthis.tipObject.getWorldPosition(this.tipPosition);\n\t\t\n\t\tthis.emissiveHelper.update();\n\t\t\n\t\tthis.mixer.update(appGlobal.deltaTime*this.deltaMult);\n\t\tconst ez = 90;\n\t\tconst ezShoot = 40;\n\t\tthis.idle.weight +=  (this.idleTarg - this.idle.weight)   * (ez*appGlobal.deltaTime);\t\n\t\tthis.ads.weight  +=  (this.adsTarg - this.ads.weight )   * (ez*appGlobal.deltaTime);\n\t\tthis.run.weight  +=  (this.boostTarg - this.run.weight )   * (ez*appGlobal.deltaTime);\t\n\t\tif(!this.reloading){\n\t\t\tthis.mesh.rotation.x += (0 - this.mesh.rotation.x)       * (ezShoot*appGlobal.deltaTime)\n\t\t\tthis.mesh.rotation.y += (Math.PI  - this.mesh.rotation.y)* (ezShoot*appGlobal.deltaTime)\n\t\t}\n\t\tif(this.boosting && !this.reloading && appGlobal.localPlayer.animationOnFloor){\n\t\t\tlet onGround = true;\n\t\t\tthis.inc+=(appGlobal.deltaTime*80);\n\t\t\tthis.mesh.position.y = Math.sin(this.inc)*.06;\n\t\t}else{\n\t\t\tthis.mesh.position.y+=(0-this.mesh.position.y)*appGlobal.deltaTime*40\n\t\t}\n\t}\n\n\treloadAnimation(TIME){\n\t\tthis.emissiveHelper.reload();\n\t\tthis.reloading = true;\n\t\tconst self = this;\n\t\tgsap.to(this.mesh.rotation,   {duration:TIME/2, /*y:Math.PI,*/ x:-Math.PI*.4, /*z:0 */});\n\t\tgsap.to(this.mesh.rotation,   {duration:TIME/2, /*y:Math.PI, */x:0, /*z:0,*/ delay:TIME/2, onComplete:function(){self.reloading = false;}}); \n\t}\n\n\tshoot(OBJ){\n\t\tthis.emissiveHelper.shoot(OBJ)\n\t\tif(this.adsTarg>0){\n\t\t\tconst xRnd = .01+Math.random()*.01;\n\t\t\tthis.mesh.rotation.x = xRnd;\n\t\t\tconst yRnd = -.01+Math.random()*.02;\n\t\t\tthis.mesh.rotation.y = Math.PI+yRnd;\n\t\t}else{\n\t\t\tconst xRnd = .1+Math.random()*.1;\n\t\t\tthis.mesh.rotation.x = xRnd;\n\t\t\tconst yRnd = -.1+Math.random()*.1;\n\t\t\tthis.mesh.rotation.y = Math.PI+yRnd;\n\t\t}\n\t}\n\n\ttoggleADS(ADSING){\n\t\tthis.adsing = ADSING;\n\t\tif(!this.boosting){\n\t\t\tif(ADSING){\n\t\t\t\tthis.adsTarg = 1;\n\t\t\t\tthis.idleTarg = 0;\n\t\t\t\tthis.boostTarg = 0;\n\t\t\t\tif(this.weaponName==\"sniper\" && !this.player.emoting)\n\t\t\t\t\tthis.mesh.visible = false;\n\t\t\t}else{\n\t\t\t\tthis.adsTarg = 0;\n\t\t\t\tthis.idleTarg = 1;\n\t\t\t\tthis.boostTarg = 0;\n\t\t\t\tif(this.weaponName==\"sniper\" && !this.player.emoting)\n\t\t\t\t\tthis.mesh.visible = true;\n\t\t\t}\n\t\t}\n\t}\n\ttoggleBoost(BOOST){\n\t\tthis.boosting = BOOST;\n\t\tif(BOOST){\n\t\t\tthis.adsTarg = 0;\n\t\t\tthis.idleTarg = 0;\n\t\t\tthis.boostTarg = 1;\n\t\t}else{\n\t\t\tif(this.adsing){\n\t\t\t\tthis.adsTarg = 1;\n\t\t\t\tthis.idleTarg = 0;\n\t\t\t\tif(this.weaponName==\"sniper\" && !this.player.emoting)\n\t\t\t\t\tthis.mesh.visible = false;\n\t\t\t}else{ \n\t\t\t\tthis.adsTarg = 0;\n\t\t\t\tthis.idleTarg = 1;\n\t\t\t\tif(this.weaponName==\"sniper\" && !this.player.emoting)\n\t\t\t\t\tthis.mesh.visible = true;\n\t\t\t}\n\t\t\tthis.boostTarg = 0;\n\t\t}\n\t}\n\tgetMaterialByName(NAME, MESH){\n\t\tlet mat;\n\t\tMESH.traverse( function( object ) {\n\t\t\tif(object.isMesh){\n\t\t\t\tobject.frustumCulled = false;\n\t\t\t}\n    \t\tif ( object.material ) {\n    \t\t\tif(object.material.name == NAME){\n    \t\t\t\tmat = object.material;\n    \t\t\t}\n    \t\t}\n\n\t\t} );\n\n\t\treturn mat;\n\t}\n\tgetModelByName(NAME){\n\t\tfor(let i = 0; i<appGlobal.loadObjs.length;i++){\n\t\t\tif(appGlobal.loadObjs[i].name==NAME)\n\t\t\t\treturn appGlobal.loadObjs[i].model;\t\n\t\t}\n\t\t\n\t}\n\tgetAniByName(anis, name){\n\t\tfor(let i = 0; i<anis.length; i++){\n\t\t\tlet text = anis[i].name;\n\t\t\tlet result = text.includes(name);\n\t\t\tif(result)\n\t\t\t\treturn anis[i];\n\t\t}\n\t}\n\n\n\tkill(){\n\t\tappGlobal.globalHelperFunctions.tearDownObject(this.mesh);\n\t\tappGlobal.controller.playerCamera.remove(this.mesh);\n\t\tthis.emissiveHelper.kill();\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/FPSAni.js?");

/***/ }),

/***/ "./src/GamePad.js":
/*!************************!*\
  !*** ./src/GamePad.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GamePad\": () => (/* binding */ GamePad)\n/* harmony export */ });\nclass GamePad {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    this.canDiscoverGamePad = true;\r\n    this.initedSettings = false;\r\n  }\r\n\r\n  update(){\r\n  \r\n    if(this.canDiscoverGamePad){\r\n      this.updateGamePad();\r\n    }\r\n    \r\n  }\r\n\r\n  updateGamePad(){\r\n    const gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads : []);\r\n    if (!gamepads)\r\n      return;\r\n    \r\n    const gp = gamepads[0];\r\n    if(gp!=null){\r\n       if(!this.initedSettings){\r\n        appGlobal.settings.updateGamePad(true);\r\n        this.initedSettings = true;\r\n      }\r\n      if(appGlobal.localPlayer != null){\r\n        appGlobal.localPlayer.handleGamePad({\r\n\r\n          xaxis:this.parseAxes((gp.axes[0])*1), \r\n          yaxis:this.parseAxes((gp.axes[1])*1), \r\n          jump:this.buttonPressed(gp.buttons[0]),\r\n          boost:this.buttonPressed(gp.buttons[4]),\r\n          reload:this.buttonPressed(gp.buttons[2]),\r\n          mx:this.parseAxes((gp.axes[2])*1),\r\n          my:this.parseAxes((gp.axes[3])*1),\r\n          ads:this.buttonPressed(gp.buttons[6]),\r\n          shoot:this.buttonPressed(gp.buttons[7]),\r\n          ability1:this.buttonPressed(gp.buttons[3]),\r\n          ability2:this.buttonPressed(gp.buttons[1]),\r\n          w:this.axesToKeyPress(gp.axes[1], false),\r\n          s:this.axesToKeyPress(gp.axes[1], true),\r\n          a:this.axesToKeyPress(gp.axes[0], false),\r\n          d:this.axesToKeyPress(gp.axes[0], true),\r\n        })\r\n      }else{\r\n        if(this.buttonPressed(gp.buttons[0])){\r\n          appGlobal.globalHelperFunctions.handleInitPlaying();  \r\n        }\r\n      }\r\n      //console.log(this.b)\r\n    }\r\n\r\n  }\r\n\r\n  parseAxes(val){\r\n    if(Math.abs(val)<.2)\r\n      return 0;\r\n    else\r\n      return val;\r\n  }\r\n\r\n  axesToKeyPress(val, pos){\r\n    if(pos){\r\n      if(val>.4)\r\n        return true;\r\n      else\r\n        return false;  \r\n    }else{\r\n      if(val<-.4)\r\n        return true;\r\n      else\r\n        return false;\r\n    }\r\n  }\r\n\r\n  buttonPressed(b){\r\n\r\n    if (typeof(b) == \"object\") {\r\n      return b.pressed;\r\n    }\r\n    return false;\r\n\r\n  }\r\n\r\n  // gamepadHandler(event, connecting) {\r\n  //   //const gamepad = event.gamepad;\r\n  //   //this.gpIndex = gamepad.index;\r\n  //   //if (connecting) {\r\n  //   //  this.gamepads[this.gpIndex] = gamepad;\r\n  //   //} else {\r\n  //   //  delete gamepads[gamepad.index];\r\n  //   //}\r\n  //   //this.gamePad = navigator.getGamepads()[0];\r\n  // }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/GamePad.js?");

/***/ }),

/***/ "./src/GlobalParticleHandler.js":
/*!**************************************!*\
  !*** ./src/GlobalParticleHandler.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GlobalParticleHandler\": () => (/* binding */ GlobalParticleHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ParticleEmitter.js */ \"./src/ParticleEmitter.js\");\n\n\n\n\nclass GlobalParticleHandler {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\n\t\tthis.arrFull = false;\n\t\tthis.index = 0;\n\t\tthis.arr=[];\n\t\tthis.max = 7;\n\t\t\n\t}\n\t\n\tupdate(){\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].update();\t\n\t\t}\n\t}\n\n\tcreateEmitter(OBJ){\n\n        if(this.arrFull){\n            this.arr[this.index].kill();\t\n        }\n        \n        const pe = new _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__.ParticleEmitter(OBJ);\n        pe.emit();\n        this.arr[this.index] = pe;\n\n        this.index++;\n\n        if(this.index == this.max){\n            this.index=0;\n            this.arrFull = true;\t\n        }\n\t}\n\n\tkill(){\n\t\tthis.arrFull = false;\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].kill();\t\n\t\t}\n\t\tthis.index = 0;\n\t\tthis.arr = [];\n\t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/GlobalParticleHandler.js?");

/***/ }),

/***/ "./src/GlobalSoundHandler.js":
/*!***********************************!*\
  !*** ./src/GlobalSoundHandler.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GlobalSoundHandler\": () => (/* binding */ GlobalSoundHandler)\n/* harmony export */ });\n// import {\n// \tPositionalAudio\n// } from 'three';\n\nclass GlobalSoundHandler {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\n\t\tthis.context;\n\t\tthis.audioFiles = [\n\t\t\t\"rocket\",\n\t\t\t\"snipe\",\n\t\t\t\"rocket2\",\n\t\t\t\"automatic-2\",\n\t\t\t\"sniper2\",\n\t\t\t\"sniper-six2\",\n\t\t\t\"explosion\",\n\t\t\t\"sub\",\n\t\t\t\"boost\",\n\t\t\t\"health\",\n\t\t\t\"blink\",\n\t\t\t\"double-jump\",\n\t\t\t\"wall-hack\",\n\t\t\t\"teleport\",\n\t\t\t\"planet-switch\",\n\t\t\t\"dink\",\n\t\t\t\"dink-body-3\",\n\t\t\t\"dmg\",\n\t\t\t\"step-0\",\n\t\t\t\"step-1\",\n\t\t\t\"kill-2\",\n\t\t\t\"slime\",\n\t\t\t\"splat\",\n\t\t\t\"slime-thud\"\n\t\t]\n\t\tthis.repeatHandlerDeath = new SoundRepeatHandler({name:\"kill-2\",timeout:200});\n\t\tthis.repeatHandlerDink = new SoundRepeatHandler({name:\"dink\",timeout:200});\n\t\tthis.repeatHandlerDinkBody = new SoundRepeatHandler({name:\"dink-body-2\",timeout:100});\n\t\tthis.repeatHandlerDmg = new SoundRepeatHandler({name:\"dmg\",timeout:200});\n\t\tthis.repeatArray = [];\n\t\tthis.repeatArray.push(this.repeatHandlerDeath);\n\t\tthis.repeatArray.push(this.repeatHandlerDink);\n\t\tthis.repeatArray.push(this.repeatHandlerDinkBody);\n\t\tthis.repeatArray.push(this.repeatHandlerDmg);\n\t\t\n\t\tthis.samples = [];\n\t\t\n\t\tconst self = this;\n\t\tself.init();\n\t\t//console.log(PositionalAudio)\n\t}\n\t\n\tupdate(){\n\t}\n\n\tinit(){\n\n\t\tconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\t\tthis.context = new AudioContext();\n\n\t\tif (this.context.decodeAudioData.length !== 1) {\n\t\t  const originalDecodeAudioData = this.context.decodeAudioData.bind(this.context);\n\t\t  this.decodeAudioData = buffer =>\n\t\t    new Promise((resolve, reject) =>\n\t\t      originalDecodeAudioData(buffer, resolve, reject)\n\t\t    );\n\t\t}\n\t\tfor(let i = 0; i<this.audioFiles.length; i++){\n\t\t\tthis.load({url:\"assets/sounds/\"+this.audioFiles[i]+\".mp3\", index:i, name:this.audioFiles[i]});\n\t\t}\n\t\t\n\t\t\n\t}\n\n\tload(OBJ){\n\n\t\tconst name = OBJ.name;\n\t\tconst index = OBJ.index;\n\t\tconst self = this;\n\t\tfetch(OBJ.url).then(function(response) {\n\t\t    if (!response.ok) {\n\t\t      throw new Error(\"HTTP error, status = \" + response.status);\n\t\t    }\n\t    \treturn response.arrayBuffer();\n\t \t}).then(function(buffer) {\n\t\t\tself.context.decodeAudioData(buffer, function(decodedData) {\n\t\t\t\tconst obj = {sample:decodedData, name:name, index:index};\n\t\t\t\tself.samples.push(obj);\n\t\t\t});\n\t  \t});\n\n\t}\n\n\tplaySoundByName(OBJ){\n\t\tconst rep = this.checkIfRepeatSound(OBJ); \n\t\tif(rep != null){\n\t\t\tif(rep.canPlaySoundTimeout()){\n\t\t\t\tthis.playSoundByNameHelper(OBJ);\n\t\t\t}\n\t\t}else{\n\t\t\tthis.playSoundByNameHelper(OBJ);\n\t\t}\n\t\t\n\t}\n\n\tplaySoundByNameHelper(OBJ){\n\t\tconst sample = this.getSampleByName(OBJ.name);\n\t\t\tconst obj = {sample:sample, dist:OBJ.dist, note:this.getKey(true)}\n\t\t\tthis.playAudio(obj);\n\t}\n\n\tcheckIfRepeatSound(OBJ){\n\t\n\t\tfor(let i =0; i< this.repeatArray.length; i++){\n\t\t\tif(OBJ.name == this.repeatArray[i].name){\n\t\t\t\treturn this.repeatArray[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetSampleByName(name){\n\t\tfor(let i = 0; i<this.samples.length; i++){\n\t\t\tconst s = this.samples[i];\n\t\t\tif(s.name == name)\n\t\t\t\treturn this.samples[i];  \n\t\t}\n\t\treturn false;\n\t}\n\n\tplayAudio(OBJ){\n\t\t\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = OBJ.sample.sample;\n\t\tconst gainNode = this.context.createGain()\n\t\tgainNode.gain.value = OBJ.dist *  (.1 * window.settingsParams[\"volume\"]); // 10 %\n\t\t//source.playbackRate.value = note;\n\n\n\t\tsource.playbackRate.value = 2 ** ((OBJ.note - 60) / 12);\n\t\tsource.connect(gainNode);\n\t\tgainNode.connect(this.context.destination);\n\t\tsource.start(0);\n\t}\n\n\tgetKey(shouldDoRandom){\n\t\tlet start = 60;\n\t\tlet fnl = start+(-2+Math.random()*4);\n\t\t//console.log(\"SHOULD DO RANDOM\"+shouldDoRandom)\n\t\tif(shouldDoRandom){\n\t\t\treturn fnl;\n\t\t}else{\n\t\t\treturn start;\n\t\t}\n\t}\n}\n\n\n\n\nclass SoundRepeatHandler{\n\tconstructor(OBJ){\n\t\tthis.name=OBJ.name;\n\t\tthis.timeout;\n\t\tthis.canPlaySound = true;\n\t\tthis.time = OBJ.timeout;\n\t}\n\n\tcanPlaySoundTimeout(){\n\t\tlet shouldPlaySound = false;\n\t\tif(this.canPlaySound){\n\t\t\tshouldPlaySound = true;\n\t\t\tconst self = this;\n\t\t\tthis.canPlaySound=false;\n\t\t\tthis.timeout = setTimeout(function(){\n\t\t\t\tself.canPlaySound = true;\n\t\t\t},this.time);\n\t\t}\n\t\treturn shouldPlaySound;\n\t}\n}\n\n//# sourceURL=webpack://zerochill/./src/GlobalSoundHandler.js?");

/***/ }),

/***/ "./src/Hud.js":
/*!********************!*\
  !*** ./src/Hud.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Hud\": () => (/* binding */ Hud)\n/* harmony export */ });\n// import {\n// \tObject3D,\n// \tBoxGeometry,\n// \tMeshNormalMaterial,\n// \tMesh,\n// \tVector3,\n// \tVector2,\n// \tQuaternion,\n// } from 'three';\n// import { GlobalParticleHandler } from './GlobalParticleHandler.js';\n\n\nclass Hud {\n\t//{shootCooldown:shootCooldown, bullet:bullet};\n\tconstructor() {\n\t\tthis.targ = 0;\n\t\tthis.ease = 0;\n\t\tthis.ani;\n\t\tthis.container = document.getElementById( 'hud' );\n\t\tthis.recticle =  document.getElementById( 'recticle' );\n\t\tthis.hitMarker =  document.getElementById( 'hit-marker' );\n\t\tthis.healthBar =  document.getElementById( 'health-fill' );\n\t\tthis.healthBarWidth = 150;\n\t\tthis.boostBar =  document.getElementById( 'boost-fill' );\n\t\tthis.boostBarWidth =  150;\n\t\tthis.reload =  document.getElementById( 'reloading' );\n\t\tthis.ammo =  document.getElementById( 'ammo-amount' );\n\t\tthis.ammoTotal =  document.getElementById( 'ammo-amount-total' );\n\t\tthis.healthNumber =  document.getElementById( 'current-health' );\n\t\tthis.dmgMarker = document.getElementById('dmg-marker');\n\t\tthis.damageMarkerTimeout = null;\n\t\tthis.damageMarkerAni;\n\t\tconst self = this;\n\t\t\n\t\t//this.weaponObj = OBJ;\n\t}\n\n\t\n\tlerp(a,b,t){\n\t\treturn a * (1-t) + b * t\n\t}\n\n\tdoDamageMarker(headshot){\n\n\t\tif(this.damageMarkerTimeout != null){\n\t\t\tclearTimeout(this.damageMarkerTimeout)\n\t\t}\n\t\tconst self = this;\n\t\t//this.hitMarker.style.display = \"block\";\n\t\tif(headshot){\n\t\t\tthis.hitMarker.style.backgroundImage = 'url(\"../assets/ui/dmg-marker-hs-2.png\")';\n\t\t}else{\n\t\t\tthis.hitMarker.style.backgroundImage = 'url(\"../assets/ui/dmg-marker-bs-2.png\")';\n\t\t}\n\t\tthis.toggleElem(this.hitMarker, true)\n\t\tthis.damageMarkerTimeout = setTimeout(function(){\n\t\t\tself.toggleElem(self.hitMarker, false)\n\t\t\t//self.hitMarker.style.display = \"none\";\n\t\t}, 200)\n\t}\n\tdoIncomingDamageMarker(angle){\n\t\t//const rot = //Math.sin(angle);\n\t\tconst fnl = (angle*57.2958);\n\t\t//console.log(fnl)\n\t\tthis.dmgMarker.style.opacity = 1;\n\t\tthis.dmgMarker.style.transform = \"rotate(\"+fnl+\"deg)\";\n\n\t\tif(this.damageMarkerAni!=null){\n\t\t\tthis.damageMarkerAni.kill();\n\t\t}\n\t\tthis.damageMarkerAni = gsap.to(this.dmgMarker.style,{duration:.3, opacity:0, ease: \"linear.none()\", delay:0});\n\t}\n\ttoggleReload(showReload){\n\t\tif(showReload){\n\t\t\tthis.toggleElem(this.reload, true)\n\t\t}else{\n\t\t\tthis.toggleElem(this.reload, false)\n\t\t}\n\t}\n\t\n\tupdateAmmo(amnt){\n\t\tthis.setText(this.ammo, amnt);\n\t}\n\n\tupdateTotalAmmo(amnt){\n\t\tthis.setText(this.ammoTotal, \"/ \"+amnt);\n\t}\n\n\tupdateHealth(amnt){\n\t\tif(amnt<0)amnt = 0;\n\t\tthis.setText(this.healthNumber, amnt);\n\t\tconst width = Math.floor(( amnt / 100 )*this.healthBarWidth);\n\t\n\t\tthis.healthBar.style.width = width + \"px\";\n\t}\n\tupdateBoost(amnt){\n\t\tif(amnt<0)amnt = 0;\n\t\tconst width = Math.floor(( amnt )*this.boostBarWidth);\n\t\tthis.boostBar.style.width = width + \"px\";\n\t}\n\n\ttoggleElem(e,show){\n\t\tif(show)\n\t\t\te.style.display = \"block\";\n\t\telse\n\t\t\te.style.display = \"none\";\n\t}\n\n\tsetText(e, text){\n\t\te.innerHTML = \"\"+text;\n\t}\n\t\t\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Hud.js?");

/***/ }),

/***/ "./src/Item.js":
/*!*********************!*\
  !*** ./src/Item.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Item\": () => (/* binding */ Item)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass Item {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\t\tthis.obj = OBJ;\n\t\t//this.sizeMult = OBJ.sizeMult;\n\t\tconst sizeMult = 1.2+(OBJ.sizeMult*.7);\n\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1, 4, 2 );\n\t\t//const geo = new TorusGeometry( 1, .3, 16, 18 );\n\t\tconst geoCylinder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.4, 1.4, (OBJ.scale*sizeMult)-OBJ.scale, 16, 1, true );\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({ flatShading:true, color:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL( (appGlobal.hue +.45) % 1.0 , .8, .5 ),roughness:0.07});\n\t\tconst tex = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().load( 'assets/textures/grad-vertical.png' );\n\t\tconst matCyl = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({transparent:true, opacity:.3, map: tex, side:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), blending:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), alphaMap:tex, color:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL( (appGlobal.hue +.45) % 1.0 , .8, .8 ), });\n\t\t\n\t\tthis.radius = 2;\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\tthis.cyl = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geoCylinder,matCyl);\n\t\tthis.offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.planetRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.rot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tif(!OBJ.killed){\n\t\t\tappGlobal.scene.add(this.offset);\n\t\t\tthis.offset.add(this.planetRot)\n\t\t\tthis.planetRot.add(this.rot, this.cyl);\n\t\t\tthis.rot.add(this.mesh);\n\t\t}\n\t\t\n\t\t//this.scale = OBJ.scale;\n\t\tthis.rot.rotation.y = Math.PI *.5;\n\t\tthis.cyl.rotation.y = Math.PI *.5;\n\t\tthis.cyl.position.y = ((OBJ.scale*sizeMult)+OBJ.scale)/2;\n\t\tthis.rot.position.y = OBJ.scale*sizeMult;\n\t\tthis.planetRot.rotation.x=OBJ.rotation.x;\n\t\tthis.planetRot.rotation.y=OBJ.rotation.y;\n\t\tthis.planetRot.rotation.z=OBJ.rotation.z;\n\t\tthis.offset.position.copy(OBJ.position);\n\t\t\n\t\tconst globalPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.mesh.getWorldPosition(globalPos)\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( globalPos, this.radius );\n\t\tthis.offset.lookAt(OBJ.lookPosition);\n\t\tthis.index = OBJ.index;\n\t\tthis.killed = OBJ.killed;\n\t\t\n\t}\n\n\tupdate(){\n\t\tif(!this.killed){\n\t\t\tthis.mesh.rotation.y += -appGlobal.deltaTime*1.3;\n\t\t\tthis.handleCollision();\n\t\t}\n\t}\n\n\n  \tkill(){\n  \t\tif(!this.killed){\n\t  \t\tthis.killed = true;\n\t  \t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\tthis.cyl.geometry.dispose();\n\t\t\tthis.cyl.material.dispose();\n\t\t\tthis.rot.remove(this.mesh, this.cyl)\n\t\t\tthis.planetRot.remove(this.rot );\n\t\t\tthis.offset.remove(this.planetRot);\n\t\t\tappGlobal.scene.remove(this.offset);\n\t\t}\n  \t}\n\n  \tpickUp(){\n  \t\tthis.kill();\n  \t\tappGlobal.itemsPickedUp++;\n  \t\tappGlobal.soundHandler.playSoundByName({name:\"health\",dist:1});\n  \t\tif(window.socket != null){\n\t  \t\tsocket.emit('getItem', { \n\t  \t\t\tindex:this.index, \n\t  \t\t\tid:appGlobal.localPlayer.id, \n\t  \t\t\tsound:\"health\", \n\t  \t\t\tposition:this.offset.position \n\t  \t\t});\n  \t\t}else{\n  \t\t\tappGlobal.localPlayer.healBots({health:25})\n  \t\t}\n  // \t\tsocket.emit('playSoundAtPosition', {\n\t\t// \t  id: appGlobal.localPlayer.id,\n\t\t// \t  sound:\"health\",\n\t\t// \t  position:this.offset.position\n\t\t// });\n  \t}\n\n  \thandleCollision(){\n  \t\t\n  \t\tif(appGlobal.localPlayer != null){\n\n\t\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.start);\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.end);\n\t\t\t\n\t\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = vector.addVectors(start, end).multiplyScalar( 0.5 );\n\t\t\tconst playerRadius = appGlobal.localPlayer.playerCollider.radius;\n\t\t\tconst r = playerRadius + this.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tfor ( const point of [ start, end, center ] ) {\n\n\t\t\t\tconst d2 = point.distanceToSquared( this.collider.center );\n\n\t\t\t\tif ( d2 < r2 && appGlobal.localPlayer.life < 100 ) {\n\t\t\t\t\t//appGlobal.localPlayer.heal();\n\t\t\t\t\tthis.pickUp();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t\t\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Item.js?");

/***/ }),

/***/ "./src/ItemHandler.js":
/*!****************************!*\
  !*** ./src/ItemHandler.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ItemHandler\": () => (/* binding */ ItemHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Item_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Item.js */ \"./src/Item.js\");\n\n\n\n\nclass ItemHandler {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor() {\n\t\tthis.arr=[];\n\t\t\n\t}\n\t\n\tupdate(){\n\t\tfor ( let i = 0; i < appGlobal.STEPS_PER_FRAME; i ++ ) {\n\t\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\t\tthis.arr[i].update();\t\n\t\t\t}\n\t\t}\n\t}\n\n\treset(){\n\t\tconst amt = appGlobal.serverItemArr.length;\n\t\tfor(let i = 0; i<amt; i++){\n\t\t\tconst w = appGlobal.worlds[Math.floor(appGlobal.random()*appGlobal.worlds.length)];\n\t\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(w.worldPosition);\n\t\t\t\n\t\t\tconst rot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set(appGlobal.random()*(Math.PI*2),appGlobal.random()*(Math.PI*2),appGlobal.random()*(Math.PI*2));\n\t\t\tconst scl = w.scale;\n\t\t\tconst szeMult = appGlobal.random();\n\t\t\tconst item = new _Item_js__WEBPACK_IMPORTED_MODULE_1__.Item({ \n\t\t\t\tposition : pos, \n\t\t\t\tindex:i, \n\t\t\t\tlookPosition:w.worldPosition, \n\t\t\t\tkilled:appGlobal.serverItemArr[i].killed, \n\t\t\t\trotation:rot, \n\t\t\t\tscale:scl,\n\t\t\t\tsizeMult:szeMult\n\t\t\t})\n\t\t\tthis.arr.push(item);\n\n\t\t}\n\t}\n\n\tresetBots(){\n\t\tconst arr = [];\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tarr.push(this.arr[i]);\n\t\t\tthis.arr[i].kill();\t\n\t\t}\n\t\tthis.arr = [];\n\t\tfor(let i = 0; i<arr.length; i++){\n\n\t\t\tconst item = new _Item_js__WEBPACK_IMPORTED_MODULE_1__.Item(arr[i].obj)\n\t\t\tthis.arr.push(item);\n\t\t}\n\t}\n\n\tkill(){\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].kill();\t\n\t\t}\n\t\tthis.arr = [];\n\t}\n\tkillItem(index){\n\t\tthis.arr[index].kill();\n\t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/ItemHandler.js?");

/***/ }),

/***/ "./src/JumpPad.js":
/*!************************!*\
  !*** ./src/JumpPad.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"JumpPad\": () => (/* binding */ JumpPad)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/utils/SkeletonUtils.js */ \"./src/scripts/jsm/utils/SkeletonUtils.js\");\n\n\n\n\nclass JumpPad {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\t\tconst self = this;\n\t\tthis.killed = false;\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), 1.5 );\n\t\t\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 3, 3, 2, 12 );\n\t\tconst material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {color: 0x00ff00} );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\t\t\n\t\tthis.look = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.mesh.rotation.x+=Math.PI/2\n\t\tthis.look.add(this.mesh);\n\t\tthis.holder.add(this.look);\n\t\tthis.collider.center.copy(OBJ.position);\n\t\tthis.holder.position.copy(this.collider.center);\n\t\t\n\t\tthis.look.lookAt(OBJ.worldPosition);\n\t\tappGlobal.scene.add(this.holder); \n\t\tthis.grav = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.collider.center).sub(OBJ.worldPosition).normalize();\n\t\t\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 5000);\n\t\tthis.isJumping = false;\n\t}\n\n\tupdate(){\n\t\tthis.playerSphereCollision();\n\t\tif(window.socket == null ){\n\t\t\tthis.botsCollision();\n\t\t}\n\t}\n\n\tbotsCollision(){\n\t\tfor (let i = 0;i<appGlobal.remotePlayers.length; i++){\n\t\t\t\n\t\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tappGlobal.remotePlayers[i].remotePlayer.start.getWorldPosition(start);\n\t\t\tappGlobal.remotePlayers[i].remotePlayer.end.getWorldPosition(end);\n\t\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = vector.addVectors(start, end).multiplyScalar( 0.5 );\n\n\t\t\tconst playerRadius = appGlobal.remotePlayers[i].remotePlayer.radius*4;\n\t\t\tconst r = playerRadius + this.collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tfor ( const point of [ start ] ) {\n\n\t\t\t\tconst d2 = point.distanceToSquared( this.collider.center );\n\n\t\t\t\tif ( d2 < r2 ) {\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.doJumpPad(this.grav);\n\t\t\t\t}\n\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t}\n\n\tplayerSphereCollision() {\n\t\n\t\tif(appGlobal.localPlayer != null){\n\n\t\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.start);\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.end);\n\t\t\t\n\t\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = vector.addVectors(start, end).multiplyScalar( 0.5 );\n\n\t\t\tconst playerRadius = appGlobal.localPlayer.playerCollider.radius*2;\n\t\t\tconst r = playerRadius + this.collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tfor ( const point of [ start ] ) {\n\t\t\t\tconst d2 = point.distanceToSquared( this.collider.center );\n\t\t\t\tif ( d2 < r2 ) {\n\t\t\t\t\tthis.initPlayerJump();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tinitPlayerJump(){\n\t\tconst self = this;\n\t\tappGlobal.localPlayer.doJumpPad(this.grav);\n\t\t// if(!this.isJumping){\n\t\t// \tthis.isJumping = true;\n\t\t// \tconst aniHolder = {maxSpeed:120}\n\t\t// \tappGlobal.localPlayer.maxSpeed=aniHolder.maxSpeed;\n\t\t\t\n\t\t// \tconst toNewWorld = new Vector3().copy(self.grav).multiplyScalar(300);\n\t\t\t\n\t\t// \tappGlobal.localPlayer.playerVelocity.add( toNewWorld );\n\t\t\t\n\t\t// \tgsap.to(aniHolder,{duration:.7, maxSpeed:40, ease: \"none\", delay:0, oncomplete:function(){ self.isJumping = false; }, onUpdate:function(){   \n\t\t// \t\tif(appGlobal.localPlayer != null && !self.killed){\n\t\t// \t\t\tappGlobal.localPlayer.maxSpeed = aniHolder.maxSpeed;\n\t\t// \t\t}\n\t\t// \t}});\n\t\t// }\n\n\n\t}\n\n\n\n  \tkill(){\n  \t\tif(appGlobal.localPlayer!=null){\n  \t\t\tappGlobal.localPlayer.maxSpeed=40;\n  \t\t}\n  \t\tthis.killed = true;\n  \t\tthis.mesh.geometry.dispose();\n  \t\tthis.mesh.material.dispose();\n  \t\tthis.holder.remove(this.mesh);\n  \t\tappGlobal.scene.remove(this.holder);\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/JumpPad.js?");

/***/ }),

/***/ "./src/ParallaxGUI.js":
/*!****************************!*\
  !*** ./src/ParallaxGUI.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ParallaxGUI\": () => (/* binding */ ParallaxGUI)\n/* harmony export */ });\n\r\nclass ParallaxGUI {\r\n\r\n\tconstructor() {\r\n\r\n\t\tconst self = this;\r\n\t\tthis.targX = 0;\r\n\t\tthis.targY = 0;\r\n\t\tthis.x = 0; \r\n\t\tthis.y = 0;\r\n\t\t\r\n\t}\r\n\tupdateMouseMove(event){\r\n\t\tthis.targX = ((window.innerWidth/2-event.pageX)  *.0002 )*-1;\r\n\t\tthis.targY = ((window.innerHeight/2-event.pageY) *.0002)*-1;\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tthis.x += (this.targX-this.x)*(appGlobal.deltaTime*30);\r\n\t\tthis.y += (this.targY-this.y)*(appGlobal.deltaTime*30);\r\n\t\tthis.parallaxIt(\"title\", 160);\r\n\t\tthis.parallaxIt(\"planet-switching-select-title\", 160);\r\n\t\tthis.parallaxIt(\"class-select-title\", 160);\r\n\t\t//this.parallaxIt(\"instructions\", 60);\r\n\t\tthis.parallaxIt(\"all-classes\", 120);\r\n\t\tthis.parallaxIt(\"player-select-character\", 120);\r\n\t\tthis.parallaxIt(\"movement-select-holder\", 120);\r\n\t\tthis.parallaxIt(\"play-holder\", 60);\r\n\t\tthis.parallaxIt(\"player-skins\", 120);\r\n\t}\r\n\r\n\tkill(){\r\n\t\t\r\n\t}\r\n\r\n\r\n\tparallaxIt(target, movement) {\r\n\t\tdocument.getElementById(target).style.transform = \"translate(\"+this.x*movement+\"px, \"+this.y*movement+\"px)\";\t\t\r\n\t}\r\n\t\r\n};\r\n\r\n\t\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/ParallaxGUI.js?");

/***/ }),

/***/ "./src/Particle.js":
/*!*************************!*\
  !*** ./src/Particle.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Particle\": () => (/* binding */ Particle)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\nclass Particle {\n\t\n\tconstructor(OBJ) {\n\n\t\tthis.mesh;   \n\t\tlet geometry;\n\t    let material;\n\n\t    switch(OBJ.mesh){\n\t        case \"box\":\n\t            geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1, 1, 1 );\n\t            material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {color:OBJ.col} );\n\t            this.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\t        break;\n\t        case \"sphere\":\n\t            geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 2, 8, 8 );\n\t            material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {color:OBJ.col} );\n\t            //material.color = new THREE.Color( 1, 0, 0 );\n\t            this.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\t        break;\n\t    }\n\t    \n\t    appGlobal.scene.add(this.mesh);\n\t   \n\t    this.pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.pos);\n\t    const rndPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t    rndPos.x = -.5+Math.random();//(-OBJ.rndPos*.5)+(Math.random()*OBJ.rndPos);\n\t    rndPos.y = -.5+Math.random();//(-OBJ.rndPos*.5)+(Math.random()*OBJ.rndPos);\n\t    rndPos.z = -.5+Math.random();//(-OBJ.rndPos*.5)+(Math.random()*OBJ.rndPos);\n\t    rndPos.multiplyScalar(OBJ.rndPos);\n\t    this.mesh.position.copy(this.pos).add(rndPos);\n\t    \n\t    const rndRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t    rndRot.x = (-OBJ.rndRot*.5)+(Math.random()*OBJ.rndRot);\n\t    rndRot.y = (-OBJ.rndRot*.5)+(Math.random()*OBJ.rndRot);\n\t    rndRot.z = (-OBJ.rndRot*.5)+(Math.random()*OBJ.rndRot);\n\t    \n\t    const rot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().add(rndRot);\n\t    this.mesh.rotation.set(rot.x, rot.y, rot.z);\n\n\t    this.scl = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t    var rndScl = (-OBJ.rndScl*.5)+(Math.random()*OBJ.rndScl);\n\t    this.scl.x = OBJ.scl+rndScl;\n\t    this.scl.y = OBJ.scl+rndScl;\n\t    this.scl.z = OBJ.scl+rndScl;\n\n\t    this.mesh.scale.copy(this.scl);\n\t    // this.mesh.scale.copy(this.scl);//.x;\n\t    // //this.mesh.scale.y = this.scl.y;\n\t    // //this.mesh.scale.z = this.scl.z;\n\t    \n\t    const rr = OBJ.velPosRnd;\n\t\tconst rx = ((-rr*.5)+Math.random()*rr);\n\t\tconst ry = ((-rr*.5)+Math.random()*rr);\n\t\tconst rz = ((-rr*.5)+Math.random()*rr);\n\t\tconst rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t//return new Vector3().copy(this.obj.pos).sub(new Vector3()).normalize().add(rnd).multiplyScalar(this.obj.velPosScale);\n\t\t\n\t\tconst vel = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.mesh.position).sub(new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())()).normalize().add(rnd).multiplyScalar(OBJ.velPosScale)\n\t\t\t\n\t    this.velPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(vel);//, OBJ.velPos.y, OBJ.velPos.z);\n\n\t    const velRotRnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t    velRotRnd.x = ((-OBJ.velRot*.5)+Math.random()*OBJ.velRot);\n\t    velRotRnd.y = ((-OBJ.velRot*.5)+Math.random()*OBJ.velRot);\n\t    velRotRnd.z = ((-OBJ.velRot*.5)+Math.random()*OBJ.velRot);\n\t    this.velRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(velRotRnd);//.x, OBJ.velRot.y, OBJ.velRot.z);\n\t    this.velScl = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set(OBJ.velScl,OBJ.velScl,OBJ.velScl);//.x, OBJ.velScl.y, OBJ.velScl.z);\n\t  \tthis.shoulLookAt = OBJ.lookAt;\n\t  \tthis.lookAtScaleMult = OBJ.lookAtLength;\n\n\t\tthis.killed = false;\n\t    const self = this;\n\t    \n\t\tsetTimeout(function(){\n\t\t\tself.kill();\n\t\t}, OBJ.killTimeout)\n\t\t\n\t}\n\t\n\tupdate(){\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tthis.mesh.position.addScaledVector( this.velPos, window.appGlobal.deltaTime );\n\t\t\t\n\t\t\tif(!this.shoulLookAt){\n\t\t\t\tthis.mesh.rotateX( this.velRot.x );\n\t\t\t\tthis.mesh.rotateY( this.velRot.y );\n\t\t\t\tthis.mesh.rotateZ( this.velRot.z );\n\t\t\t}\n\n\t\t\tthis.scl.addScaledVector( this.velScl, window.appGlobal.deltaTime );\n\n\t\t\tif(this.scl.x<0.001){\n\t\t\t    this.scl.x = 0.001;\n\t\t\t}\n\t\t\tif(this.scl.y<0.001){\n\t\t\t    this.scl.y = 0.001;\n\t\t\t}\n\t\t\tif(this.scl.z<0.001){\n\t\t\t    this.scl.z = 0.001;\n\t\t\t}\n\t\t\t\n\t\t\tthis.mesh.scale.copy(this.scl);\n\n\t\t\tif(this.shoulLookAt){\n\t\t\t\tthis.mesh.lookAt(this.pos);\n\t\t\t\t//this.mesh.scale.z = this.scl.y*this.lookAtScaleMult;\n\t\t\t\tthis.mesh.scale.z = this.scl.y*this.lookAtScaleMult;\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\n\tkill(){\n\t\tif(!this.killed){\n\t\t\tthis.killed = true;\n\t\t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\tappGlobal.scene.remove(this.mesh);\n\t\t}\n\t}\n\n\t\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Particle.js?");

/***/ }),

/***/ "./src/ParticleEmitter.js":
/*!********************************!*\
  !*** ./src/ParticleEmitter.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ParticleEmitter\": () => (/* binding */ ParticleEmitter)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Particle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Particle.js */ \"./src/Particle.js\");\n\n\n\n\nclass ParticleEmitter {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\n\t\tthis.arrFull = false;\n\t\tthis.index = 0;\n\t\tthis.arr = [];\n\t\tthis.max = OBJ.amount;\n\t\tthis.burst = OBJ.burst;\n\t\tthis.obj = OBJ;\n\t    //this.mesh = MESH;\n\n\t}\n\t\n\tupdate(){\n\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].update();\t\n\t\t}\n\t}\n\n\temit(){\n        if(this.burst){\n        \tfor(let i = 0; i < this.max; i++){\n\t\t\t\tthis.arr.push(new _Particle_js__WEBPACK_IMPORTED_MODULE_1__.Particle(this.obj));\n\t\t\t}\n        }else{\n        \t\n        \tif(this.arrFull){\n\t            this.arr[this.index].kill();\t\n\t        }\n\t        \n\t        this.arr[this.index] = new _Particle_js__WEBPACK_IMPORTED_MODULE_1__.Particle(this.obj);\n\t        this.index++;\n\n\t        if(this.index == this.max){\n\t            this.index=0;\n\t            this.arrFull = true;\t\n\t        }\n        }\n\t}\n\n\n\tkill(){\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].kill();\t\n\t\t}\n\t\tthis.arr = [];\n        this.index=0;\n        this.arrFull = false;\t\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/ParticleEmitter.js?");

/***/ }),

/***/ "./src/Player.js":
/*!***********************!*\
  !*** ./src/Player.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Player\": () => (/* binding */ Player)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_math_Capsule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/math/Capsule.js */ \"./src/scripts/jsm/math/Capsule.js\");\n/* harmony import */ var _Weapon_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Weapon.js */ \"./src/Weapon.js\");\n/* harmony import */ var _Hud_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Hud.js */ \"./src/Hud.js\");\n/* harmony import */ var _scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scripts/jsm/utils/SkeletonUtils.js */ \"./src/scripts/jsm/utils/SkeletonUtils.js\");\n/* harmony import */ var _FPSAni_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FPSAni.js */ \"./src/FPSAni.js\");\n/* harmony import */ var _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CharacterAnimationHandler.js */ \"./src/CharacterAnimationHandler.js\");\n\n\n\n\n\n\n\n\nclass Player {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\t\tconst self = this;\n\t\tthis.hud = new _Hud_js__WEBPACK_IMPORTED_MODULE_3__.Hud();\n\t\tthis.state = \"alive\";\n\t\tthis.life = 100;\n\t\tthis.hud.updateHealth(100);\n\t\tthis.hud.updateBoost(1);\n\t\t//this.camera = OBJ.camera;\n\t\tthis.camera = appGlobal.controller.playerCamera;\n\t\tthis.defaultFOV = 90;\n\t\tthis.fovTarg = this.defaultFOV;\n\t\tthis.camera.fov = this.defaultFOV;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\t\n\t\tthis.boostMult = 1;\n\t\tthis.boostMultMax = 1.8;\n\t\tthis.speedMult = .8;\n\t\tthis.dampingMult = 14;\n\t\tthis.ogPlayerHeight = 2;\n\t\tthis.crouching = false;\n\t\tthis.playerHeight = this.ogPlayerHeight;\n\t\tthis.strafeMult = .3;\n\t\tthis.inAirControlMult = .02;\n\n\t\tthis.vector1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.playerDirection = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.playerOnFloor = false;\n\t\tthis.animationOnFloor = false;\n\t\t\n\t\tthis.boostMeter = 1;\n\t\tthis.boosting = false;\n\t\tthis.directionalBoostMult = 0;\n\t\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t//pos.x = -1+Math.random()*2;\n\t\t//pos.y = -1+Math.random()*2;\n\t\t//pos.z = -1+Math.random()*2;\n\t\tpos.y = 1;\n\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(pos);\n\t\tpos.multiplyScalar(appGlobal.worldScale*6);\n\n\t\tthis.grav = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(pos).sub(new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())()).normalize();\n\t\tconst n = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(pos).add( this.grav.multiplyScalar(this.playerHeight) );\n\t\t\n\t\tthis.playerCollider = new _scripts_jsm_math_Capsule_js__WEBPACK_IMPORTED_MODULE_1__.Capsule( pos, n, 1.35 );\n\n\t\tthis.playerVelocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.playerDirection = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tthis.tpsAni;\n\t\tthis.didTpsAni = false;\n\t\tthis.firstLand = false;\n\t\tthis.boostCamDir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tthis.lookAt = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.lookAtRef = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.worldPosEase = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.rotOffset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.xRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(1,2,1);\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:0xff0000});\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\tthis.mesh.visible = false;\n\t\tthis.playerRotationHelper = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(); \n\t\tappGlobal.scene.add(this.lookAt, this.lookAtRef);\n\t\tthis.lookAt.add(this.rotOffset);\n\t\t\n\t\tthis.lookAt.add(this.rotOffset)\n\t\t//this.mesh.position.y-=1.5;\n\t\tthis.mesh.position.z -=5;\n\t\t//this.playerRotationHelper.position.y = -1.5;\n\t\tthis.rotOffset.add(this.xRot);\n\t\tthis.emoteHelper = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.emoteHelper.add(appGlobal.controller.playerCamera);\n\t\tthis.xRot.add(this.emoteHelper);\n\t\t//this.xRot.add(this.mesh);\n\t\tappGlobal.controller.playerCamera.add(this.mesh)\n\t\tthis.xRot.add(this.playerRotationHelper)\n\n\t\tthis.camDist = 5;\n\t\tOBJ.weapon.player = this;\n\t\tthis.weapon = new _Weapon_js__WEBPACK_IMPORTED_MODULE_2__.Weapon(OBJ.weapon);\n\t\t//this.ability = new OBJ.weapon.abilities.class(OBJ.weapon.ability);\n\t\tthis.abilities = [];\n\t\tfor(let i = 0; i<OBJ.weapon.abilities.length; i++){\n\t\t\tthis.abilities.push(new OBJ.weapon.abilities[i].class(OBJ.weapon.abilities[i]) );\n\t\t}\n\t\t\n\t\tthis.abilities.push(new OBJ.movement.class(OBJ.movement));\n\n\t\tthis.movementAbilityName = OBJ.movement.name; \n\t\n\t\tthis.fovAni = null;\n\t\tthis.reloadOT = false;\n\t\tthis.adsing = false;\n\t\tthis.remoteQuaternion = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.canBoost = false;\n\t\tthis.boostButtonDown = false;\n\t\t//this.straffing = false;\n\t\t//this.movingForward = false;\n\t\tthis.axisY = 0;\n\t\tthis.axisX = 0;\n\t\tthis.keys = {\n\t\t\tA:false,\n\t\t\tD:false,\n\t\t\tW:false,\n\t\t\tS:false\n\t\t}\n\n\t\tthis.abilityMult = 1;\n\t\tthis.id = OBJ.id;//socket.id;\n\t\t//console.log(this.id)\n\t\tthis.jumpCount = 0;\n\t\tthis.canDoubleJump = false;\n\t\tthis.releasedSpaceBarAfterJump = false;\n\t\tthis.canBlink = false;\n\t\tthis.blinking = false;\n\t\tthis.blinkTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\n\t\tthis.animationObject = { \n\t\t\tyAxis:0, \n\t\t\txAxis:0, \n\t\t\tjump:true,\n\t\t\tboost:false,\n\t\t\tadsing:false,\n\t\t}\n\t\tif(this.emoting){\n\t\t\tthis.cah.handleAnimationEasing(0,this.animationObject);\n\t\t}\n\t\t//this.gravRotationEase = .005;\n\t\tthis.gravRotationEase = .005;\n\t\tthis.abilityCanShoot = true;\n\t\tthis.hitWorldWhenNotChecking = false;\n\n\t\tthis.character = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_4__.clone)( self.getModelByName(\"body-\"+OBJ.weapon.model).scene );\n\t\tlet move = \"boost\";\n\t\tif(OBJ.movement.name == \"directional boost\"){\n\t\t\tmove = \"directional\";\n\t\t}else if(OBJ.movement.name == \"teleport\"){\n\t\t\tmove = \"teleport\";\n\t\t}\n\t\tthis.movement  = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_4__.clone)( self.getModelByName(OBJ.weapon.model+\"-\"+move).scene );\n\n\t\tconst arr = [this.character, this.movement];\n\t\tthis.cah = new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_6__.CharacterAnimationHandler({meshes:arr, animations:appGlobal.loadObjs[0].model.animations, name:OBJ.weapon.model});\n\t\tthis.cah.initAnimation();\n\n\t\tlet name = \"tip-\" + OBJ.weapon.model;\n\t\tthis.tipObject = this.character.getObjectByName(name);\n\t\tthis.tipObject.visible = false;\n\n\t\tthis.boostTip;\n\t\t// this.boostTexture = new TextureLoader().load( './assets/textures/boost.png' );\n\t\t// this.boostTexture.wrapS = RepeatWrapping;\n\t\t// this.boostTexture.wrapT =  ClampToEdgeWrapping;\n\t\t// this.boostTexture.magFilter = LinearFilter; \n\n\t\tthis.movement.traverse( function ( obj ) {\n\t\t\tif(obj.name.includes(\"boost-part\")){\n\t\t\t\tobj.visible = false;\n\t\t\t\t// obj.material.transparent = true;\n\t\t\t\t// obj.material.map = self.boostTexture;\n\t\t\t\t// obj.material.emissiveMap = self.boostTexture;\n\t\t\t\t// obj.material.color = new Color(0x000000);\n\t\t\t\t// obj.material.emissive = new Color(0xffbf80);\n\t\t\t\t// self.boostTip = obj;\n\t\t\t}\n\t\t});\n\n\t\tthis.characterHolder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.xRot.add(this.characterHolder);\n\t\tthis.characterHolder.add(this.character, this.movement);\n\t\tconst s = 3.25;\n\t\tthis.characterHolder.position.z = -.2;\n\t\tthis.characterHolder.scale.set(s,s,s);\n\t\tthis.characterHolder.position.y = -3.25;\n\t\tthis.characterHolder.rotation.y += Math.PI;\n\n\t\tthis.character.visible = this.movement.visible = false;\n\t\tconst skin =  appGlobal.skinsHandler.getCurrentSkinOnCharacter(OBJ.weapon.model);\n\t\tappGlobal.skinsHandler.changeSwatchOnMesh({meshes:[this.character, this.movement], name:OBJ.weapon.model}, skin);\n\n\t\tthis.fps = new _FPSAni_js__WEBPACK_IMPORTED_MODULE_5__.FPSAni({model:OBJ.weapon.model, name:OBJ.weapon.name, player:this});\n\t\tthis.adsMouseSenseMultTarg = 0;\n\t\tthis.adsMouseSenseMult = 0;\n\n\t\tthis.canDoWalkSound = true;\n\t\tthis.currStep = 0;\n\t\tthis.stepsTimeout;\n\t\tthis.ability1KeyDownOT = false;\n\t\tthis.ability2KeyDownOT = false;\n\t\t\n\t\tappGlobal.world = this.getClosestWorld();\n\n\t\tthis.maxSpeed = 40;\n\t\tthis.isDoingJumpPad = false;\n\t\tthis.jumpPadTween = null;\n\n\t\tthis.emoting = false;\n\t\n\t}\n\n\tgetModelByName(NAME){\n\t\tfor(let i = 0; i<appGlobal.loadObjs.length;i++){\n\t\t\tif(appGlobal.loadObjs[i].name==NAME)\n\t\t\t\treturn appGlobal.loadObjs[i].model;\t\n\t\t}\n\t}\n\n\tdoJumpPad(grav){\n\t\tif(!this.isDoingJumpPad){\n\t\t\tconst self = this;\n\t\t\tthis.isDoingJumpPad = true;\n\t\t\tthis.maxSpeed = 120;\n\t\t\t\n\t\t\tconst toNewWorld = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(grav).multiplyScalar(300);\n\t\t\t\n\t\t\tthis.playerVelocity.add( toNewWorld );\n\t\t\t\n\t\t\tif(this.jumpPadTween != null){\n\t\t\t\tthis.jumpPadTween.kill();\n\t\t\t}\n\t\t\t\n\t\t\tthis.jumpPadTween = gsap.to(this,{duration:.5, maxSpeed:40, ease: \"none\", delay:0, oncomplete:function(){ self.isDoingJumpPad = false; }, onUpdate:function(){}});\n\n\t\t}\n\n\t}\n\t\n\tupdate(){\n\t\tthis.updateNonLooped();\n\t\tfor ( let i = 0; i < appGlobal.STEPS_PER_FRAME; i ++ ) {\n\t\t\tthis.updateLooped();\n\t\t\t//updateSpheres( appGlobal.deltaTime );\n\t\t}\n\t}\n\tupdateLooped(){\n\t\tswitch(this.state){\n\t\t\tcase \"alive\":\n\t\t\t\tthis.updateControls();\n\t\t\t\tthis.updatePlayerPositionAndRotation();\n\t\t\t\tthis.weapon.update();\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tthis.abilities[i].updateLooped();\t\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"dead\":\n\t\t\tbreak;\n\t\t}\n\n\t}\n\tupdateNonLooped(){\n\t\tthis.updateFOV();\n\t\tthis.fps.update();\n\n\t\tthis.animationObject = {\n\t\t\tyAxis:this.axisY, \n\t\t\txAxis:this.axisX,\n\t\t\tjump:!this.animationOnFloor,\n\t\t\tboost:this.boosting,\n\t\t\tadsing:this.adsing\n\t\t}\n\n\t\tthis.cah.update();\n\t\tthis.cah.handleAnimationEasing(0,this.animationObject);\n\t\t\n\t\tswitch(this.state){\n\t\t\tcase \"alive\":\n\t\t\t\t//this.updateOutline();\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tthis.abilities[i].update();\t\n\t\t\t\t}\n\t\t\t\tthis.handleBoost();\n\t\t\t\tthis.handleADSModify();\n\t\t\tbreak;\n\t\t\tcase \"dead\":\n\t\t\tbreak;\n\t\t}\n\n\t\tconst moving = (Math.abs(this.axisX) > 0 || Math.abs(this.axisY)>0); \n\t\tif(moving && this.playerOnFloor){\n\t\t\t//this.playerMovingForWalkSound = true;\n\t\t\tif(this.canDoWalkSound){\n\t\t\t\tthis.initWalkSound();\n\t\t\t}\n\t\t}\n\t\t\n\n\t}\n\n\tupdateFOV(){\n\t\tthis.camera.fov += (this.fovTarg - this.camera.fov) * (appGlobal.deltaTime*120);\n\t\tthis.camera.updateProjectionMatrix();\n\t}\n\n\tinitWalkSound(){\n\t\t\n\t\tthis.canDoWalkSound = false;\n\t\tthis.currStep ++;\n\t\tthis.currStep = this.currStep % 2;\n\t\tappGlobal.soundHandler.playSoundByName({name:\"step-\"+this.currStep, dist:.7});\n\t\t\n\t\tif(this.stepsTimeout != null){\n\t\t\tclearInterval(this.stepsTimeout);\n\t\t}\n\t\t\n\t\tconst self = this;\n\t\tthis.stepsTimeout = setInterval(function(){\n\t\t\tself.canDoWalkSound = true;\n\t\t},330);\n\t}\n\n\thandleADSModify(){\n\t\tif(this.adsing){\n\t\t\tthis.adsMouseSenseMultTarg = 1.0;\n\t\t}else{\n\t\t\tthis.adsMouseSenseMultTarg = 0.0;\n\t\t}\n\t\tthis.adsMouseSenseMult += (this.adsMouseSenseMultTarg - this.adsMouseSenseMult)*(appGlobal.deltaTime*200);\n\t}\n\t\n\treceiveDamage(OBJ){\n\n\t\tappGlobal.soundHandler.playSoundByName({name:\"dmg\", dist:1});\n\t\tconst camForward =  new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.getCameraForwardVector());\n\t\tconst attacker = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.position).sub(this.playerCollider.end).normalize();\n\t\t\n\t\tconst q1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,1), camForward );\n\t\tconst q2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,1), attacker );\n\t\t\n\t\tconst v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromQuaternion (q1);\n\t\tconst v2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromQuaternion (q2);\t\n\t\t\n\t\tconst angle = ((v2.x-v1.x)+Math.PI)*-1;\n\t\t\n\t\tthis.hud.doIncomingDamageMarker( angle );\n\n\t\tthis.life = OBJ.health;\n\t\tthis.hud.updateHealth(this.life);\n\t\tif(this.life <=0 ){\n\t\t\tthis.kill();\n\t\t}\n\t}\n\treceiveDamageBots(OBJ){\n\t\t\n\t\tappGlobal.soundHandler.playSoundByName({name:\"dmg\", dist:1});\n\t\tconst camForward =  new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.getCameraForwardVector());\n\t\tconst attacker = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.position).sub(this.playerCollider.end).normalize();\n\t\t\n\t\tconst q1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,1), camForward );\n\t\tconst q2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,1), attacker );\n\t\t\n\t\tconst v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromQuaternion (q1);\n\t\tconst v2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromQuaternion (q2);\t\n\t\t\n\t\tconst angle = ((v2.x-v1.x)+Math.PI)*-1;\n\t\t\n\t\tthis.hud.doIncomingDamageMarker( angle );\n\t\t\n\t\tthis.life -= OBJ.health;\n\t\tthis.hud.updateHealth(this.life);\n\t\tif(this.life <=0 ){\n\t\t\tthis.kill();\n\t\t}\n\t}\n\n\theal(OBJ){\n\t\tthis.life = OBJ.health;\n\t\t//if(this.life>100)\n\t\t\t//this.life = 100;\n\t\tthis.hud.updateHealth(this.life);\n\t}\n\thealBots(OBJ){\n\t\tthis.life += OBJ.health;\n\t\tif(this.life>100)\n\t\t\tthis.life = 100;\n\t\tthis.hud.updateHealth(this.life);\n\t}\n\n\tkill() {\n\t\tif(this.state == \"alive\"){\n\t\t\t\n\t\t\tthis.state = \"dead\";\n\t\t\t\n\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\tthis.abilities[i].kill();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.fps.kill();\n\t\t\tappGlobal.playing = false;\n\t\t\t\n\t\t\tif(window.socket!=null){\n\t\t\t\tappGlobal.globalHelperFunctions.playerReset(socket.id, true);\n\t\t\t}else{\n\t\t\t\tappGlobal.globalHelperFunctions.playerReset(this.id, true);\n\t\t\t}\n\n\t\t\tif(this.stepsTimeout != null){\n\t\t\t\tclearInterval(this.stepsTimeout);\n\t\t\t}\n\t\t\tthis.canDoWalkSound = false;\n\t\t}\n\t}\n\n\tdoTPSAni(doTPS){\n\t\t// if(this.tpsAni!=null){\n\t\t// \tthis.tpsAni.kill();\n\t\t// }\n\n\t\tif(doTPS){\n\n\t\t\t//this.mesh.visible = true;\n\t\t\t//this.adsing = false;\n\t\t\t//this.tpsAni = gsap.to(this,{duration:.3, camDist:5, ease: \"circ.out()\", delay:0});\n\t\t\t// if(this.fovAni!=null){\n\t\t\t// \tthis.fovAni.kill();\n\t\t\t// }\n\t\t\t// const self = this;\n\t\t\t// this.fovAni = gsap.to(this.camera,{duration:.3, fov:120, ease: \"circ.out()\", delay:0, onUpdate:function(){\n\t\t\t// \tself.camera.updateProjectionMatrix();\n\t\t\t// }});\n\n\t\t\tthis.fovTarg = 120;\n\n\t\t}else{\n\n\t\t\t//this.mesh.visible = false;\n\t\t\t//this.tpsAni = gsap.to(this,{duration:.6, camDist:0, ease: \"circ.out()\", delay:0});\n\t\t\t// if(this.fovAni!=null){\n\t\t\t// \tthis.fovAni.kill();\n\t\t\t// }\n\t\t\t// const self = this;\n\t\t\t// this.fovAni = gsap.to(this.camera,{duration:.6, fov:this.defaultFOV, ease: \"circ.out()\", delay:0, onUpdate:function(){\n\t\t\t// \tself.camera.updateProjectionMatrix();\n\t\t\t// }});\n\t\t\tthis.fovTarg = this.defaultFOV;\n\t\t}\n\t}\n\n\tknockPlayer(OBJ){\n\t\tconst dist = Math.abs(new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.playerCollider.start).distanceTo(OBJ.pos));\n\t\t\n\t\tif(dist<OBJ.distance){\n\t\t\tconst s = (OBJ.distance-dist)/OBJ.distance;\n\t\t\t//const center = this.vector1.addVectors( this.playerCollider.start, this.playerCollider.end ).multiplyScalar( 0.5 );\n\t\t\tconst disp = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.playerCollider.start).sub(OBJ.pos).add(this.grav.multiplyScalar(OBJ.gravMult)).normalize().multiplyScalar(s*OBJ.strength);\n\t\t\tthis.playerVelocity.add( disp );\n\t\t\tthis.playerOnFloor = false;\n\t\t}\n\t}\n\n\thandleKeyUp(key){\n\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\tthis.abilities[i].handleKeyUp(key);\t\n\t\t}\n\t\tif(key==\"KeyA\"){\n\t\t\tif(!this.keys.D){\n\t\t\t\tthis.axisX = 0;\n\t\t\t}else{\n\t\t\t\tthis.axisX = 1;\n\t\t\t}\n\t\t\tthis.keys.A = false;\t\n\t\t}\n\t\t\n\t\tif(key==\"KeyD\"){\n\t\t\tif(!this.keys.A){\n\t\t\t\tthis.axisX = 0;\n\t\t\t}else{\n\t\t\t\tthis.axisX = -1;\n\t\t\t}\n\t\t\tthis.keys.D = false;\n\t\t}\n\t\t\n\t\tif(key==\"KeyW\"){\n\t\t\tif(!this.keys.S){\n\t\t\t\tthis.axisY = 0;\n\t\t\t}else{\n\t\t\t\tthis.axisY = -1;\n\t\t\t}\n\t\t\tthis.keys.W = false;\n\t\t}\t\n\t\t\n\t\tif(key==\"KeyS\"){\n\t\t\tif(!this.keys.W){\n\t\t\t\tthis.axisY = 0;\n\t\t\t}else{\n\t\t\t\tthis.axisY = 1;\n\t\t\t}\n\t\t\tthis.keys.S = false;\n\t\t}\n\t\t\n\t\tif ( key == 'KeyR' ) {\n\t\t\tthis.reloadOT = false;\n\t\t}\n\n\t\tif ( key == 'Space' ) {\n\t\t\tif(this.canDoubleJump && !this.releasedSpaceBarAfterJump){\n\t\t\t\tthis.releasedSpaceBarAfterJump = true;\n\t\t\t}\n\t\t}\n\n\t\t// if(key==\"ControlLeft\"){\n\t\t// \tthis.crouching = false;\n\t\t// \tthis.playerHeight = this.ogPlayerHeight;\n\t\t// }\n\n\t}\n\t\n\thandleGamePad(OBJ){\n\n\t\tthis.axisX = OBJ.xaxis;\n\t\tthis.axisY = OBJ.yaxis*-1;\n\n\t\tthis.updateCameraRotation({mx:OBJ.mx*4, my:OBJ.my*4});\n\t\t\n\t\tif(OBJ.ability1){\n\t\t\tif(!this.ability1KeyDownOT){\n\t\t\t\tconst key = \"KeyE\"\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tthis.abilities[i].handleKeyDown(key);\n\t\t\t\t}\n\t\t\t\tthis.ability1KeyDownOT = true;\n\t\t\t}\n\t\t}else{\n\t\t\tconst key = \"KeyE\"\n\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\tthis.abilities[i].handleKeyUp(key);\t\n\t\t\t}\n\t\t\tthis.ability1KeyDownOT = false;\n\t\t}\n\n\t\tif(OBJ.ability2){\n\t\t\tif(!this.ability2KeyDownOT){\n\t\t\t\n\t\t\t\tconst key = \"KeyQ\"\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tthis.abilities[i].handleKeyDown(key);\t\n\t\t\t\t}\n\t\t\t\tthis.ability2KeyDownOT = true;\n\t\t\t}\n\t\t}else{\n\t\t\tconst key = \"KeyQ\"\n\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\tthis.abilities[i].handleKeyUp(key);\t\n\t\t\t}\n\t\t\tthis.ability2KeyDownOT = false;\n\t\t}\n\t\t\n\t\tthis.ads(OBJ.ads);\n\t\tappGlobal.mouse.down = OBJ.shoot;\n\t\t\n\t\tappGlobal.keyStates[ 'KeyW' ] = this.keys.W = OBJ.w;\n\t\tappGlobal.keyStates[ 'KeyS' ] = this.keys.S = OBJ.s;\n\t\tappGlobal.keyStates[ 'KeyA' ] = this.keys.A = OBJ.a;\n\t\tappGlobal.keyStates[ 'KeyD' ] = this.keys.D = OBJ.d;\n\n\t\tappGlobal.keyStates[ 'ShiftLeft' ] = OBJ.boost;\n\t\tif(OBJ.boost){\n\t\t\tthis.handleBlinkKeyPress();\n\t\t}\n\t\tappGlobal.keyStates[ 'Space' ] = OBJ.jump;\n\n\t\tif(OBJ.reload){\n\t\t\tthis.handleReloadKeyPress();\n\t\t}else{\n\t\t\tthis.reloadOT = false;\n\t\t}\n\n\t}\n\n\tkillEmoting(){\n\t\tthis.emoteHelper.rotation.y = 0;\n\t\t\n\t\tif(this.tpsAni!=null){\n\t\t\tthis.tpsAni.kill();\n\t\t}\n\t\tthis.character.visible = this.movement.visible = false;\n\t\tconst self = this;\n\t\tthis.tpsAni = gsap.to(this,{duration:.3, camDist:0, ease: \"circ.out()\", delay:0, onComplete:function(){ \n\t\t\tself.fps.show();\n\t\t\tself.emoting = false; \n\t\t}  });\n\t}\n\n\thandleKeyDown(key){\n\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\tthis.abilities[i].handleKeyDown(key);\t\n\t\t}\n\t\tif(key==\"KeyC\"){\n\t\t\tif(!this.emoting && (this.axisY==0 && this.axisX==0)){\n\t\t\t\tthis.emoting = true;\n\t\t\t\tthis.character.visible = this.movement.visible = true;\n\t\t\t\tif(this.tpsAni!=null){\n\t\t\t\t\tthis.tpsAni.kill();\n\t\t\t\t}\n\t\t\t\tthis.fps.hide();\n\t\t\t\tthis.tpsAni = gsap.to(this,{duration:.3, camDist:6, ease: \"circ.out()\", delay:0});\n\t\t\t\tgsap.to(this.camera.rotation,{duration:.3, x:0, ease: \"circ.out()\", delay:0});\n\t\t\t}else{\n\t\t\t\tthis.killEmoting();\n\t\t\t}\n\t\t}\n\t\tif(key==\"KeyD\"){\n\t\t\tthis.killEmoting();\n\t\t\tthis.axisX = 1;\n\t\t\tthis.keys.D = true;\n\t\t}\n\t\t\n\t\tif(key==\"KeyA\"){\n\t\t\tthis.killEmoting();\n\t\t\tthis.axisX = -1;\n\t\t\tthis.keys.A = true;\n\t\t}\n\t\t\n\t\tif(key==\"KeyW\"){\n\t\t\tthis.killEmoting();\n\t\t\tthis.axisY = 1;\n\t\t\tthis.keys.W = true;\n\t\t}\n\t\t\n\t\tif(key==\"KeyS\"){\n\t\t\tthis.killEmoting();\n\t\t\tthis.axisY = -1;\n\t\t\tthis.keys.S = true;\n\t\t}\n\n\t\tif ( key == 'KeyR') {\n\t\t\tthis.killEmoting();\n\t\t\tthis.handleReloadKeyPress();\n\t\t}\n\t\tif(key == 'ShiftLeft'){\n\t\t\tthis.killEmoting();\n\t\t\tthis.handleBlinkKeyPress();\n\t\t}\n\t}\n\n\n\thandleReloadKeyPress(){\n\t\tif(!this.reloadOT){\n\t\t\tthis.weapon.reload();\n\t\t\tthis.reloadOT = true;\n\t\t}\n\t}\n\n\n\thandleBlinkKeyPress(){\n\t\tif(this.canBlink && !this.boosting && !this.keys.W){\n\t\t\tif( this.keys.A || this.keys.D ){\n\t\t\t\n\t\t\t\tthis.blinkTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().clone(this.playerCollider.end);\n\t\t\t\tthis.blinkTarg.add( this.getSideVector().multiplyScalar((this.axisX*.08)) );\n\t\t\t\tgsap.to(this.blinkTarg, {duration:.5, x:0, y:0, z:0, ease: \"circ.out()\", delay:0});\n\t\t\t\tthis.canBlink = false;\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tif(this.abilities[i].name == \"blink\"){\n\t\t\t\t\t\tthis.abilities[i].confirmAbility();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else if(this.keys.S){\n\t\t\t\tthis.blinkTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().clone(this.playerCollider.end);\n\t\t\t\tthis.blinkTarg.add( this.getForwardVector().multiplyScalar((this.axisY*.08)) );\n\t\t\t\tgsap.to(this.blinkTarg, {duration:.5, x:0, y:0, z:0, ease: \"circ.out()\", delay:0});\n\t\t\t\tthis.canBlink = false;\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tif(this.abilities[i].name == \"blink\"){\n\t\t\t\t\t\tthis.abilities[i].confirmAbility();\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t\n\thandleGetKill(){\n\t\tappGlobal.soundHandler.playSoundByName({name:\"kill-2\", dist:1});\n\t}\n\t\n\n\thandleDoDamage(OBJ){\n\t\tif(OBJ.headShot)\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"dink\", dist:1});\n\t\telse\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"dink-body-3\", dist:1});\n\t\t\n\t\tthis.hud.doDamageMarker(OBJ.headShot);\n\n\t}\n\n\tupdateControls(){\n\t\t\n\t\tthis.playerRotationHelper.getWorldQuaternion(this.remoteQuaternion);\n\t\t\n\t\tif(this.firstLand){\n\t\t\tif ( appGlobal.keyStates[ 'ShiftLeft' ] && appGlobal.keyStates[ 'KeyW' ] && this.canBoost ) {\n\t\t\t\tthis.initBoost();\n\t\t\t}\n\t\t\tif( !appGlobal.keyStates[ 'ShiftLeft' ] || !appGlobal.keyStates[ 'KeyW' ] ){\n\t\t\t\tthis.cancelBoost();\n\t\t\t}\n\t\t\tthis.boostButtonDown = appGlobal.keyStates[ 'ShiftLeft' ] \n\t\t}\t\n\t\tif(!this.canDoubleJump){\n\t\t\tif ( this.playerOnFloor ) {\n\t\t\t\tif ( appGlobal.keyStates[ 'Space' ] ) {\n\t\t\t\t\tthis.playerVelocity.add( this.grav.multiplyScalar(10) );\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif ( this.playerOnFloor ) {\n\t\t\t\tif ( appGlobal.keyStates[ 'Space' ] ) {\n\t\t\t\t\tthis.releasedSpaceBarAfterJump = false;\n\t\t\t\t\tthis.jumpCount ++;\n\t\t\t\t\tthis.playerVelocity.add( this.grav.multiplyScalar(10) );\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif ( appGlobal.keyStates[ 'Space' ] && this.releasedSpaceBarAfterJump && this.jumpCount < 2 ) {\n\t\t\t\t\tthis.playerVelocity.set( 0,0,0 );\n\t\t\t\t\tthis.playerVelocity.add( this.grav.multiplyScalar(10) );\n\t\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\t\tif(this.abilities[i].name == \"double jump\"){\n\t\t\t\t\t\t\tthis.abilities[i].confirmAbility();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.jumpCount ++;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t}\n\t\n\thandleBoost(){\n\n\t\tif(this.boosting){\n\t\t\t\n\t\t\tthis.boostMeter -= (appGlobal.deltaTime*(1.8*this.abilityMult));\n\t\t\n\t\t\tif(this.boostMeter<0){\n\t\t\t\tthis.boostMeter = 0;\n\t\t\t\tthis.boosting = false;\n\t\t\t\tthis.canBoost = false;\n\t\t\t\tthis.cancelBoost();\n\t\t\t}\n\n\t\t}else{\n\n\t\t\tthis.boostMeter += (appGlobal.deltaTime*(1.35));\n\t\t\t\n\t\t\tif(this.boostMeter>1){\n\t\t\t\tthis.boostMeter = 1;\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\tif( !this.boostButtonDown ){\n\t\t\tif(!this.canBoost){\n\t\t\t\tif(this.boostMeter>.25){\n\t\t\t\t\tthis.canBoost = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.hud.updateBoost(this.boostMeter);\n\n\t}\n\n\tinitBoost(){\n\t\tthis.fps.toggleADS(false);\n\t\t//this.adsing = false;\n\t\tthis.adsHelper(false);\n\n\t\tif(this.didTpsAni){\t\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"boost\", dist:1});\n\t\t\tthis.doTPSAni(true);\n\t\t\tthis.didTpsAni = false;\n\t\t}\n\t\tthis.boostMult = this.boostMultMax;\n\t\tthis.boosting = true;\n\t\tthis.fps.toggleBoost(true);\n\t}\n\n\tcancelBoost(){\n\t\tif(!this.didTpsAni){\n\t\t\tthis.doTPSAni(false);\n\t\t\tthis.didTpsAni = true;\n\t\t}\n\t\tthis.ads(this.adsing);\n\t\tthis.fps.toggleBoost(false);\n\t\tthis.boostMult = 1;\n\t\tthis.boosting = false;\n\t}\n\n\tgetForwardVector() {\n\t\tthis.playerRotationHelper.getWorldDirection( this.playerDirection );\n\t\tthis.playerDirection.normalize().negate();\n\t\treturn this.playerDirection;\n\t}\n\n\tgetCameraForwardVector(){\n\t\tappGlobal.controller.playerCamera.getWorldDirection( this.playerDirection );\n\t\tthis.playerDirection.normalize();\n\t\treturn this.playerDirection;\n\t}\n\n\tgetSideVector() {\n\t\tthis.playerRotationHelper.getWorldDirection( this.playerDirection );\n\t\tthis.playerDirection.normalize().negate();\n\t\tthis.playerDirection.cross( this.grav );\n\t\treturn this.playerDirection;\n\t}\n\tgetBoostForwardVector(){\n\t\tappGlobal.controller.camera.getWorldDirection(this.boostCamDir);\n\t\tthis.boostCamDir.normalize();\n\t\treturn this.boostCamDir;\n\t}\n\n\tplayerCollisions() {\n\n\t\tconst result = appGlobal.worldOctree.capsuleIntersect( this.playerCollider );\n\n\t\tthis.playerOnFloor = false;\n\n\t\tif ( result ) {\n\n\t\t\tthis.playerOnFloor = true;\n\t\t\t//this.playerOnFloor = result.normal.y > 0;\n\n\t\t\t// if ( ! this.playerOnFloor ) {\n\n\t\t\t// \tplayerVelocity.addScaledVector( result.normal, - result.normal.dot( playerVelocity ) );\n\n\t\t\t// }\n\t\t\t//this.hitGrav.copy(result.normal);\n\t\t\tthis.playerCollider.translate( result.normal.multiplyScalar( result.depth ) );\n\n\t\t}\n\n\t}\t\t\t\n\n\n\tplayerWorldCollision(world) {\n\t\t//this.playerCollisions();\t\n\t\t\n\t\tconst center = this.vector1.addVectors( this.playerCollider.start, this.playerCollider.end ).multiplyScalar( 0.5 );\n\n\t\tconst sphere_center = appGlobal.world.collider.center;\n\n\t\tconst r = this.playerCollider.radius + appGlobal.world.collider.radius;\n\t\tconst r2 = r * r;\n\t\tthis.animationOnFloor = false;\n\t\tfor ( const point of [ this.playerCollider.start, this.playerCollider.end, center ] ) {\n\t\t//for ( const point of [ this.playerCollider.start ] ) {\n\t\t\tconst d2 = point.distanceToSquared( sphere_center );\n\t\t\tif ( d2 < r2 ) {\n\t\t\t\tconst normal = this.vector1.subVectors( point, sphere_center ).normalize();\n\t\t\t\tthis.animationOnFloor = true;\n\t\t\t\t//this.playerVelocity.addScaledVector( normal, -normal.dot( this.playerVelocity ) );\n\t\t\t\t//this.playerCollider.translate( deltaPosition.add(this.blinkTarg) );\n\t\t\n\t\t\t\t//playerCollider.translate( normal.multiplyScalar( 1 ) );\n\t\t\t}\t\n\t\t}\n\n\t\t\n\t}\t\n\n\tgetClosestWorld(){\n\n\t\tlet lowestDist = 1000000;\n\t\tlet currClosest = null;\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst center = this.vector1.addVectors( this.playerCollider.start, this.playerCollider.end ).multiplyScalar( 0.5 );\n\n\t\t\tconst sphere_center = appGlobal.worlds[i].collider.center;\n\n\t\t\tconst r = this.playerCollider.radius + appGlobal.worlds[i].collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tconst d2 = this.playerCollider.start.distanceToSquared( sphere_center );\n\t\t\t//const d2 = this.playerCollider.end.distanceToSquared( sphere_center );\n\t\t\t\n\t\t\t//if ( d2 < r2 ) {\n\t\t\t\n\t\t\tconst total = d2-r2;\n\t\t\t\n\t\t\tif ( total < lowestDist ) {\n\n\t\t\t\tlowestDist = total;\n\t\t\t\tcurrClosest = appGlobal.worlds[i];\n\t\t\t\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\tthis.abilities[i].updateClosestWorldIndex(currClosest.index);\n\t\t}\n\t\t//this.ability.updateClosestWorldIndex(currClosest.index);\n\t\t//this.currentWorldIndex = currClosest.index;\n\t\treturn currClosest;\n\n\t}\n\n\tcheckCanSetClosestWorld(){\n\t\t\n\t\tif(this.movementAbilityName == \"directional boost\"){\n\t\t\t\n\t\t\tif(this.boostAndGravWorldCollisionHelper(1.5)){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.boosting){\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t}else if(this.movementAbilityName == \"planet switch\"){\n\n\t\t\tif(this.abilitiesCanSelectClosestWorld() && this.boostAndGravWorldCollisionHelper(1.0))\n\t\t\t//if( this.abilitiesCanSelectClosestWorld()  )\n\t\t\t\treturn true;\n\n\t\t}else if(this.movementAbilityName == \"teleport\"){\n\t\t\treturn true;\n\t\t}\n\n\t\t\n\t\treturn false;\n\t}\n\n\n\tabilitiesCanSelectClosestWorld(){\n\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\tif(! this.abilities[i].canSetClosestWorld )\n\t\t\t\treturn false;\t\n\t\t}\n\t\t\n\t\treturn true;\n\t}\n\n\n\tboostAndGravWorldCollisionHelper(RADMULT){\n\t\t\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst world = appGlobal.worlds[i]\n\t\t\tconst center = this.vector1.addVectors( this.playerCollider.start, this.playerCollider.end ).multiplyScalar( 0.5 );\n\n\t\t\tconst sphere_center = world.collider.center;\n\n\t\t\tconst r = (this.playerCollider.radius) + (world.collider.radius*RADMULT);\n\t\t\tconst r2 = r * r;\n\t\t\t//this.playerOnFloor = false;\n\t\t\tfor ( const point of [ this.playerCollider.start, this.playerCollider.end, center ] ) {\n\t\t\t//for ( const point of [ this.playerCollider.start ] ) {\n\t\t\t\tconst d2 = point.distanceToSquared( sphere_center );\n\t\t\t\tif ( d2 < r2 ) {\n\t\t\t\t\treturn true;\n\t\t\t\t\t//playerCollider.translate( normal.multiplyScalar( 1 ) );\n\t\t\t\t}\t\n\t\t\t}\n\n\t\t}\n\t\treturn false;\n\t\n\t}\n\n\n\tupdatePlayerPositionAndRotation() {\n\n\t\tthis.camera.position.z = this.camDist;\n\t\t\n\t\tlet damping = Math.exp( - 4 * appGlobal.deltaTime ) - 1;\n\t\t//console.log(damping);\n\n\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.playerCollider.start);\n\t\tthis.currWorld = appGlobal.world;\n\t\t\n\t\t//if(this.ability.canSetClosestWorld){\n\t\tif(this.checkCanSetClosestWorld()){\n\t\t\tthis.hitWorldWhenNotChecking = false;\n\t\t\t//this.playerCollisions();\n\t\t\tappGlobal.world = this.getClosestWorld();\n\t\t}else{\n\t\t\t//this.boostAndGravSwitchHelper();\n\t\t}\n\t\t\n\t\t//grav\n\t\t//if(!this.playerOnFloor)\n\t\t\tthis.grav.lerp(start.sub( appGlobal.world.worldPosition ).normalize(), 1);\n\t\t//else\n\t\t\t//this.grav.lerp(this.hitGrav,1);\n\t\t//let airControl = this.speedMult*this.boostMult;\n\t\t//let airControl = Math.exp(  20 * appGlobal.deltaTime ) * this.speedMult*this.boostMult;\n\t\tlet airControl = (appGlobal.deltaTime*800)*this.speedMult*this.boostMult;\n\t\t\n\t\tconst boostDir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tif(this.boosting){\n\t\t\tboostDir.copy(this.getBoostForwardVector()).multiplyScalar((200*this.directionalBoostMult)*appGlobal.deltaTime);\n\t\t}\n\n\t\tif ( !this.playerOnFloor ) {\n\t\t\t\n\t\t\tthis.playerVelocity.x -= this.grav.x*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\tthis.playerVelocity.y -= this.grav.y*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\tthis.playerVelocity.z -= this.grav.z*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\tdamping *= 0.1;\t\n\t\t\tairControl = this.inAirControlMult;\n\n\t\t}else{\n\t\t\tif(!this.firstLand){\n\t\t\t\tthis.doTPSAni(false);\n\t\t\t\tthis.firstLand = true;\n\t\t\t\tthis.canBoost = true;\n\t\t\t\tthis.didTpsAni = true;\n\t\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\t\tthis.abilities[i].init();\n\t\t\t\t}\n\n\t\t\t\t//this.ability.init();\n\t\t\t\t//this.canGrapple = true;\n\t\t\t}\n\n\t\t\tthis.jumpCount = 0;\n\t\t\tfor(let i = 0; i<this.abilities.length; i++){\n\t\t\t\tthis.abilities[i].handlePlayerLand();\n\t\t\t}\n\t\t\t//this.ability.handlePlayerLand();\n\t\t\t// if(this.grappling){\n\t\t\t// \tthis.canGrapple = true;\n\t\t\t// \tthis.grappling = false;\n\t\t\t// }\n\t\t\tdamping *= this.dampingMult;\n\t\t}\n\t\t\n\t\t//damping*=2\n\t\t\n\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.playerCollider.start).add(this.grav.multiplyScalar(this.playerHeight));\n\t\tthis.playerCollider.end.copy(end);\n\t\t\n\t\t//this.playerVelocity.addScaledVector( this.playerVelocity, damping );\n\t\t\n\t\tthis.playerVelocity.addScaledVector( this.playerVelocity.add(this.getSideVector().multiplyScalar((this.axisX)*(airControl*this.strafeMult))).add(this.getForwardVector().multiplyScalar(this.axisY*airControl)).add(boostDir) , damping );\n\t\tthis.playerVelocity.clampLength(0,this.maxSpeed);\n\t\t\n\t\t//const deltaPosition = this.playerVelocity.clone().multiplyScalar( appGlobal.deltaTime );\n\t\tconst deltaPosition = this.playerVelocity.clone().multiplyScalar( appGlobal.deltaTime );\n\t\tthis.playerCollider.translate( deltaPosition.add(this.blinkTarg) );\n\t\t\n\t\tthis.playerWorldCollision();\n\t\tthis.playerCollisions();\n\t\t\n\t\tthis.lookAt.position.copy( this.playerCollider.end );\n\t\tthis.lookAtRef.position.copy( this.playerCollider.end );\n\t\t\n\t\tthis.rotOffset.rotation.x = -Math.PI*.5;\n\t\t\t\n\t\tthis.worldPosEase.lerp(appGlobal.world.worldPosition, this.gravRotationEase);\n\t\t//this.lookAtRef.lookAt(appGlobal.world.worldPosition);\n\t\tthis.lookAtRef.lookAt(this.worldPosEase);\n\n\t\tvar lookVec = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.lookAtRef.getWorldDirection(lookVec).normalize();\n\n\t\tvar rotVec = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(); \n\t\tthis.lookAt.getWorldDirection(rotVec).normalize();\n\t\tconst q = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( rotVec, lookVec );\t\t\t\t\n\t\tthis.lookAt.applyQuaternion(q);//rotation.apply.copy(q);\n\t\t\n\t\t//this.mesh.rotation.y=;\n\t}\n\n\n\n\n\tupdateMouseMove(event){\n\t\t\n\t\tthis.updateCameraRotation({mx:event.movementX, my:event.movementY})\n\t\t\n\t}\n\n\tupdateCameraRotation(OBJ){\n\n\t\tlet adsValHolder = this.weapon.adsMouseSensMult * window.settingsParams[\"adsMouseSenseMult\"];\n\t\tif(adsValHolder > .95)\n\t\t\tadsValHolder = .95;\n\t\tconst adsHelper = 1.0 - (adsValHolder  * this.adsMouseSenseMult);\n\t\tif(!this.emoting){\n\t\t\tthis.xRot.rotation.y   -= OBJ.mx *(0.005*( window.settingsParams[\"mouseSens\"] * adsHelper ));\n\t\t\tthis.camera.rotation.x -= OBJ.my *(0.005*( window.settingsParams[\"mouseSens\"] * adsHelper ));\n\t\t}else{\n\t\t\tthis.camera.rotation.x = 0;\n\t\t\tthis.emoteHelper.rotation.y  -= OBJ.mx *(0.005*( window.settingsParams[\"mouseSens\"] * adsHelper ));\n\t\t}\n\t\t\n\t\tconst max = 1.5;\n\t\tif(this.camera.rotation.x<-max)this.camera.rotation.x = -max;\n\t\tif(this.camera.rotation.x>max)this.camera.rotation.x = max;\n\t\tthis.playerRotationHelper.rotation.y = this.camera.rotation.y;\n\t}\n\n\tads(shouldADS){\n\n\t\t//this.killEmoting();\n\t\t\n\t\tthis.fps.toggleADS(shouldADS);\n\t\tthis.adsing = shouldADS;\n\t\t\n\t\tif(!this.boosting){\n\t\t\t\n\t\t\t//this.adsing = shouldADS;\n\t\t\t\n\t\t\tthis.adsHelper(shouldADS)\n\t\t\t\n\n\t\t}\n\t\t\n\t}\n\n\tadsHelper(shouldADS){\n\n\t\t// if(this.fovAni!=null){\n\t\t// \tthis.fovAni.kill();\n\t\t// }\n\t\t\n\t\tconst self = this;\n\t\tif(shouldADS){\n\t\t\tthis.fovTarg = this.weapon.zoom;\n\t\t}else{\n\t\t\tthis.fovTarg = this.defaultFOV;\n\t\t}\n\t\t// if(shouldADS){\n\t\t// \tthis.fovAni = gsap.to(this.camera,{duration:.3, fov:this.weapon.zoom, ease: \"circ.out()\", delay:0, onUpdate:function(){\n\t\t// \t\tself.camera.updateProjectionMatrix();\n\t\t// \t}});\n\t\t// }else{\n\t\t// \tthis.fovAni = gsap.to(this.camera,{duration:.3, fov:this.defaultFOV, ease: \"circ.out()\", delay:0, onUpdate:function(){\n\t\t// \t\tself.camera.updateProjectionMatrix();\n\t\t// \t}});\n\t\t// }\n\t}\n\n\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Player.js?");

/***/ }),

/***/ "./src/PlayerController.js":
/*!*********************************!*\
  !*** ./src/PlayerController.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlayerController\": () => (/* binding */ PlayerController)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Player_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Player.js */ \"./src/Player.js\");\n/* harmony import */ var _scripts_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scripts/jsm/controls/OrbitControls.js */ \"./src/scripts/jsm/controls/OrbitControls.js\");\n\r\n\r\n\r\n\r\nclass PlayerController {\r\n\t//{scene:scene, worldScale:worldScale};\r\n\tconstructor(OBJ) {\r\n\t\t\r\n\t\tthis.playerCamera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 90, window.innerWidth / window.innerHeight, 0.1, 1000 );\t\t\r\n\t\tthis.playerCamera.rotation.order = 'YXZ';\r\n\t\tthis.nonPlayingCam = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 90, window.innerWidth / window.innerHeight, 0.1, 1000 );\r\n\t\tthis.nonPlayingCam.position.z = appGlobal.worldScale*5;\r\n\t\tthis.camera = this.nonPlayingCam;\r\n\t\tthis.player = null;\r\n\r\n\t\tthis.controls = new _scripts_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_2__.OrbitControls( this.nonPlayingCam, appGlobal.scene.renderer.domElement );\r\n\t\t//this.controls.listenToKeyEvents( window ); // optional\r\n\r\n\t\t//controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)\r\n\r\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\r\n\t\tthis.controls.dampingFactor = 0.05;\r\n\r\n\t\tthis.controls.screenSpacePanning = true;\r\n\t\tthis.controls.autoRotate = true;\r\n\t\tthis.controls.minDistance = appGlobal.worldScale*.1;\r\n\t\tthis.controls.maxDistance = 700;\r\n\t\tthis.id = OBJ.id;\r\n\t\tthis.name = OBJ.user;\r\n\t\tthis.killCount = 0;\r\n\t\tthis.dom = appGlobal.globalHelperFunctions.initPlayerDom({id:this.id, isRemote:false, killCount:this.killCount});\r\n\t\t\r\n\t}\r\n\r\n\tupdateKillCount(kc){\r\n\t\tthis.killCount = kc;\r\n\t}\r\n\t\r\n\tupdate = function(){\r\n\t\tif(appGlobal.playing){\r\n\t\t\tthis.player.update();\r\n\t\t\tthis.controls.enabled=false;\r\n\t\t\tthis.camera = this.playerCamera;\r\n\t\t\tthis.controls.enabled = false;\r\n\t\t\tappGlobal.globalHelperFunctions.updatePlayerDom({dom:this.dom, id:this.name, killCount:this.killCount});\r\n\t\t}else{\r\n\t\t\tthis.controls.enabled=true;\r\n\t\t\tthis.controls.update();\r\n\t\t\tthis.camera = this.nonPlayingCam;\r\n\t\t}\r\n\t}\r\n\r\n\tinitPlayer(OBJ){\r\n\t\tthis.name = OBJ.name;\r\n\t\tOBJ.id = this.id;\r\n\t\tthis.player = new _Player_js__WEBPACK_IMPORTED_MODULE_1__.Player(OBJ); \r\n\t}\r\n\t\r\n\t////appGlobal.globalHelperFunctions.killPlayerDom(this.dom);\r\n  \t\t\r\n\tupdateWindowSize(){\r\n\t\tthis.playerCamera.aspect = window.innerWidth / window.innerHeight;\r\n\t\tthis.playerCamera.updateProjectionMatrix();\r\n\t\tthis.nonPlayingCam.aspect = window.innerWidth / window.innerHeight;\r\n\t\tthis.nonPlayingCam.updateProjectionMatrix();\r\n\t}\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/PlayerController.js?");

/***/ }),

/***/ "./src/PlayerSelectScene.js":
/*!**********************************!*\
  !*** ./src/PlayerSelectScene.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PlayerSelectScene\": () => (/* binding */ PlayerSelectScene)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/controls/OrbitControls.js */ \"./src/scripts/jsm/controls/OrbitControls.js\");\n/* harmony import */ var _scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scripts/jsm/utils/SkeletonUtils.js */ \"./src/scripts/jsm/utils/SkeletonUtils.js\");\n/* harmony import */ var _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterAnimationHandler.js */ \"./src/CharacterAnimationHandler.js\");\n/* harmony import */ var _CharacterSkin_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CharacterSkin.js */ \"./src/CharacterSkin.js\");\n/* harmony import */ var _scripts_jsm_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scripts/jsm/loaders/FontLoader.js */ \"./src/scripts/jsm/loaders/FontLoader.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//import { RoomEnvironment } from './scripts/jsm/environments/RoomEnvironment.js';\r\n\r\n\r\nclass PlayerSelectScene {\r\n\r\n\tconstructor() {\r\n\r\n\t\tconst self = this;\r\n\r\n\t\tthis.scene = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\t//this.scene.background = new Color( 0x88ccff );\r\n\t\tthis.container = document.getElementById( 'player-select-character' );\r\n\t\tthis.skins = document.getElementById(\"player-skins\");\r\n\t\tthis.w = 600;\r\n\t\tthis.h = window.innerHeight*.4;\r\n\t\tthis.container.style.width = this.w+\"px\";\r\n\t\tthis.container.style.height = this.skins.style.height = this.h+\"px\";\r\n\r\n\r\n\r\n\t\tthis.renderer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { antialias: false, alpha:true } );\r\n\t\t//this.renderer.setPixelRatio( window.devicePixelRatio );\r\n\t\tthis.renderer.setSize( this.w, this.h );\r\n\t\t// this.renderer.shadowMap.enabled = true;\r\n\t\t// this.renderer.shadowMap.type = VSMShadowMap;\r\n\r\n\t\tthis.camera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 26, this.w / this.h, 0.1, 1000 );\r\n\t\tthis.camera.position.z = 2.8;\r\n\r\n\t\t\r\n\t\tthis.container.appendChild( this.renderer.domElement );\r\n\t\tthis.controls = new _scripts_jsm_controls_OrbitControls_js__WEBPACK_IMPORTED_MODULE_1__.OrbitControls( this.camera,  this.container);\r\n\r\n\t\t//this.controls.listenToKeyEvents( window ); // optional\r\n\r\n\t\t//controls.addEventListener( 'change', render ); // call this only in static scenes (i.e., if there is no animation loop)\r\n\r\n\t\tthis.controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\r\n\t\tthis.controls.dampingFactor = 0.05;\r\n\t\tthis.controls.enablePan = false;\r\n\t\tthis.controls.enableZoom = false;\r\n\t\tthis.controls.screenSpacePanning = true;\r\n\t\tthis.controls.autoRotate = false;\t\t\r\n\t\tthis.controls.minPolarAngle = Math.PI/2; // radians\r\n\t\tthis.controls.maxPolarAngle = Math.PI/2; // radians \r\n\t\t//this.controls.minDistance = 0;\r\n\t\t//this.controls.maxDistance = 700;\r\n\t\t\r\n\t\tconst assault = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"body-assault\").scene );\r\n\t\tconst assaultBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"assault-boost\").scene );\r\n\t\tconst assaultTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"assault-teleport\").scene );\r\n\t\tconst assaultDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"assault-directional\").scene );\r\n\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"assault\", \r\n\t\t\tmeshes:[assault, assaultBoost, assaultTeleport, assaultDirectional]\r\n\t\t})\r\n\r\n\t\tconst submachine = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"body-submachine\").scene );\r\n\t\tconst submachineBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"submachine-boost\").scene );\r\n\t\tconst submachineTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"submachine-teleport\").scene );\r\n\t\tconst submachineDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"submachine-directional\").scene );\r\n\t\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"submachine\", \r\n\t\t\tmeshes:[submachine, submachineBoost, submachineTeleport, submachineDirectional]\r\n\t\t})\r\n\r\n\t\tconst sticky = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"body-sticky\").scene );\r\n\t\tconst stickyBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sticky-boost\").scene );\r\n\t\tconst stickyTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sticky-teleport\").scene );\r\n\t\tconst stickyDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sticky-directional\").scene );\r\n\t\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"sticky\", \r\n\t\t\tmeshes:[sticky, stickyBoost, stickyTeleport, stickyDirectional]\r\n\t\t})\r\n\r\n\t\tconst launcher = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"body-launcher\").scene );\r\n\t\tconst launcherBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"launcher-boost\").scene );\r\n\t\tconst launcherTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"launcher-teleport\").scene );\r\n\t\tconst launcherDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"launcher-directional\").scene );\r\n\t\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"launcher\", \r\n\t\t\tmeshes:[launcher, launcherBoost, launcherTeleport, launcherDirectional]\r\n\t\t})\r\n\r\n\t\tconst sixgun = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"body-sixgun\").scene );\r\n\t\tconst sixgunBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sixgun-boost\").scene );\r\n\t\tconst sixgunTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sixgun-teleport\").scene );\r\n\t\tconst sixgunDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)( self.getModelByName(\"sixgun-directional\").scene );\r\n\t\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"sixgun\", \r\n\t\t\tmeshes:[sixgun, sixgunBoost, sixgunTeleport, sixgunDirectional]\r\n\t\t})\r\n\r\n\t\tconst sniper = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"body-sniper\").scene );\r\n\t\tconst sniperBoost = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"sniper-boost\").scene );\r\n\t\tconst sniperTeleport = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"sniper-teleport\").scene );\r\n\t\tconst sniperDirectional = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_2__.clone)(  self.getModelByName(\"sniper-directional\").scene );\r\n\t\t\r\n\t\tappGlobal.skinsHandler.addMeshes({\r\n\t\t\tname:\"sniper\", \r\n\t\t\tmeshes:[sniper, sniperBoost, sniperTeleport, sniperDirectional]\r\n\t\t})\r\n\t\t// this.auto = clone(         self.getModelByName(\"weapon\").scene );\r\n\t\t// this.sub =  clone(         self.getModelByName(\"weapon\").scene );\r\n\t\t// this.sniper = clone(       self.getModelByName(\"weapon\").scene );\r\n\t\t// this.sixgun = clone(       self.getModelByName(\"weapon\").scene );\r\n\t\t// this.launcher = clone(     self.getModelByName(\"weapon\").scene );\r\n\t\t// this.sticky   = clone(     self.getModelByName(\"weapon\").scene );\r\n\r\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\t//this.character.quaternion.set(new Quaternion().identity());\r\n\t\t//automatic.position.y = projectile.position.y = hitscan.position.y = -.5;\r\n\t\t\r\n\t\t//this.weapon.position.y = -.5;\r\n\t\tthis.holder.position.y = -.55;\r\n\t\t//this.holder.position.x = -.25;\r\n\t\t\r\n\t\tthis.characters = [];\r\n\t\t\r\n\t\tconst cahAssault =    new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[assault, assaultBoost, assaultDirectional, assaultTeleport],               animations:appGlobal.loadObjs[0].model.animations, name:\"assault\"})\r\n\t\tconst cahSubmachine = new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[submachine, submachineBoost, submachineDirectional, submachineTeleport], \tanimations:appGlobal.loadObjs[0].model.animations, name:\"submachine\"})\r\n\t\t\r\n\t\tconst cahSticky =    new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[sticky, stickyBoost, stickyDirectional, stickyTeleport],      \t\t\t   \tanimations:appGlobal.loadObjs[0].model.animations, name:\"sticky\"})\r\n\t\tconst cahLauncher =  new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[launcher, launcherBoost, launcherDirectional, launcherTeleport],    \t\tanimations:appGlobal.loadObjs[0].model.animations, name:\"launcher\"})\r\n\t\t\r\n\t\tconst cahSixGun =    new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[sixgun, sixgunBoost, sixgunDirectional, sixgunTeleport],      \t\t\t \tanimations:appGlobal.loadObjs[0].model.animations, name:\"sixgun\"})\r\n\t\tconst cahSniper =    new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_3__.CharacterAnimationHandler({meshes:[sniper, sniperBoost, sniperDirectional, sniperTeleport],      \t\t\t\tanimations:appGlobal.loadObjs[0].model.animations, name:\"sniper\"})\r\n\t\t\r\n\t\tcahAssault.initAnimation();\r\n\t\tcahSubmachine.initAnimation();\r\n\t\t\r\n\t\tcahSticky.initAnimation();\r\n\t\tcahLauncher.initAnimation();\r\n\t\t\r\n\t\tcahSixGun.initAnimation();\r\n\t\tcahSniper.initAnimation();\r\n\r\n\t\tthis.characters.push({object:assault,    cah:cahAssault,     name:\"assault\",    attach:[{obj: assaultBoost,    name:\"boost\"},{obj: assaultDirectional,    name:\"directional\"}, {obj: assaultTeleport,    name:\"teleport\"}] });//order set in main js character loader object\r\n\t\tthis.characters.push({object:submachine, cah:cahSubmachine,  name:\"submachine\", attach:[{obj: submachineBoost, name:\"boost\"},{obj: submachineDirectional, name:\"directional\"}, {obj: submachineTeleport, name:\"teleport\"}]  });//order set in main js character loader object\r\n\t\t\r\n\t\tthis.characters.push({object:sticky,   cah:cahSticky,        name:\"sticky\",     attach:[{obj: stickyBoost,   name:\"boost\"},{obj: stickyDirectional,   name:\"directional\"}, {obj: stickyTeleport,   name:\"teleport\"}]    });//order set in main js character loader object\r\n\t\tthis.characters.push({object:launcher, cah:cahLauncher,      name:\"launcher\",   attach:[{obj: launcherBoost, name:\"boost\"},{obj: launcherDirectional, name:\"directional\"}, {obj: launcherTeleport, name:\"teleport\"}]    });//order set in main js character loader object\r\n\t\t \r\n\t\tthis.characters.push({object:sixgun,    cah:cahSixGun,       name:\"sixgun\",    attach:[{obj: sixgunBoost, name:\"boost\"},{obj: sixgunDirectional, name:\"directional\"}, {obj: sixgunTeleport, name:\"teleport\"}]     });//order set in main js character loader object\r\n\t\tthis.characters.push({object:sniper,    cah:cahSniper,       name:\"sniper\",    attach:[{obj: sniperBoost, name:\"boost\"},{obj: sniperDirectional, name:\"directional\"}, {obj: sniperTeleport, name:\"teleport\"}]     });//order set in main js character loader object\r\n\t\t\r\n\t\tthis.scene.add(this.holder);\r\n\t\tthis.holder.add(\r\n\t\t\tassault, assaultBoost, assaultTeleport, assaultDirectional, \r\n\t\t\tsubmachine, submachineBoost, submachineTeleport, submachineDirectional,\r\n\t\t\tsticky, stickyBoost, stickyTeleport, stickyDirectional,\r\n\t\t\tlauncher, launcherBoost, launcherTeleport, launcherDirectional,\r\n\t\t\tsniper, sniperBoost, sniperTeleport, sniperDirectional,\r\n\t\t\tsixgun, sixgunBoost, sixgunTeleport, sixgunDirectional\r\n\t\t);\r\n\r\n\t\t// const pmremGenerator = new PMREMGenerator( this.renderer );\r\n\t\t// this.scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.01 ).texture;\r\n\r\n\t\t// this.holder.traverse( function ( obj ) {\r\n\t\t// \tif(obj.isMesh){\r\n\t\t// \t\tobj.material.environmentMap = self.scene.environment;\r\n\t\t// \t}\r\n\t\t// });\r\n\t\t\r\n\t\tconst ambientlight = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0x6688cc );\r\n\t\tthis.scene.add( ambientlight );\r\n\t\t\r\n\t\tconst fillLight1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0xf0f0f0, 0.5 );\r\n\t\tfillLight1.position.set( -1, 1, 2 );\r\n\t\tthis.scene.add( fillLight1 );\r\n\r\n\t\tconst fillLight2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0x8888ff, 0.2 );\r\n\t\tfillLight2.position.set( 0, -1, 0 );\r\n\t\tthis.scene.add( fillLight2 );\r\n\r\n\t\tconst directionalLight = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0xffffc7, 1.2 );\r\n\t\tdirectionalLight.position.set( - 5, 25, - 1 );\r\n\t\t// directionalLight.castShadow = true;\r\n\t\t// directionalLight.shadow.camera.near = 0.01;\r\n\t\t// directionalLight.shadow.camera.far = 500;\r\n\t\t// directionalLight.shadow.camera.right = 30;\r\n\t\t// directionalLight.shadow.camera.left = - 30;\r\n\t\t// directionalLight.shadow.camera.top\t= 30;\r\n\t\t// directionalLight.shadow.camera.bottom = - 30;\r\n\t\t// directionalLight.shadow.mapSize.width = 1024;\r\n\t\t// directionalLight.shadow.mapSize.height = 1024;\r\n\t\t// directionalLight.shadow.radius = 4;\r\n\t\t// directionalLight.shadow.bias = - 0.00006;\r\n\t\tthis.scene.add( directionalLight );\r\n\t\tthis.boostTexture = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().load( './assets/textures/boost.png' );\r\n\t\tthis.boostTexture.wrapS = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\r\n\t\tthis.boostTexture.wrapT =  Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\r\n\t\tthis.boostTexture.magFilter = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()); \r\n\t\r\n\t\tthis.rotMod = 0;\r\n\t\tfor(let i = 0; i<this.characters.length; i++){\r\n\t\t\tlet name = \"tip-\"+this.characters[i].name;\r\n\t\t\t//console.log(this.characters[i].object);\r\n\t\t\tconst tipObject = this.characters[i].object.getObjectByName(name);\r\n\t\t\ttipObject.visible = false;\r\n\t\t\t\r\n\t\t\tself.initCAH(this.characters[i]);\r\n\t\t\tfor(let k = 0; k<this.characters[i].attach.length; k++){\r\n\t\t\t\tthis.characters[i].attach[k].obj.visible = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.characters[i].attach[k].obj.traverse( function ( obj ) {\r\n\t\t\t\t\tif(obj.name.includes(\"boost-part\")){\r\n\t\t\t\t\t\tobj.material.transparent = true;\r\n\t\t\t\t\t\tobj.material.map = self.boostTexture;\r\n\t\t\t\t\t\tobj.material.emissiveMap = self.boostTexture;\r\n\t\t\t\t\t\tobj.material.color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0x000000);\r\n\t\t\t\t\t\tobj.material.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0xffbf80);\r\n\t\t\t\t\t\t//self.boostObjs.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t//sentence.includes(word)\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.characters[i].object.visible = false;\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tthis.characters[0].object.visible = true;\r\n\t\tthis.characters[0].attach[0].obj.visible = true;\r\n\r\n\t\tthis.infoTexts = [];\r\n\t\tthis.loader = new _scripts_jsm_loaders_FontLoader_js__WEBPACK_IMPORTED_MODULE_5__.FontLoader();\r\n\t\tthis.loader.load( 'assets/fonts/helvetiker_regular.typeface.json', function ( font ) {\r\n\r\n\t\t\tconst assaultGun = assault.getObjectByName(\"Sphere073\");\r\n\t\t\tconst assaultFoot = assault.getObjectByName(\"foot_l\");\r\n\t\t\tconst assaultBoostHolder = assaultBoost.getObjectByName(\"boost-part015\");\r\n\t\t\tconst assaultDirectionalHolder = assaultDirectional.getObjectByName(\"boost-part017\");\r\n\t\t\tconst assaultTeleportHolder = assaultTeleport.getObjectByName(\"boost-part016\");\r\n\r\n\t\t\tconst assaultText = new PlayerSelectInfoText({text:\"assault rifle\",                     parent:assaultGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-3, 3, 6),     font:font, distanceMult:400,  scale:.055, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(assaultText);\r\n\t\t\tconst assaultAbility = new PlayerSelectInfoText({text:\"[SHIFT + A,S,D] to dash\",        parent:assaultFoot,               offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-.2, .2, -.2), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/2, 0, Math.PI/2 )});\r\n\t\t\tself.infoTexts.push(assaultAbility);\r\n\t\t\tconst assaultPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:assaultBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(assaultPlanetSwitchText);\r\n\t\t\tconst assaultBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:assaultDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(assaultBoostText);\r\n\t\t\tconst assaultTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:assaultTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(assaultTeleportText);\r\n\r\n\r\n\r\n\t\t\tconst stickyGun = sticky.getObjectByName(\"Sphere068\");\r\n\t\t\tconst stickyFoot = sticky.getObjectByName(\"foot_l\");\r\n\t\t\tconst stickyBoostHolder = stickyBoost.getObjectByName(\"boost-part008\");\r\n\t\t\tconst stickyDirectionalHolder = stickyDirectional.getObjectByName(\"boost-part006\");\r\n\t\t\tconst stickyTeleportHolder = stickyTeleport.getObjectByName(\"boost-part007\");\r\n\r\n\t\t\tconst stickyText = new PlayerSelectInfoText({text:\"sticky bombs\",                      parent:stickyGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(2, 3, 2),      font:font, distanceMult:300,  scale:.045, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/2,0,Math.PI)});\r\n\t\t\tself.infoTexts.push(stickyText);\r\n\t\t\tconst stickyAbility = new PlayerSelectInfoText({text:\"[SPACE] to double jump\",         parent:stickyFoot,               offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-.2, .2, -.2), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/2, 0, Math.PI/2 )});\r\n\t\t\tself.infoTexts.push(stickyAbility);\r\n\t\t\tconst stickyPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:stickyBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(stickyPlanetSwitchText);\r\n\t\t\tconst stickyBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:stickyDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(stickyBoostText);\r\n\t\t\tconst stickyTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:stickyTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(stickyTeleportText);\r\n\t\t\t\r\n\r\n\t\t\tconst nitroGun = submachine.getObjectByName(\"Plane001\");\r\n\t\t\tconst nitroFoot = submachine.getObjectByName(\"hand_l\");\r\n\t\t\tconst nitroBoostHolder = submachineBoost.getObjectByName(\"boost-part011\");\r\n\t\t\tconst nitroDirectionalHolder = submachineDirectional.getObjectByName(\"boost-part009\");\r\n\t\t\tconst nitroTeleportHolder = submachineTeleport.getObjectByName(\"boost-part010\");\r\n\r\n\t\t\tconst nitroText = new PlayerSelectInfoText({text:\"submachine gun\",                    parent:nitroGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-.7, 1.2, .6),      font:font, distanceMult:300,  scale:.022, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(nitroText);\r\n\t\t\tconst nitroAbility = new PlayerSelectInfoText({text:\"[Q] throw nade\",        parent:nitroFoot,               offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.3, .1, .04), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/2, Math.PI/4, -Math.PI/1.75 )});\r\n\t\t\tself.infoTexts.push(nitroAbility);\r\n\t\t\tconst nitroPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:nitroBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(nitroPlanetSwitchText);\r\n\t\t\tconst nitroBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:nitroDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(nitroBoostText);\r\n\t\t\tconst nitroTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:nitroTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(nitroTeleportText);\r\n\r\n\r\n\t\t\tconst sniperGun = sniper.getObjectByName(\"Sphere070\");\r\n\t\t\tconst sniperFoot = sniper.getObjectByName(\"head\");\r\n\t\t\tconst sniperBoostHolder = sniperBoost.getObjectByName(\"boost-part014\");\r\n\t\t\tconst sniperDirectionalHolder = sniperDirectional.getObjectByName(\"boost-part012\");\r\n\t\t\tconst sniperTeleportHolder = sniperTeleport.getObjectByName(\"boost-part013\");\r\n\r\n\t\t\tconst sniperText = new PlayerSelectInfoText({text:\"sniper rifle\",                      parent:sniperGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-3, 3, 6),     font:font, distanceMult:400,  scale:.055, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sniperText);\r\n\t\t\tconst sniperAbility = new PlayerSelectInfoText({text:\"[Q] for wall hacks\",             parent:sniperFoot,               offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .2, .2), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, Math.PI/2, 0 )});\r\n\t\t\tself.infoTexts.push(sniperAbility);\r\n\t\t\tconst sniperPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:sniperBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sniperPlanetSwitchText);\r\n\t\t\tconst sniperBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:sniperDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sniperBoostText);\r\n\t\t\tconst sniperTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:sniperTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sniperTeleportText);\r\n\r\n\r\n\t\t\tconst launcherGun = launcher.getObjectByName(\"Cube043\");\r\n\t\t\tconst launcherFoot = launcher.getObjectByName(\"hand_l\");\r\n\t\t\tconst launcherBoostHolder = launcherBoost.getObjectByName(\"boost-part001\");\r\n\t\t\tconst launcherDirectionalHolder = launcherDirectional.getObjectByName(\"boost-part002\");\r\n\t\t\tconst launcherTeleportHolder = launcherTeleport.getObjectByName(\"boost-part000\");\r\n\r\n\t\t\tconst launcherText = new PlayerSelectInfoText({text:\"rocket launcher\",                   parent:launcherGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-1, 1, 2),     font:font, distanceMult:400,  scale:.022, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sniperText);\r\n\t\t\tconst launcherAbility = new PlayerSelectInfoText({text:\"[Q] throw jump pad\",         parent:launcherFoot,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.1, -.2, .24), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/3, Math.PI/4.5, Math.PI/1.35 + Math.PI)});\r\n\t\t\tself.infoTexts.push(launcherAbility);\r\n\t\t\tconst launcherPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:launcherBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(launcherPlanetSwitchText);\r\n\t\t\tconst launcherBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:launcherDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(launcherBoostText);\r\n\t\t\tconst launcherTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:launcherTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(launcherTeleportText);\r\n\r\n\r\n\r\n\t\t\tconst sixgunGun = sixgun.getObjectByName(\"Sphere067\");\r\n\t\t\tconst sixgunFoot = sixgun.getObjectByName(\"hand_l\");\r\n\t\t\tconst sixgunBoostHolder = sixgunBoost.getObjectByName(\"boost-part005\");\r\n\t\t\tconst sixgunDirectionalHolder = sixgunDirectional.getObjectByName(\"boost-part003\");\r\n\t\t\tconst sixgunTeleportHolder = sixgunTeleport.getObjectByName(\"boost-part004\");\r\n\r\n\t\t\tconst sixgunText = new PlayerSelectInfoText({text:\"revolver\",                          parent:sixgunGun,                offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(8, 6, -6),     font:font, distanceMult:300,  scale:.12, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,Math.PI,0)});\r\n\t\t\tself.infoTexts.push(sixgunText);\r\n\t\t\tconst sixgunAbility = new PlayerSelectInfoText({text:\"[Q] throw slowing AOE\",             parent:sixgunFoot,            offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(-.3, .1, -.14), font:font, distanceMult:300, scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( -Math.PI/2, -Math.PI/2, Math.PI/1.75 )});\r\n\t\t\tself.infoTexts.push(sixgunAbility);\r\n\t\t\tconst sixgunPlanetSwitchText = new PlayerSelectInfoText({text:\"[E] to switch planets\", parent:sixgunBoostHolder,        offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sixgunPlanetSwitchText);\r\n\t\t\tconst sixgunBoostText = new PlayerSelectInfoText({text:\"[SHIFT] to directional boost\", parent:sixgunDirectionalHolder,  offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sixgunBoostText);\r\n\t\t\tconst sixgunTeleportText = new PlayerSelectInfoText({text:\"[E] to teleport\",           parent:sixgunTeleportHolder,     offset:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(.4, .3, 0), font:font, distanceMult:350,  scale:.0032, rot:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0,0,0)});\r\n\t\t\tself.infoTexts.push(sixgunTeleportText);\r\n\t\t\t\r\n\t\t}); \r\n\r\n\t}\r\n\r\n\ttryCopy(object,parent){\r\n\t\tobject.traverse( function ( obj ) {\r\n\t\t\t\r\n\t\t\t// if( obj.isMesh ){\t\r\n\t\t\t// \t//const c = new Mesh(obj.geometry.copy(),obj.material.copy());\r\n\t\t\t// \t//parent.add(c);\r\n\t\t\t// \tconsole.log(obj)\r\n\t\t\t// }\r\n\t\t\t// if( obj.isSkinnedMesh ){\r\n\t\t\t// \tconst geo = new BufferGeometry();\r\n\t\t\t// \tobj.geometry.copy(geo);\r\n\t\t\t// \tconst mat = new MeshStandardMaterial();\r\n\t\t\t// \tobj.material.copy(mat);\r\n\t\t\t// \tconst c = new SkinnedMesh(geo,mat);\r\n\t\t\t// \tparent.add(c);\r\n\t\t\t// }\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleCharacterSwitch(OBJ){\r\n\t\tlet obj;\r\n\t\tlet mov;\r\n\t\tappGlobal.skinsHandler.playerSelectSwitchCharacter(OBJ);\r\n\t\tfor(let i = 0; i < this.characters.length; i++){\r\n\t\t\tfor(let k = 0; k<this.characters[i].attach.length; k++){\r\n\t\t\t\tthis.characters[i].attach[k].obj.visible = false;\r\n\t\t\t\tthis.characters[i].object.visible = false;\r\n\t\t\t\tif(this.characters[i].attach[k].name == OBJ.movement && this.characters[i].name == OBJ.class){\r\n\t\t\t\t\tmov = this.characters[i].attach[k].obj;\r\n\t\t\t\t\tobj = this.characters[i].object;\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmov.visible = true;\r\n\t\tobj.visible = true;\r\n\t}\r\n\r\n\thandleMovementSwitch(OBJ){\r\n\t\tlet obj;\r\n\t\tfor(let i = 0; i < this.characters.length; i++){\r\n\t\t\tfor(let k = 0; k < this.characters[i].attach.length; k++){\r\n\t\t\t\tthis.characters[i].attach[k].obj.visible = false;\r\n\t\t\t\tif(this.characters[i].attach[k].name == OBJ.movement && this.characters[i].name == OBJ.class){\r\n\t\t\t\t\tobj = this.characters[i].attach[k].obj;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tobj.visible = true;\r\n\t}\r\n\r\n\tinitCAH(OBJ){\r\n\t\tOBJ.cah.idle.weight = 1;\r\n\t\tOBJ.cah.forward.weight = 0;\r\n\t\tOBJ.cah.right.weight = 0;\r\n\t\tOBJ.cah.back.weight = 0;\r\n\t\tOBJ.cah.left.weight = 0;\r\n\t\tOBJ.cah.jump.weight = 0;\r\n\t\tOBJ.cah.idleTarg = 1;\r\n\t\tOBJ.cah.idle.play();\r\n\t\tOBJ.cah.forward.stop();\r\n\t\tOBJ.cah.right.stop();\r\n\t\tOBJ.cah.left.stop();\r\n\t\tOBJ.cah.back.stop();\r\n\t\tOBJ.cah.jump.stop();\r\n\t}\r\n\r\n\tgetModelByName(NAME){\r\n\t\tfor(let i = 0; i<appGlobal.loadObjs.length;i++){\r\n\t\t\tif(appGlobal.loadObjs[i].name==NAME)\r\n\t\t\t\treturn appGlobal.loadObjs[i].model;\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\tupdate(){\r\n\t\tthis.renderer.render( this.scene, this.camera );\r\n\t\tthis.controls.update();\r\n\t\t\r\n\t\tthis.rotMod += (appGlobal.deltaTime*400);\r\n\t\tif(Math.floor(this.rotMod%10) == 0){\r\n\t\t\tthis.boostTexture.offset.x += .2+Math.random()*.5;\r\n\t\t}\r\n\t\t\t\t\r\n\t\tfor(let i = 0; i<this.characters.length; i++){\r\n\t\t\tthis.characters[i].cah.update();\r\n\t\t}\t\t\r\n\t}\r\n\r\n\tupdateWindowSize(){\r\n\t\tconsole.log(\"sdf\")\r\n\t\tthis.h = window.innerHeight*.4;\r\n\t\tthis.container.style.height = this.skins.style.height = this.h+\"px\";\r\n\t\tthis.renderer.setSize(this.w, this.h);\r\n\t\tthis.camera.aspect = this.w / this.h;\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\t\t\r\n\t}\r\n\r\n\tkill(){\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\n\r\n\r\nclass PlayerSelectInfoText{\r\n\tconstructor(OBJ){\r\n\t\tthis.text = OBJ.text;\r\n\t\tthis.parent = OBJ.parent;\r\n\t\tthis.textTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tthis.parentTarg = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tthis.offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.offset);\r\n\t\r\n\t\tconst matLite = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\r\n\t\t\tcolor: 0xffffff,\r\n\t\t\tside: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\r\n\t\t} );\r\n\r\n\t\tconst message = this.text;\r\n\t\tconst shapes = OBJ.font.generateShapes( message, 12 );\r\n\t\tconst geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( shapes );\r\n\t\tgeometry.computeBoundingBox();\r\n\t\tconst xMid = - 0.5 * ( geometry.boundingBox.max.x - geometry.boundingBox.min.x );\r\n\t\tgeometry.translate( xMid, 0, 0 );\r\n\r\n\t\t// make shape ( N.B. edge view not visible )\r\n\r\n\t\tthis.text = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, matLite );\r\n\t\t//text.position.z = - 150;\r\n\t\tthis.parent.add( this.text );\r\n\t\tthis.text.position.copy(this.offset);\r\n\t\tthis.text.scale.set(OBJ.scale, OBJ.scale, OBJ.scale);\r\n\t\tthis.text.getWorldPosition(this.textTarg);\r\n\t\tthis.text.rotation.copy(OBJ.rot); \r\n\t\tthis.parent.getWorldPosition(this.parentTarg);\r\n\t\tconst d = this.textTarg.distanceTo(this.parentTarg);\r\n\t\t\t\r\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tconst dMult = OBJ.distanceMult;\r\n\t\tconst cubeGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1, 1, d * dMult );\r\n\t\tconst cubeMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff } );\r\n\t\tthis.cube = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(cubeGeometry, cubeMaterial);\r\n\t\tthis.text.add(this.holder);\r\n\t\tthis.holder.add(this.cube);\r\n\t\tthis.cube.position.z = d*(dMult*.5);\r\n\t\tthis.holder.lookAt(this.parentTarg);\r\n\t\tthis.cube.dontUpdateMaterial = true;\r\n\t\tthis.text.dontUpdateMaterial = true;\r\n\t\t\r\n\t}\r\n}\n\n//# sourceURL=webpack://zerochill/./src/PlayerSelectScene.js?");

/***/ }),

/***/ "./src/RemoteAbilities.js":
/*!********************************!*\
  !*** ./src/RemoteAbilities.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RemoteAbilities\": () => (/* binding */ RemoteAbilities)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ParticleEmitter.js */ \"./src/ParticleEmitter.js\");\n\n\n\nclass RemoteAbilities {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\n\t\tthis.remotePlayer = OBJ.remotePlayer;\n\t\tthis.shouldDoBlinkParticle = false;\n\t\tthis.blinkParticle = new _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__.ParticleEmitter(appGlobal.particles.blink);\n\t\tthis.doubleJumpParticle = new _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__.ParticleEmitter(appGlobal.particles.doubleJump);\n\t\t\n\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(2,8,8);\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(.4,1,.8), transparent:true, opacity:.2, side:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), blending:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())});\n\t\t\n\t\tthis.wallHackSphere = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\tappGlobal.scene.add(this.wallHackSphere)\n\t\tthis.wallHackSphere.scale.set(0,0,0);\n\t\tthis.blinkTimeout = null;\n\n\t}\n\n\tupdate(){\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tif(this.shouldDoBlinkParticle){\n\t\t\t\tthis.blinkParticle.obj.pos.copy(this.remotePlayer.endWorldPosition);\n\t\t\t\tthis.blinkParticle.emit();\n\t\t\t}\n\t\t\tthis.blinkParticle.update();\n\t\t\tthis.doubleJumpParticle.update();\n\t\t\t\n\t\t\t//this.crouchVal += (this.crouchTarg-this.crouchVal)*(200*appGlobal.deltaTime);\n\t\t\t//this.crouch.position.y = this.crouchVal;\n\t\t\n\t\t\t//this.mesh.quaternion.copy(this.targRot);\n\t\t\t//this.mesh.position.copy(this.targPos)\n\t\t}\n\t}\n\tupdateRemote(OBJ){\n\t\tconst self = this;\n\t\tswitch(OBJ.abilityName){\n\t\t\tcase \"blink\":\n\t\t\t\tthis.shouldDoBlinkParticle = true;\n\t\t\t\tthis.blinkTimeout = setTimeout(function(){\n\t\t\t\t\tself.shouldDoBlinkParticle = false;\n\t\t\t\t},700);\n\t\t\tbreak;\n\t\t\tcase \"wall hack\":\n\t\t\t\tthis.wallHackSphere.position.copy(this.remotePlayer.endWorldPosition);\n\t\t\t\tgsap.to(this.wallHackSphere.scale, {duration:4, x:200,y:200,z:200, delay:0, onComplete:function(){\n\t\t\t\t\tself.wallHackSphere.scale.set(0,0,0);\n\t\t\t\t}});\n\t\t\tbreak;\n\t\t\tcase \"double jump\":\n\t\t\t\tthis.doubleJumpParticle.obj.pos.copy(this.remotePlayer.offset.position);\n\t\t\t\tthis.doubleJumpParticle.emit();\n\t\t\tbreak;\n\t\t}\n\t}\n  \tkill(){\n\n  \t\tif(this.blinkTimeout!=null){\n  \t\t\tclearTimeout(this.blinkTimeout);\n  \t\t}\n\n  \t\tthis.blinkParticle.kill();\n\t\tthis.doubleJumpParticle.kill();\n  \t\t\n  \t\tthis.killed = true;\n  \t\tthis.shouldDoBlinkParticle = false;\n  \t\tthis.wallHackSphere.geometry.dispose();\n\t\tthis.wallHackSphere.material.dispose();\n\t\tappGlobal.scene.remove(this.wallHackSphere);\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/RemoteAbilities.js?");

/***/ }),

/***/ "./src/RemoteBulletHandler.js":
/*!************************************!*\
  !*** ./src/RemoteBulletHandler.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RemoteBulletHandler\": () => (/* binding */ RemoteBulletHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _StickyBullet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./StickyBullet.js */ \"./src/StickyBullet.js\");\n/* harmony import */ var _RocketBullet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./RocketBullet.js */ \"./src/RocketBullet.js\");\n/* harmony import */ var _AutoBullet_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AutoBullet.js */ \"./src/AutoBullet.js\");\n/* harmony import */ var _SniperBullet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SniperBullet.js */ \"./src/SniperBullet.js\");\n\n\n\n\n\n\nclass RemoteBulletHandler {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\n\t\tthis.arrFull = false;\n\t\tthis.index = 0;\n\t\tthis.arr = [];\n\t\tthis.max = 200;\n\t\tthis.bulletArr = [];\n\t\tthis.nameToParams=[\n\t\t\t{name:\"sticky\",     class:appGlobal.weapons.sticky,     },\n\t\t\t{name:\"launcher\",   class:appGlobal.weapons.launcher,   },\n\t\t\t{name:\"automatic\",  class:appGlobal.weapons.automatic,  },\n\t\t\t{name:\"submachine\", class:appGlobal.weapons.submachine, },\n\t\t\t{name:\"sniper\",     class:appGlobal.weapons.sniper,     },\n\t\t\t{name:\"sixgun\",     class:appGlobal.weapons.sixgun,     },\n\t\t]\n\t}\n\t\n\tupdate(){\n\t\tfor ( let i = 0; i < appGlobal.STEPS_PER_FRAME; i ++ ) {\n\t\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\t\tthis.arr[i].update();\t\n\t\t\t}\n\t\t}\n\t}\n\n\tshoot(OBJ){\n\n        if(this.arrFull){\n            this.arr[this.index].kill();\t\n        }\n     \n        let bullet;\n    \t\n    \tconst obj = this.getObjectBasedOnName(OBJ.name);\n    \tbullet = obj.class.bullet;\n    \t\n    \tconst shooter = appGlobal.globalHelperFunctions.getRemotePlayerById(OBJ.id);\n    \tif(shooter != null){\n    \t\t\n    \t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(shooter.player.offset.position);\n\t    \tappGlobal.soundHandler.playSoundByName({name:obj.class.sound, dist:dist});\n\t    \t\n\t    \tOBJ.obj.pos.x = shooter.player.tipPos.x;\n\t    \tOBJ.obj.pos.y = shooter.player.tipPos.y;\n\t    \tOBJ.obj.pos.z = shooter.player.tipPos.z;\n\n\t    \tshooter.player.handleRemoteShoot();\n\n    \t}\n\n    \tconst b = new bullet(OBJ.obj, false);\n    \tthis.arr[this.index] = b;\n        this.index++;\n\n        if(this.index == this.max){\n            this.index = 0;\n            this.arrFull = true;\t\n        }\n\t}\n\t\n\t\n\tgetObjectBasedOnName(name){\n\t\tfor(let i = 0;i<this.nameToParams.length; i++){\n\t\t\tif(name==this.nameToParams[i].name){\n\t\t\t\treturn this.nameToParams[i];\n\t\t\t}\n\t\t}\n\t}\n\t//getRemoteById()\n\tkill(){\n\t\tthis.arrFull = false;\n\t\tfor(let i = 0; i < this.arr.length; i++){\n\t\t\tthis.arr[i].kill();\t\n\t\t}\n\t\tthis.index = 0;\n\t\tthis.arr = [];\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/RemoteBulletHandler.js?");

/***/ }),

/***/ "./src/RemoteController.js":
/*!*********************************!*\
  !*** ./src/RemoteController.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RemoteController\": () => (/* binding */ RemoteController)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _RemotePlayer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RemotePlayer.js */ \"./src/RemotePlayer.js\");\n\r\n\r\n\r\nclass RemoteController {\r\n\t//{scene:scene, worldScale:worldScale};\r\n\tconstructor(OBJ) {\r\n\t\tthis.killCount = 0;\r\n\t\tthis.remotePlayer;\r\n\t\tthis.id = OBJ.id;\r\n\t\tthis.name = this.id;\r\n\t\tthis.playing = false;\r\n\t\tthis.dom = appGlobal.globalHelperFunctions.initPlayerDom({id:this.id, isRemote:true, killCount:this.killCount});\r\n\t\t\r\n\t}\r\n\tupdate(){\r\n\t\tif(this.remotePlayer!=null){\r\n\t\t\tthis.remotePlayer.update();\r\n\t\t}\r\n\t}\r\n\tupdateRemote(OBJ){\r\n\t\tif(this.remotePlayer != null){\r\n\t\t\tthis.remotePlayer.updateRemote(OBJ);\r\n\t\t}\r\n\t\tthis.killCount = OBJ.killCount;\r\n\t\tthis.name = OBJ.name;\r\n\t\tappGlobal.globalHelperFunctions.updatePlayerDom({dom:this.dom, killCount:this.killCount, id:this.name});\r\n\t}\r\n\r\n\tinitRemotePlayer(OBJ){\r\n\t\tthis.remotePlayer = new _RemotePlayer_js__WEBPACK_IMPORTED_MODULE_1__.RemotePlayer({id:this.id, meshName:OBJ.meshName, movement:OBJ.movement, skin:OBJ.skin}); \r\n\t\tthis.playing = true;\r\n\t}\r\n\tkillRemotePlayer(){\r\n\t\tthis.playing = false;\r\n\t\tif(this.remotePlayer!=null){\r\n\t\t\tthis.remotePlayer.kill(); \r\n\t\t\tthis.remotePlayer = null;\r\n\t\t}\r\n\t}\r\n\tkill(){\r\n\t\tif(this.remotePlayer!=null){\r\n\t\t\tthis.remotePlayer.kill(); \r\n\t\t\tthis.remotePlayer = null;\r\n\t\t}\r\n\t\tappGlobal.globalHelperFunctions.killPlayerDom(this.dom);\r\n\r\n\t}\r\n\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/RemoteController.js?");

/***/ }),

/***/ "./src/RemotePlayer.js":
/*!*****************************!*\
  !*** ./src/RemotePlayer.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RemotePlayer\": () => (/* binding */ RemotePlayer)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ParticleEmitter.js */ \"./src/ParticleEmitter.js\");\n/* harmony import */ var _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CharacterAnimationHandler.js */ \"./src/CharacterAnimationHandler.js\");\n/* harmony import */ var _scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scripts/jsm/utils/SkeletonUtils.js */ \"./src/scripts/jsm/utils/SkeletonUtils.js\");\n/* harmony import */ var _RemoteAbilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RemoteAbilities.js */ \"./src/RemoteAbilities.js\");\n/* harmony import */ var _SkinsHandler_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SkinsHandler.js */ \"./src/SkinsHandler.js\");\n\n\n\n\n\n\n\n\nclass RemotePlayer {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\t\tconst self = this;\n\t\tconst geo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 2, 2.5, 1.5 );\n\t\tconst headGeo = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(1.4/4,1.6/4,1.4/4);\n\t\tconst headGeo1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(1.4,1.6,1.4);\n\t\t\n\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({    color:0x00ff00, visible:false});\n\t\tconst headMat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:0xff0000, visible:false});\n\t\tconst headMat1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:0x0000ff,visible:false});\n\t\tthis.offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.crouch = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.characterHolder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.skin = OBJ.skin;\n\n\t\tthis.character = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.clone)( self.getModelByName(\"body-\"+OBJ.meshName).scene );\n\n\t\t//const ar = [];\n     //  \tthis.character.traverse( function ( obj ) {\n\n\t    //     if(obj.isMesh || obj.isSkinnedMesh){\n\t    //       if(obj.material !=null ){\n\t    //       \tif(!self.checkIsInArr(ar, obj.material.name)){\n\t    //       \t\tar.push(obj.material.name);\n\t\t\t\t\t// console.log(\"{\");\n\t\t\t\t\t// console.log(\"name:'\"+obj.material.name+\"',\");\n\t\t\t\t\t// console.log(\"color:'\"+obj.material.color.getHexString()+\"',\");\n\t\t\t\t\t// console.log(\"emissive:'\"+obj.material.emissive.getHexString ()+\"'\");\n\t\t\t\t\t// console.log(\"}\");\n\t    //         }\n\t    //       }\n\t    //     }\n\n     //  \t});\n\n\t\tthis.movement  = (0,_scripts_jsm_utils_SkeletonUtils_js__WEBPACK_IMPORTED_MODULE_3__.clone)( self.getModelByName(OBJ.meshName+\"-\"+OBJ.movement).scene );\n\t\t\n\t\tappGlobal.skinsHandler.changeSwatchOnMesh({meshes:[this.character, this.movement], name:OBJ.meshName},this.skin);\n\n\t\tthis.boostTip;\n\t\tthis.boostTexture = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().load( './assets/textures/boost.png' );\n\t\tthis.boostTexture.wrapS = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.boostTexture.wrapT =  Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.boostTexture.magFilter = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()); \n\n\t\tthis.movement.traverse( function ( obj ) {\n\t\t\tif(obj.name.includes(\"boost-part\")){\n\t\t\t\tobj.material.transparent = true;\n\t\t\t\tobj.material.map = self.boostTexture;\n\t\t\t\tobj.material.emissiveMap = self.boostTexture;\n\t\t\t\tobj.material.color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0x000000);\n\t\t\t\tobj.material.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0xffbf80);\n\t\t\t\tself.boostTip = obj;\n\t\t\t}\n\t\t});\n\t\tconst s = 3.25;\n\t\tthis.character.position.z = this.movement.position.z = -.2;\n\t\tthis.character.scale.set(s,s,s);\n\t\tthis.movement.scale.set(s,s,s);\n\t\t\n\t\tappGlobal.characterOutlineMeshes.push(this.character);\n\t\tappGlobal.characterOutlineMeshes.push(this.movement);\n\t\tappGlobal.scene.characterOutlinePass.selectedObjects = appGlobal.characterOutlineMeshes;\n\t\t\n\t\tthis.character.position.y = this.movement.position.y = -1.25;\n\t\tthis.characterHolder.rotation.y += Math.PI;\n\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(geo,mat);\n\t\tthis.mesh.position.y = -.25;\n\t\tthis.head = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(headGeo, headMat);\n\t\tthis.head.position.y = .1;\n\t\t\n\t\t\n\t\tthis.offset.add(this.crouch);\n\t\t//this.crouch.add(this.mesh, this.head, this.characterHolder);\n\t\tthis.crouch.add(this.mesh, this.characterHolder);\n\t\tthis.headBone = this.character.getObjectByName( 'head' );\n\t\tthis.headBone.add(this.head)\n\t\tthis.characterHolder.add(this.character, this.movement);\n\t\tthis.hitScanArrayIndex = appGlobal.hitScanArray.length;\n\t\t\n\t\tappGlobal.hitScanArray.push(this.mesh, this.head);\n\t\tappGlobal.scene.add(this.offset);\n\n\t\tthis.targPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.targRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.slerpRot = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.killed = false;\n\t\tthis.start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.end.position.y = 0;\n\t\tthis.headBone.add(this.end);\n\n\t\tthis.head1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(headGeo, headMat1);\n\t\tthis.end.add(this.head1)\n\t\t\n\t\tthis.endWorldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.offset.add(this.start);\n\t\t//this.offset.add(this.end);\n\t\tthis.id = OBJ.id;\n\t\tthis.mesh.playerId = this.id;\n\t\tthis.head.playerId = this.id;\n\t\tthis.mesh.isHead = false;\n\t\tthis.head.isHead = true;\n\t\t//this.radius = .35;\n\t\tthis.radius = .45;\n\n\t\tthis.shouldDoBoostParticle = false;\n\t\t\n\t\tthis.boostParticle = new _ParticleEmitter_js__WEBPACK_IMPORTED_MODULE_1__.ParticleEmitter(appGlobal.particles.boost);\n\t\tconst arr = [this.character, this.movement];\n\t\tthis.cah = new _CharacterAnimationHandler_js__WEBPACK_IMPORTED_MODULE_2__.CharacterAnimationHandler({meshes:arr, animations:appGlobal.loadObjs[0].model.animations, name:OBJ.meshName});\n\t\tthis.cah.initAnimation();\n\t\tthis.remoteAbilites = new _RemoteAbilities_js__WEBPACK_IMPORTED_MODULE_4__.RemoteAbilities({remotePlayer:this});\n\t\tthis.spines = [this.character.getObjectByName( 'spine_01' ), this.movement.getObjectByName( 'spine_01' )] \n\t\t\n\t\tlet name = \"tip-\" + OBJ.meshName;\n\t\tthis.tipObject = this.character.getObjectByName(name);\n\t\tthis.tipObject.visible = false;\n\t\t\n\t\tthis.tipPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.spineRotTarg = 0;\n\t\tthis.shootTimeout;\n\n\t\t// this.blastTexture = new TextureLoader().load( './assets/textures/shoot-2.png' );\n\t\t// this.tipObject.material.transparent = true;\n\t\t// this.tipObject.material.opacity = 1;\n\t\tthis.tipObject.material.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0xffad2b);\n\t\t//this.tipObject.material.map = this.blastTexture;\n\n\t\tthis.stepsTimeout;\n\t\tthis.playerMovingForWalkSound = false;\n\t\tthis.canDoWalkSound = true;\n\t\tthis.currStep = 0;\n\t\tthis.rotMod = 0;\n\t\tthis.boostTipWorldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\t\n\t\t\n\t}\n\n\tcheckIsInArr(arr,s){\n\t\tfor(let i = 0; i<arr.length; i++){\n\t\t\tif(arr[i]==s){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetModelByName(NAME){\n\t\tfor(let i = 0; i<appGlobal.loadObjs.length;i++){\n\t\t\tif(appGlobal.loadObjs[i].name==NAME)\n\t\t\t\treturn appGlobal.loadObjs[i].model;\t\n\t\t}\n\t}\n\n\tupdate(){\n\t\tif(!this.killed){\n\n\t\t\tthis.rotMod += (appGlobal.deltaTime*400);\n\t\t\tif(Math.floor(this.rotMod%10) == 0){\n\t\t\t\tthis.boostTexture.offset.x += .2+Math.random()*.35;\n\t\t\t}\n\n\t\t\tthis.boostTip.visible = this.shouldDoBoostParticle;\n\n\t\t\tthis.tipObject.getWorldPosition(this.tipPos);\n\t\t\t\n\t\t\tthis.offset.position.lerp(this.targPos, .2);\n\t\t\tthis.slerpRot.slerp(this.targRot, .2);\n\t\t\t\n\t\t\tthis.offset.quaternion.copy(this.slerpRot);\n\t\t\t//console.log(this.slerpRot);\n\n\t\t\tthis.end.getWorldPosition(this.endWorldPosition);\n\t\t\tfor(let i = 0; i<this.spines.length; i++){\n\t\t\t\tthis.spines[i].rotation.z += ((this.spineRotTarg)-this.spines[i].rotation.z)*(160*appGlobal.deltaTime); \n\t\t\t}\n\t\t\t\n\t\t\tif(this.shouldDoBoostParticle){\n\n\t\t\t\t//this.boostParticle.obj.pos.copy(this.offset.position);\n\t\t\t\tthis.boostTip.getWorldPosition(this.boostTipWorldPosition);\n\t\t\t\tthis.boostParticle.obj.pos.copy(this.boostTipWorldPosition);\n\t\t\t\tthis.boostParticle.emit();\n\t\t\t}\n\n\t\t\tthis.boostParticle.update();\n\t\t\t\n\t\t\tif(this.playerMovingForWalkSound){\n\t\t\t\tif(this.canDoWalkSound){\n\t\t\t\t\tthis.initWalkSound();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.cah.update();\n\t\t\tthis.remoteAbilites.update();\n\t\t\n\t\t}\n\t}\n\n\tinitWalkSound(){\n\t\tthis.canDoWalkSound = false;\n\t\tif(appGlobal.controller!=null){\n\t\t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(this.targPos);\n\t\t\tthis.currStep ++;\n\t\t\tthis.currStep = this.currStep%2;\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"step-\"+this.currStep, dist:dist});\n\t\t}\n\n\t\tif(this.stepsTimeout != null){\n\t\t\tclearInterval(this.stepsTimeout);\n\t\t}\n\t\t\n\t\tconst self = this;\n\t\tthis.stepsTimeout = setInterval(function(){\n\t\t\tself.canDoWalkSound = true;\n\t\t},330);\n\t}\n\n\n\thandleRemoteAbility(OBJ){\n\t\tthis.remoteAbilites.updateRemote(OBJ);\n\t}\n\n\tupdateRemote(OBJ){\n\t\t//console.log(OBJ);\n\t\tthis.targPos.set(OBJ.pos.x,OBJ.pos.y, OBJ.pos.z);\n\t\tthis.targRot.set(OBJ.rot._x, OBJ.rot._y, OBJ.rot._z, OBJ.rot._w);\n\t\tthis.spineRotTarg = OBJ.spineRot;\n\t\tif(OBJ.animationObject.boost && !this.shouldDoBoostParticle){\n\t\t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound( this.targPos );\n\t\t\tappGlobal.soundHandler.playSoundByName({name:\"boost\", dist:dist});\n\t\t}\n\t\tthis.shouldDoBoostParticle = OBJ.animationObject.boost;\n\t\tthis.cah.updateRemote(OBJ.animationObject);\n\t\tconst moving = (Math.abs(OBJ.animationObject.xAxis) > 0 || Math.abs(OBJ.animationObject.yAxis)>0); \n\t\t\n\t\tif(moving && !OBJ.animationObject.jump){\n\t\t\tthis.playerMovingForWalkSound = true;\n\t\t}else{\n\t\t\tthis.playerMovingForWalkSound = false;\n\t\t}\n  \t}\n\n  \thandleRemoteShoot(){\n  \t\tthis.tipObject.visible = true;\n  \t\tthis.tipObject.rotation.z+=(.4+Math.random()*Math.PI)\n  \t\tconst self = this;\n  \t\tif(this.shootTimeout != null){\n  \t\t\tclearTimeout(this.shootTimeout);\n  \t\t}\n  \t\tthis.shootTimeout = setTimeout(function(){\n  \t\t\tself.tipObject.visible = false;\n  \t\t}, 100);\n\n  \t}\n\n  \tkill(){\n  \t\tthis.remoteAbilites.kill();\n  \t\tthis.shouldDoBoostParticle = false;\n  \t\tthis.killed = true;\n  \t\t\n\n\t\tappGlobal.globalHelperFunctions.tearDownObject(this.character);\n\t\t\n\t\tthis.characterHolder.remove(this.character);\n  \t\tthis.crouch.remove(this.mesh);\n  \t\tthis.headBone.remove(this.head,this.end);\n  \t\tappGlobal.globalHelperFunctions.removeFromHitscanArray(this.mesh);\n  \t\tappGlobal.globalHelperFunctions.removeFromHitscanArray(this.head);\n  \t\tthis.offset.remove(this.start, this.crouch, this.characterHolder);\n  \t\tthis.boostParticle.kill();\n  \t\tappGlobal.scene.remove(this.offset);\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/RemotePlayer.js?");

/***/ }),

/***/ "./src/RocketBullet.js":
/*!*****************************!*\
  !*** ./src/RocketBullet.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RocketBullet\": () => (/* binding */ RocketBullet)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass RocketBullet {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ, ISLOCAL) {\n\t\t\n\t\tthis.isLocal = ISLOCAL;\n\t\tthis.damage = OBJ.damage;\n\t\tthis.id = OBJ.id;\n\t\t//this.gravity = OBJ.gravity;\n\t\t// this.vector1 = new Vector3();\n\t\t// this.vector2 = new Vector3();\n\t\t// this.vector3 = new Vector3();\n\t\t\n\t\tthis.alivetime = 2000;\n\t\t\n\t\tconst rad = .2;\n\t\tconst sphereGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( rad, 6, 6 );\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff, roughness: 0.8, metalness: 0.5 } );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sphereGeometry, sphereMaterial );\n\t\tthis.mesh.castShadow = true;\n\t\tthis.receiveShadow = true;\n\t\tappGlobal.scene.add( this.mesh );\n\n\t\t//spheres.push( { mesh: sphere, collider: new THREE.Sphere( new THREE.Vector3( 0, 0, 0 ), SPHERE_RADIUS ), velocity: new THREE.Vector3() } );\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), rad );\n\t\tconst impulse = OBJ.impulse ;\n\t\tthis.velocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.dir).multiplyScalar( impulse );\n\t\tthis.collider.center.copy( OBJ.pos );\n\t\tthis.knockParams = OBJ.knockParams;\n\t\t//this.velocity.addScaledVector( this.player.playerVelocity, 2 );\n\t\tthis.contactParticle = appGlobal.particles.explosion;\n\t\tthis.killed = false;\n\t\tconst self = this;\n\t\tthis.startPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( OBJ.pos );\n\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 2000)\n\t\t//sphereIdx = ( sphereIdx + 1 ) % spheres.length;\n\t}\n\t\n\tupdate(){\n\t\tif(!this.killed){\n\t\t\tthis.playerSphereCollision();\n\t\t\tthis.handlePhysics();\n\t\t}\n\t}\n\n\thandlePhysics(){\n\n\t\tthis.collider.center.addScaledVector( this.velocity, window.appGlobal.deltaTime );\n\n\t\t//const g = new Vector3().copy(this.collider.center).sub(new Vector3()).normalize();\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst s1 = this;\n\t\t\tconst s2 = appGlobal.worlds[i];\n\n\t\t\tconst d2 = s1.collider.center.distanceToSquared( s2.collider.center );\n\t\t\tconst r = s1.collider.radius + s2.collider.radius;\n\t\t\tconst r2 = r * r;\n\n\t\t\tif ( d2 < r2 ) {\n\t\t\t\tthis.kill(false);\n\t\t\t}\n\t\t}\n\n\t\tthis.mesh.position.copy( this.collider.center );\n\n\t}\n\t\n\tkill(hitPlayer){\n\t\t\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tclearTimeout(this.killTimeout);\n\n\t\t\tif(this.isLocal){\n\t\t\t\tthis.knockParams.pos = this.mesh.position;\n\t\t\t\t\n\t\t\t\tif(!hitPlayer)\n\t\t\t\t\tappGlobal.globalHelperFunctions.knockPlayer(this.knockParams);\n\t\t\t\t\n\t\t\t\tconst arr = appGlobal.globalHelperFunctions.splashDamage(this.knockParams);\n\t\t\t\tif(arr.length>0){\n\t\t\t\t\tfor(let i = 0; i<arr.length; i++){\n\t\t\t\t\t\tconst self = this;\n\t\t\t\t\t\tif(window.socket!=null){\n\t\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t  \t\tid: arr[i].id,\n\t\t\t\t\t\t  \t\tdamage:self.damage*arr[i].damageMult,\n\t\t\t\t\t\t  \t\tposition:this.startPos,\n\t\t\t\t\t\t  \t\theadShot:false,\n\t\t\t\t\t\t  \t\tfromDamageId:socket.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsocket.emit('doDamage', obj);\n\t\t\t\t\t\t\tappGlobal.globalHelperFunctions.playerDoDamage(obj);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tappGlobal.remotePlayers[arr[i].id].receiveDamage({headShot:false, position:this.mesh.position, health:this.damage})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.contactParticle.pos = this.mesh.position;\n\t\t\tappGlobal.particleHandler.createEmitter(this.contactParticle);\n\n    \t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(this.collider.center);\n    \t\tappGlobal.soundHandler.playSoundByName({name:this.contactParticle.sound, dist:dist});\n\t    \t\n\t\t\tthis.killed = true;\n\t\t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\twindow.appGlobal.scene.remove(this.mesh);\n\t\t}\n\t}\n\n\tplayerSphereCollision() {\n\t\tconst id = appGlobal.globalHelperFunctions.playerSphereCollision(this.collider, this.id)\n\t\tif(id != null){\n\t\t\tthis.kill(true);\n\t\t}\n\t}\n\n\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/RocketBullet.js?");

/***/ }),

/***/ "./src/Servers.js":
/*!************************!*\
  !*** ./src/Servers.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Servers\": () => (/* binding */ Servers)\n/* harmony export */ });\nclass Servers {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    const self = this;\r\n    //self.killCookies();\r\n    //this.serversHolder = document.getElementById(\"servers\");\r\n    //console.log(this.serversHolder)\r\n    this.maxPlayers = 8;\r\n    this.domArray = [];\r\n    \r\n    for(let i = 0; i<OBJ.info.length; i++){\r\n      appGlobal.socketRooms.push(OBJ.info[i].name);\r\n      const dom = document.createElement(\"div\");\r\n      dom.className = \"servers-sub\" ;\r\n      \r\n      const name = document.createElement(\"div\");\r\n      name.className = \"servers-left\";\r\n      name.innerHTML = OBJ.info[i].name;\r\n      \r\n\r\n      const amt = document.createElement(\"div\");\r\n      amt.className = \"servers-right\";\r\n      amt.innerHTML = OBJ.info[i].currPlayerAmount +\" / \"+this.maxPlayers ;\r\n\r\n      const clear = document.createElement(\"div\");\r\n      clear.className = \"clear\";\r\n      \r\n      dom.append(name);\r\n      dom.append(amt);\r\n      dom.append(clear);\r\n      document.getElementById(\"servers-center\").prepend(dom);\r\n      dom.addEventListener(\"click\",function(){\r\n        socket.emit(\"switchRooms\", {id:socket.id, gameToJoin:OBJ.info[i].name, gameToLeave:appGlobal.roomName});\r\n        document.getElementById(\"servers\").style.display = \"none\";\r\n      })\r\n      this.domArray.push({dom:dom, amtDom:amt, nameDom:name, name:OBJ.info[i].name});\r\n    }\r\n    document.getElementById(\"servers-btn\").addEventListener(\"click\", function (){\r\n      document.getElementById(\"servers\").style.display = \"block\";\r\n    });\r\n    document.getElementById(\"close-servers-btn\").addEventListener(\"click\", function (){\r\n      document.getElementById(\"servers\").style.display = \"none\";\r\n    });\r\n    \r\n  }\r\n\r\n  updateServerInfo(OBJ){\r\n    for(let i = 0; i<this.domArray.length; i++){ \r\n       this.domArray[i].dom.className = \"servers-sub\";\r\n    }\r\n    for(let i = 0; i<OBJ.info.length; i++){\r\n      const domToUpdate = this.getAmountDomFromName( OBJ.info[i].name );\r\n      domToUpdate.amt.innerHTML =  OBJ.info[i].currPlayerAmount +\" / \"+this.maxPlayers;\r\n      if(OBJ.info[i].name == appGlobal.roomName){\r\n        domToUpdate.dom.className = \"server-active\";\r\n      }\r\n    }  \r\n\r\n      \r\n  }\r\n\r\n  getAmountDomFromName(name){\r\n    for(let i = 0; i<this.domArray.length; i++){\r\n      if(this.domArray[i].name == name){\r\n        return {amt:this.domArray[i].amtDom, dom:this.domArray[i].dom};\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/Servers.js?");

/***/ }),

/***/ "./src/Settings.js":
/*!*************************!*\
  !*** ./src/Settings.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Settings\": () => (/* binding */ Settings)\n/* harmony export */ });\nclass Settings {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    const self = this;\r\n    //self.killCookies();\r\n    this.localCookies = document.cookie;\r\n    this.localParams = window.settingsParams;\r\n    \r\n    if(this.localCookies == null || this.localCookies == \"\"){\r\n      self.updateCookies();\r\n    }\r\n    self.parseCookies();\r\n\r\n\r\n    if(this.localParams[\"showInstructions\"] == \"true\"){\r\n      document.getElementById(\"instructions-modal\").style.display = \"block\";\r\n    }\r\n\r\n    document.getElementById(\"settings-btn\").addEventListener(\"click\", function (){\r\n      document.getElementById(\"settings\").style.display = \"block\";\r\n      //document.getElementById(\"settings-btn\").style.display = \"none\";\r\n    });\r\n    document.getElementById(\"close-settings-btn\").addEventListener(\"click\", function (){\r\n      //document.getElementById(\"settings-btn\").style.display = \"block\";\r\n      document.getElementById(\"settings\").style.display = \"none\";\r\n    });\r\n    \r\n    document.getElementById('mouse-sens').addEventListener('change', function(e){\r\n      let fnl = parseFloat(e.target.value); \r\n      if(fnl>3)\r\n        fnl = 3\r\n      if(fnl<0.01)\r\n        fnl = 0.01;\r\n      window.settingsParams[\"mouseSens\"] = fnl;\r\n      self.localParams[\"mouseSens\"]  = fnl;\r\n      self.updateCookies();\r\n    });\r\n    document.getElementById('settings-vol').addEventListener('change', function(e){\r\n      let fnl = parseFloat(e.target.value); \r\n      if(fnl>1.5)\r\n        fnl = 1.5\r\n      if(fnl<0)\r\n        fnl = 0;\r\n\r\n      window.settingsParams[\"volume\"] = fnl;\r\n      self.localParams[\"volume\"] = fnl;\r\n      self.updateCookies();\r\n    });\r\n    document.getElementById('cross-hair-col').addEventListener('change', function(e){\r\n      window.settingsParams[\"crossHairColor\"] = \"\"+e.target.value+\"\";\r\n      document.getElementById('recticle').style.background = \"#\"+window.settingsParams[\"crossHairColor\"]+\"\"; \r\n      self.updateCookies();\r\n    });\r\n    document.getElementById('settings-ads-sense-mult').addEventListener('change', function(e){\r\n      let fnl = parseFloat(e.target.value); \r\n      if(fnl>3)\r\n        fnl = 3\r\n      if(fnl<0.01)\r\n        fnl = 0.01;\r\n      window.settingsParams[\"adsMouseSenseMult\"] = fnl;\r\n      self.localParams[\"adsMouseSenseMult\"] = fnl;\r\n      self.updateCookies();\r\n    });\r\n    document.getElementById('gamepad-checkbox').addEventListener('change', function(e){\r\n      let str = \"false\";\r\n      if(e.target.checked){\r\n        str = \"true\";\r\n      }\r\n      \r\n      window.settingsParams[\"gamePad\"] = str;      \r\n      self.localParams[\"gamePad\"] = str;\r\n      \r\n      appGlobal.gamePad.canDiscoverGamePad = e.target.checked;\r\n      \r\n      self.updateCookies();\r\n    });\r\n    \r\n    self.setInputFilter(document.getElementById(\"settings-ads-sense-mult\"), function(value) {\r\n      return /^-?\\d*[.]?\\d*$/.test(value); \r\n    });\r\n    self.setInputFilter(document.getElementById(\"mouse-sens\"), function(value) {\r\n      return /^-?\\d*[.]?\\d*$/.test(value); \r\n    });\r\n    self.setInputFilter(document.getElementById(\"settings-vol\"), function(value) {\r\n      return /^-?\\d*[.]?\\d*$/.test(value); \r\n    });\r\n    self.setInputFilter(document.getElementById(\"cross-hair-col\"), function(value) {\r\n      return /^[0-9a-f]*$/i.test(value) && (value.length <= 6); \r\n    });\r\n    \r\n  }\r\n  updateGamePad(enable){\r\n    let str = \"false\";\r\n    if(enable){\r\n      str = \"true\";\r\n    }\r\n    window.settingsParams[\"gamePad\"] = str;\r\n    this.localParams[\"gamePad\"] = str;\r\n    this.updateCookies();\r\n    this.updateDom(\"gamePad\");\r\n  }\r\n\r\n  handleInstructionsClose(){\r\n      window.settingsParams[\"showInstructions\"] = \"false\";      \r\n      this.localParams[\"showInstructions\"] = \"false\";\r\n      this.updateCookies();\r\n  }\r\n\r\n  updateCookies(){\r\n    \r\n    for (const key in window.settingsParams) {\r\n      let str = `${key}=${window.settingsParams[key]}`;\r\n      str += \";\";\r\n      str += \"path=/\";\r\n      document.cookie = str;\r\n    }\r\n    \r\n    this.localCookies = document.cookie;\r\n    \r\n  }\r\n  parseCookies(){\r\n    //console.log(document.cookie);\r\n    const params = document.cookie.split(';');\r\n    //console.log(params.length)\r\n    for(let i = 0; i<params.length; i++){\r\n      const spl = params[i].split(\"=\");\r\n      const left = spl[0].replace(/\\s/g, '');\r\n      const right = spl[1].replace(/\\s/g, '');\r\n      this.localParams[left] = right;\r\n      this.updateDom(left);\r\n    }\r\n  }\r\n  updateDom(key){\r\n    switch(key){\r\n      case \"mouseSens\":\r\n        document.getElementById('mouse-sens').placeholder = this.localParams[\"mouseSens\"]; \r\n        window.settingsParams[\"mouseSens\"] = this.localParams[\"mouseSens\"];\r\n      break;\r\n      case \"volume\":\r\n        document.getElementById('settings-vol').placeholder = this.localParams[\"volume\"]; \r\n        window.settingsParams[\"volume\"] = this.localParams[\"volume\"];\r\n      break;\r\n      case \"crossHairColor\":\r\n        document.getElementById('recticle').style.background = \"#\"+this.localParams[\"crossHairColor\"]+\"\"; \r\n        document.getElementById('cross-hair-col').placeholder = this.localParams[\"crossHairColor\"]; \r\n        window.settingsParams[\"crossHairColor\"] = this.localParams[\"crossHairColor\"];\r\n      break;\r\n      case \"adsMouseSenseMult\":\r\n        document.getElementById('settings-ads-sense-mult').placeholder = this.localParams[\"adsMouseSenseMult\"]; \r\n        window.settingsParams[\"adsMouseSenseMult\"] = this.localParams[\"adsMouseSenseMult\"];\r\n      break;\r\n      case \"gamePad\":\r\n        document.getElementById('gamepad-checkbox').checked = this.localParams[\"gamePad\"]===\"true\"; \r\n        window.settingsParams[\"gamePad\"] = this.localParams[\"gamePad\"];\r\n      break;\r\n      case \"showInstructions\":\r\n        //document.getElementById('gamepad-checkbox').checked = this.localParams[\"gamePad\"]===\"true\"; \r\n        window.settingsParams[\"showInstructions\"] = this.localParams[\"showInstructions\"];\r\n      break;\r\n    }\r\n  }\r\n        \r\n\r\n  killCookies(){\r\n    document.cookie = \"mouseSens=1; path=/\";\r\n    document.cookie = \"volume=1; path=/\";\r\n    document.cookie = \"crossHairColor=fff; path=/\";\r\n    document.cookie = \"adsMouseSenseMult=1; path=/\";\r\n    document.cookie = \"gamePad=false; path=/\";\r\n    document.cookie = \"showInstructions=true; path=/\";\r\n  }\r\n\r\n  // Restricts input for the given textbox to the given inputFilter.\r\n  setInputFilter(textbox, inputFilter) {\r\n    [\"input\", \"keydown\", \"keyup\", \"mousedown\", \"mouseup\", \"select\", \"contextmenu\", \"drop\"].forEach(function(event) {\r\n      textbox.addEventListener(event, function() {\r\n        if (inputFilter(this.value)) {\r\n          this.oldValue = this.value;\r\n          this.oldSelectionStart = this.selectionStart;\r\n          this.oldSelectionEnd = this.selectionEnd;\r\n        } else if (this.hasOwnProperty(\"oldValue\")) {\r\n          this.value = this.oldValue;\r\n          this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n        } else {\r\n          this.value = \"\";\r\n        }\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/Settings.js?");

/***/ }),

/***/ "./src/Skin.js":
/*!*********************!*\
  !*** ./src/Skin.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Skin\": () => (/* binding */ Skin)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\r\n\r\n\r\nclass Skin {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    const self = this;\r\n   \r\n  }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/Skin.js?");

/***/ }),

/***/ "./src/SkinsHandler.js":
/*!*****************************!*\
  !*** ./src/SkinsHandler.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SkinsHandler\": () => (/* binding */ SkinsHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Skin_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Skin.js */ \"./src/Skin.js\");\n/* harmony import */ var _Swatches_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Swatches.js */ \"./src/Swatches.js\");\n\r\n\r\n\r\n\r\nclass SkinsHandler {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n    const self = this;\r\n    this.swatches = new _Swatches_js__WEBPACK_IMPORTED_MODULE_2__.Swatches({});\r\n    this.skin = new _Skin_js__WEBPACK_IMPORTED_MODULE_1__.Skin({});\r\n    this.doms = [];\r\n    this.meshes = [];\r\n    this.parentDom = document.getElementById(\"player-skins\");\r\n    let c = \"skins-non-interactive\";\r\n    //if(window.logged.in){\r\n      c = \"skins-interactive\";\r\n    //}\r\n    this.currentSkin = \"default\";\r\n    this.parentDom.className = c;\r\n\r\n    for(let i = 0; i<this.swatches.arr.length; i++){\r\n        this.doms.push(new SkinsDom({\r\n          index:i, \r\n          character:this.swatches.arr[i].name, \r\n          arr:this.swatches.arr[i].swatches, \r\n          logged:window.logged.in, \r\n          parent:this.parentDom\r\n        }))     \r\n    }\r\n\r\n  }\r\n\r\n  changeSwatch(OBJ){\r\n    this.currentSkin = OBJ.swatch;\r\n    this.changeSwatchOnMesh( this.getSendObj(OBJ), OBJ.swatch );\r\n  }\r\n\r\n  addMeshes(OBJ){\r\n    this.meshes.push(OBJ);\r\n  }\r\n\r\n  getCurrentSkinOnCharacter(character){\r\n    for(let i = 0; i < this.doms.length; i++){\r\n      if(character == this.doms[i].character){\r\n        for(let k = 0; k< this.doms[i].buttons.length; k++){\r\n          if(this.doms[i].buttons[k].active)\r\n            return this.doms[i].buttons[k].swatch;  \r\n        }\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n  getSwatchArrayFromSkinName(character, name){\r\n    for(let i = 0; i < this.doms.length; i++){\r\n      if(character == this.doms[i].character){\r\n        this.swatches\r\n      }\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  getSendObj(OBJ){\r\n    for(let i = 0;i<this.meshes.length; i++){\r\n      if(this.meshes[i].name == OBJ.character)\r\n        return this.meshes[i];\r\n    }\r\n  }\r\n\r\n  playerSelectSwitchCharacter(OBJ){\r\n    const dom = this.getDomFromName(OBJ.class);\r\n    if(dom!=null){\r\n      this.hideAllParentDoms();\r\n      dom.toggleVis(true);\r\n    }\r\n  }\r\n\r\n  hideAllParentDoms(){\r\n    for(let i =0;i<this.doms.length;i++){\r\n      this.doms[i].toggleVis(false);\r\n    }\r\n  }\r\n  getDomFromName(className){\r\n    for(let i = 0; i < this.doms.length; i++){\r\n      if(className == this.doms[i].character){\r\n        return this.doms[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  \r\n  changeSwatchOnMesh(OBJ, swatch){\r\n    //this.swatchObj = OBJ.swatches.getSwatchByName(OBJ.character, OBJ.name);\r\n    const self = this;\r\n\r\n    const swatchObj = this.swatches.getSwatchByName(OBJ.name, swatch);\r\n\r\n    for(let i = 0; i<OBJ.meshes.length; i++){\r\n      OBJ.meshes[i].traverse( function ( obj ) {\r\n        if(obj.isMesh || obj.isSkinnedMesh){\r\n          switch(swatch){\r\n            case \"normal\":\r\n\r\n              if(obj.material.name != \"directional-boost\" && !obj.material.name.includes(\"blast\") && obj.dontUpdateMaterial==null){\r\n                const mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({\r\n                    side:obj.material.side, \r\n                    name:obj.material.name\r\n                });\r\n                \r\n                obj.material.dispose();\r\n                obj.material = mat;\r\n                obj.material.roughness = obj.material.roughness;\r\n                obj.material.metalness = obj.material.metalness;\r\n\r\n              }\r\n            break;\r\n            default:\r\n              if(obj.material !=null ){\r\n                const newColor = self.swatches.checkIfMaterialMatchesSwatch(obj.material, swatchObj.array);\r\n                if( newColor != null ){\r\n                  \r\n                  const c = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set(\"#\"+newColor.color);\r\n                  const e = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set(\"#\"+newColor.emissive);\r\n                  let roughness = .5;\r\n                  let metalness = 0;\r\n                  if(OBJ.name==\"launcher\"){\r\n                    metalness = 1;\r\n                  }\r\n                  if(OBJ.name ==\"sniper\"){\r\n                    roughness = 0.05;\r\n                  }\r\n                  const mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({\r\n                      side:obj.material.side, \r\n                      color:c, \r\n                      emissive:e, \r\n                      metalness:metalness,\r\n                      roughness:roughness,\r\n                      name:obj.material.name\r\n                  });\r\n\r\n                  if(swatch==\"wireframe\"){\r\n                    mat.wireframe=true;\r\n                  }\r\n\r\n                  obj.material.dispose();\r\n                  obj.material = mat;\r\n                  obj.material.needsUpdate = true;\r\n                }\r\n              }\r\n            break;\r\n          }\r\n          \r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\n\r\n\r\nclass SkinsDom{\r\n\r\n  constructor(OBJ){\r\n    const self = this;\r\n    this.buttons = [];\r\n    this.parent = document.createElement(\"div\");\r\n    if(OBJ.index != 0){\r\n      this.parent.style.display = \"none\";\r\n    }\r\n\r\n    OBJ.parent.append(this.parent);\r\n    \r\n    this.character = OBJ.character;\r\n\r\n    for(let i = 0;i<OBJ.arr.length; i++){\r\n      const btn = new SkinButton(OBJ, i, self, this.parent);\r\n      this.buttons.push(btn);\r\n      //}\r\n    }\r\n    \r\n  }\r\n  toggleVis(show){\r\n    if(!show){\r\n      this.parent.style.display = \"none\";\r\n    }else{\r\n      this.parent.style.display = \"block\";\r\n    }\r\n  }\r\n  makeAllButtonsNonActive(){\r\n    for(let i = 0; i<this.buttons.length; i++){\r\n      this.buttons[i].active = false;\r\n      this.buttons[i].btn.className = \"swatch-btn\";\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass SkinButton{\r\n  constructor(OBJ, INDEX, PARENT, DOM){\r\n      this.character = OBJ.character\r\n      this.parent = PARENT;\r\n      const self = this;\r\n\r\n      this.active = false;\r\n      if(INDEX == 0)\r\n        this.active = true;\r\n\r\n      this.index = INDEX;\r\n      this.btn = document.createElement(\"div\");\r\n      this.btn.className = \"swatch-btn\";\r\n      //btn.style.backgroundColor = OBJ.arr[i].icon;\r\n      DOM.append(this.btn);\r\n      this.swatch = OBJ.arr[this.index].name;\r\n      \r\n      if(this.index == 0){\r\n        this.btn.className = \"swatch-btn-active\"\r\n      }\r\n      this.btn.style.backgroundImage = \"url(/assets/swatches/\"+this.character+\"/\"+OBJ.arr[this.index].icon+\".jpg)\";\r\n      //if(OBJ.logged){\r\n        \r\n      this.btn.addEventListener(\"click\", function(){\r\n        appGlobal.skinsHandler.changeSwatch({ swatch:self.swatch, character:self.character });\r\n        self.parent.makeAllButtonsNonActive();\r\n        self.active = true; \r\n        self.btn.className = \"swatch-btn-active\";\r\n      });\r\n  }\r\n\r\n}\n\n//# sourceURL=webpack://zerochill/./src/SkinsHandler.js?");

/***/ }),

/***/ "./src/SniperBullet.js":
/*!*****************************!*\
  !*** ./src/SniperBullet.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SniperBullet\": () => (/* binding */ SniperBullet)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass SniperBullet {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ, ISLOCAL) {\n\n\t\t//this.player = window.appGlobal.localPlayer;\n\t\t//this.weapon = OBJ.weapon;\n\t\tthis.isLocal = ISLOCAL;\n\t\tthis.damage = OBJ.damage;\n\t\tthis.id = OBJ.id;\n\t\tthis.knockParams = OBJ.knockParams;\n\t\tlet bulletSize = .1;\n\t\tif(this.isLocal){\n\t\t\tbulletSize=.01;\n\t\t}\n\t\tconst boxGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( bulletSize, bulletSize, 1 );\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff, transparent:true, opacity:1, side:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())} );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( boxGeometry, sphereMaterial );\n\t\tthis.mesh.castShadow = false;\n\t\tthis.receiveShadow = false;\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t//console.log(appGlobal.scene)\n\t\tappGlobal.scene.add( this.holder );\n\t\t//console.log(OBJ.pos)\n\t\tthis.holder.position.copy(OBJ.pos);\n\t\tthis.startPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy( OBJ.pos );\n\t\tthis.holder.add(this.mesh);\n\t\tthis.mesh.position.z = .5;\n\t\t\n\t\tthis.holder.scale.z = OBJ.zSize;\n\t\n\t\tconst hp = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.hitPoint)\n\t\tthis.holder.lookAt(hp);\n\t\tthis.contactParticle = appGlobal.particles.shot;\n\t\t\n\t\tif(this.isLocal){\n\t\t\t\n\t\t\tif(OBJ.hitId != null){\n\t\t\t\tif(window.socket != null){\n\t\t\t\t\tconst obj = {\n\t\t\t\t  \t\tid: OBJ.hitId,\n\t\t\t\t  \t\tdamage:this.damage,\n\t\t\t\t\t\tposition:this.startPos,\n\t\t\t\t\t\theadShot:OBJ.headShot,\n\t\t\t\t\t\tfromDamageId:socket.id\n\t\t\t\t\t}\t\n\t\t\t\t\tsocket.emit('doDamage', obj);\t\n\t\t\t\t\tappGlobal.globalHelperFunctions.playerDoDamage(obj);\n\t\t\t\t}else{\n\t\t\t\t\tlet dmg = this.damage;\n\t\t\t\t\tif(OBJ.headShot){\n\t\t\t\t\t\tdmg *=1.51;\n\t\t\t\t\t}\n\t\t\t\t\tappGlobal.remotePlayers[OBJ.hitId].receiveDamage({headShot:OBJ.headShot, position:this.startPos, health:dmg})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(OBJ.hit){\n\t\t\t\t\tthis.knockParams.pos = OBJ.hitPoint;\n\t\t\t\t\tappGlobal.globalHelperFunctions.knockPlayer(this.knockParams);\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t\tif(OBJ.hit){\n\t\t\tthis.contactParticle.pos = OBJ.hitPoint;\n\t\t\tappGlobal.particleHandler.createEmitter(this.contactParticle);\n\t\t}\n\n\t\tthis.killed = false;\n\t\tconst self = this;\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 300);\n\n\t\tgsap.to(this.mesh.material,{duration:.3, opacity:0, ease: \"linear.none()\", delay:0});\n\t\t//sphereIdx = ( sphereIdx + 1 ) % spheres.length;\n\t}\n\t\n\tupdate(){\n\t\t//this.mesh.material.opacity -= .01;\n\t}\n\n\tkill(){\n\t\tif(!this.killed){\n\t\t\tclearTimeout(this.killTimeout);\n\t\t\tthis.killed = true;\n\t\t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\tthis.holder.remove(this.mesh);\n\t\t\tappGlobal.scene.remove(this.holder);\n\t\t}\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/SniperBullet.js?");

/***/ }),

/***/ "./src/StickyAOE.js":
/*!**************************!*\
  !*** ./src/StickyAOE.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StickyAOE\": () => (/* binding */ StickyAOE)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n//import { clone } from \"./scripts/jsm/utils/SkeletonUtils.js\";\n\nclass StickyAOE {\n\t//{scene:scene, worldScale:worldScale};\n\tconstructor(OBJ) {\n\t\tconst self = this;\n\t\tthis.killed = false;\n\t\tthis.id = 0; \n\t\tif(OBJ.id !=null)\n\t\t\tthis.id = OBJ.id;\n\t\t\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), 5 );\n\t\t\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(6, 1);\n\t\t\n\t\tconst material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {color: 0x5fc8ff, transparent:true, opacity:.5, side:Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) } );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\t\t\n\t\tthis.look = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.look.add(this.mesh);\n\t\tthis.holder.add(this.look);\n\t\tthis.collider.center.copy(OBJ.position);\n\t\tthis.holder.position.copy(this.collider.center);\n\t\t\n\t\tthis.look.lookAt(OBJ.worldPosition);\n\t\tappGlobal.scene.add(this.holder); \n\t\t\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 7000);\n\n\t}\n\n\tupdate(){\n\t\tthis.playerSphereCollision();\n\t\tif(window.socket == null ){\n\t\t\tthis.botsCollision();\n\t\t}\n\t\tthis.mesh.rotation.z += appGlobal.deltaTime*2;\n\t\t// }else{\n\t\t// \tplayerSphereCollision();\n\t\t// }\n\t}\n\n\tbotsCollision(){\n\t\tfor (let i = 0;i<appGlobal.remotePlayers.length; i++){\n\t\t\t\n\t\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tappGlobal.remotePlayers[i].remotePlayer.start.getWorldPosition(start);\n\t\t\tappGlobal.remotePlayers[i].remotePlayer.end.getWorldPosition(end);\n\t\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = vector.addVectors(start, end).multiplyScalar( 0.5 );\n\n\t\t\tconst playerRadius = appGlobal.remotePlayers[i].remotePlayer.radius*4;\n\t\t\tconst r = playerRadius + this.collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tfor ( const point of [ start ] ) {\n\n\t\t\t\tconst d2 = point.distanceToSquared( this.collider.center );\n\n\t\t\t\t\n\t\t\t\tif ( d2 < r2 ) {\n\t\t\t\t\t//appGlobal.remotePlayers[i].remotePlayer.doJumpPad(this.grav);\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.maxSpeed = 3;\n\t\t\t\t}else{\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.maxSpeed = 40;\n\t\t\t\t}\n\t\t\t\n\t\t\n\t\t\t}\n\t\t\n\t\t}\n\t}\n\n\tplayerSphereCollision() {\n\t\t//this.id != window.socket.id\n\t\tif(appGlobal.localPlayer != null ){\n\n\t\t\tconst start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.start);\n\t\t\tconst end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(appGlobal.localPlayer.playerCollider.end);\n\t\t\t\n\t\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst center = vector.addVectors(start, end).multiplyScalar( 0.5 );\n\n\t\t\tconst playerRadius = appGlobal.localPlayer.playerCollider.radius*.5;\n\t\t\tconst r = playerRadius + this.collider.radius;\n\t\t\tconst r2 = r * r;\n\t\t\t\n\t\t\tfor ( const point of [ start, end, center ] ) {\n\t\t\t\tconst d2 = point.distanceToSquared( this.collider.center );\n\t\t\t\tif(!appGlobal.localPlayer.isDoingJumpPad){\n\t\t\t\t\tif ( d2 < r2 ) {\n\t\t\t\t\t\tappGlobal.localPlayer.maxSpeed = 3;\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tappGlobal.localPlayer.maxSpeed = 40;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\n  \tkill(){\n  \t\tif(appGlobal.localPlayer!=null){\n  \t\t\tappGlobal.localPlayer.maxSpeed=40;\n  \t\t}\n  \t\tthis.killed = true;\n  \t\tthis.mesh.geometry.dispose();\n  \t\tthis.mesh.material.dispose();\n  \t\tthis.holder.remove(this.mesh);\n  \t\tappGlobal.scene.remove(this.holder);\n  \t}\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/StickyAOE.js?");

/***/ }),

/***/ "./src/StickyBullet.js":
/*!*****************************!*\
  !*** ./src/StickyBullet.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"StickyBullet\": () => (/* binding */ StickyBullet)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass StickyBullet {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ, ISLOCAL) {\n\t\t\n\t\tthis.isLocal = ISLOCAL;\n\t\tthis.damage = OBJ.damage;\n\t\tthis.id = OBJ.id;\n\t\tthis.worldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.worldPosition);\n\t\t\n\t\tthis.vector1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.vector3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tthis.knockParams = OBJ.knockParams;\n\t\t//this.worldPosition = OBJ.worldPosition; \n\n\t\tthis.alivetime = 2000;\n\t\t\n\t\tconst rad = .2;\n\t\tconst sphereGeometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( rad, 6, 6 );\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { color: 0xffffff, roughness: 0.8, metalness: 0.5 } );\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sphereGeometry, sphereMaterial );\n\t\tthis.mesh.castShadow = true;\n\t\tthis.receiveShadow = true;\n\t\tappGlobal.scene.add( this.mesh );\n\n\t\t//spheres.push( { mesh: sphere, collider: new THREE.Sphere( new THREE.Vector3( 0, 0, 0 ), SPHERE_RADIUS ), velocity: new THREE.Vector3() } );\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), rad );\n\t\tconst impulse = OBJ.impulse ;\n\t\tthis.velocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.dir).multiplyScalar( impulse );\n\t\tthis.collider.center.copy( OBJ.pos );\n\t\tthis.velocityMult = 1;\n\t\tthis.startPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.pos)\n\t\t//this.velocity.addScaledVector( this.player.playerVelocity, 2 );\n\t\tthis.stuck = false;\n\t\tthis.killed = false;\n\t\tthis.contactParticle = appGlobal.particles.explosion;\n\t\tconst self = this;\n\t\tthis.grav = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.killTimeout = setTimeout(function(){\n\t\t\tself.kill();\n\t\t}, 2000)\n\t\t//sphereIdx = ( sphereIdx + 1 ) % spheres.length;\n\t}\n\t\n\tupdate(){\n\t\tif(!this.killed && !this.stuck){\n\t\t\tthis.handlePhysics();\n\t\t\tthis.playerSphereCollision();\n\t\t}\n\t}\n\n\thandlePhysics(){\n\n\t\tthis.collider.center.addScaledVector( this.velocity, appGlobal.deltaTime );\n\n\t\tthis.grav.copy(this.collider.center).sub(this.worldPosition).normalize();\n\t\tthis.velocity.x -= this.grav.x*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.y -= this.grav.y*(appGlobal.gravity*appGlobal.deltaTime);\n\t\tthis.velocity.z -= this.grav.z*(appGlobal.gravity*appGlobal.deltaTime);\n\t\t\n\t\tconst damping = Math.exp( - 1.5 * appGlobal.deltaTime ) - 1;\n\t\tthis.velocity.addScaledVector( this.velocity, damping );\n\t\tthis.velocity.multiplyScalar(this.velocityMult);\n\t\tfor(let i = 0; i<appGlobal.worlds.length; i++){\n\t\t\tconst s1 = this;\n\t\t\tconst s2 = appGlobal.worlds[i];\n\n\t\t\tconst d2 = s1.collider.center.distanceToSquared( s2.collider.center );\n\t\t\tconst r = s1.collider.radius + s2.collider.radius;\n\t\t\tconst r2 = r * r;\n\n\t\t\tif ( d2 < r2 ) {\n\t\t\t\tthis.velocityMult = 0;\n\t\t\t\tthis.handleStick();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.mesh.position.copy( this.collider.center );\n\t\t\n\t}\n\n\thandleStick(){\n\n\t\tclearTimeout(this.killTimeout);\n\t\t\n\t\tconst self = this;\n\t\tgsap.to(this.mesh.scale,{duration:.3, x:0, y:0, z:0, ease: \"back.in(5)\", delay:0, onComplete:function(){\n\t\t\tself.kill(false);\n\t\t}});\n\t\t\n\t\tthis.stuck = true;\n\t\t\n\t}\n\t\n\tkill(hitPlayer){\n\n\t\tif(!this.killed){\n\t\t\t\n\t\t\tif(this.isLocal){\n\t\t\t\tthis.knockParams.pos = this.mesh.position;\n\t\t\t\tif(!hitPlayer){\n\t\t\t\t\tappGlobal.globalHelperFunctions.knockPlayer(this.knockParams);\n\t\t\t\t}\n\n\t\t\t\tconst arr = appGlobal.globalHelperFunctions.splashDamage(this.knockParams);\n\t\t\t\tif(arr.length>0){\n\t\t\t\t\tfor(let i = 0; i<arr.length; i++){\n\t\t\t\t\t\tconst self = this;\n\t\t\t\t\t\tif(window.socket != null){\n\t\t\t\t\t\t\tconst obj = {\n\t\t\t\t\t\t  \t\tid: arr[i].id,\n\t\t\t\t\t\t  \t\tdamage:self.damage*arr[i].damageMult,\n\t\t\t\t\t\t  \t\tposition:appGlobal.localPlayer.playerCollider.start,\n\t\t\t\t\t\t  \t\theadShot:false,\n\t\t\t\t\t\t  \t\tfromDamageId:socket.id\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsocket.emit('doDamage', obj);\n\t\t\t\t\t\t\tappGlobal.globalHelperFunctions.playerDoDamage(obj);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tappGlobal.remotePlayers[arr[i].id].receiveDamage({headShot:false, position:this.mesh.position, health:this.damage})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.contactParticle.pos = this.mesh.position;\n\t\t\tappGlobal.particleHandler.createEmitter(this.contactParticle);\n\t\t\t\n    \t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(this.collider.center);\n\t    \tappGlobal.soundHandler.playSoundByName({name:this.contactParticle.sound, dist:dist});\n\n\t\t\tthis.killed = true;\n\t\t\tthis.mesh.geometry.dispose();\n\t\t\tthis.mesh.material.dispose();\n\t\t\tappGlobal.scene.remove(this.mesh);\n\t\t}\n\t}\n\tplayerSphereCollision() {\n\t\tconst id = appGlobal.globalHelperFunctions.playerSphereCollision(this.collider, this.id)\n\t\tif(id != null){\n\t\t\tthis.kill(true);\n\t\t}\n\t}\n\n\t// spheresWorldCollision() {\n\n\t// \tfor ( let i = 0, length = spheres.length; i < length; i ++ ) {\n\n\t// \t\tconst s1 = spheres[ i ];\n\n\t\t\t\n\n\t// \t\t//}\n\n\t// \t}\n\n\t// }\n\n\t// spheresCollisions() {\n\n\t// \tfor ( let i = 0, length = spheres.length; i < length; i ++ ) {\n\n\t// \t\tconst s1 = spheres[ i ];\n\n\t// \t\tfor ( let j = i + 1; j < length; j ++ ) {\n\n\t// \t\t\tconst s2 = spheres[ j ];\n\n\t// \t\t\tconst d2 = s1.collider.center.distanceToSquared( s2.collider.center );\n\t// \t\t\tconst r = s1.collider.radius + s2.collider.radius;\n\t// \t\t\tconst r2 = r * r;\n\n\t// \t\t\tif ( d2 < r2 ) {\n\n\t// \t\t\t\tconst normal = vector1.subVectors( s1.collider.center, s2.collider.center ).normalize();\n\t// \t\t\t\tconst v1 = vector2.copy( normal ).multiplyScalar( normal.dot( s1.velocity ) );\n\t// \t\t\t\tconst v2 = vector3.copy( normal ).multiplyScalar( normal.dot( s2.velocity ) );\n\n\t// \t\t\t\ts1.velocity.add( v2 ).sub( v1 );\n\t// \t\t\t\ts2.velocity.add( v1 ).sub( v2 );\n\n\t// \t\t\t\tconst d = ( r - Math.sqrt( d2 ) ) / 2;\n\n\t// \t\t\t\ts1.collider.center.addScaledVector( normal, d );\n\t// \t\t\t\ts2.collider.center.addScaledVector( normal, - d );\n\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// }\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/StickyBullet.js?");

/***/ }),

/***/ "./src/Swatches.js":
/*!*************************!*\
  !*** ./src/Swatches.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Swatches\": () => (/* binding */ Swatches)\n/* harmony export */ });\n\r\nclass Swatches {\r\n  //{shootCooldown:shootCooldown, bullet:bullet};\r\n  constructor(OBJ) {\r\n      /// shoot man\r\n     this.shootManDefault = [\r\n      {\r\n        name:\"assault-main-color\",\r\n        color:\"1b1b1b\",\r\n        emissive:\"000000\"\r\n      },{\r\n        name:\"Material.015\", // assault clips\r\n        color: \"4d4d4d\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Material.013\",\r\n        color: \"00cc02\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"Red\",\r\n        color: \"ff160b\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"Blue\",\r\n        color: \"0a34cb\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"assault-sight\",\r\n        color: \"363636\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"Green\",\r\n        color: \"c7ff00\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"Grey.005\",\r\n        color: \"010101\",\r\n        emissive:\"000000\",\r\n        \r\n      },{\r\n        name:\"WhiteEmissive\", // bright green\r\n        color: \"010101\",\r\n        emissive:\"ffd7e5\",\r\n        \r\n      },{\r\n        name:\"whiteNonEmissive\",\r\n        color: \"9c9c9c\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"emissive\",\r\n        color: \"202020\",\r\n        emissive:\"0a34cb\",\r\n      },{\r\n        name:\"assault-secondcolor\",\r\n        color: \"3b3b3b\",\r\n        emissive:\"000000\",\r\n      }\r\n    \r\n      \r\n    ];\r\n\r\n    this.shootManDark = [\r\n      {\r\n        name:\"assault-main-color\",\r\n        color:\"030303\", // bright purple\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Material.015\", // assault clips\r\n        color:\"1c1c1c\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Material.013\",\r\n        color:\"00ff15\",\r\n        emissive:\"005c01\",\r\n      },{\r\n        name:\"Red\",\r\n        color:\"030303\", //dark purple main color\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Blue\",\r\n        color:\"030303\", // dark purple body\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"assault-sight\",\r\n        color:\"00ff15\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Green\",\r\n        color:\"1c1c1c\", //dark grey\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Grey.005\",\r\n        color:\"141414\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"WhiteEmissive\", // bright green\r\n        color: \"00ff15\",\r\n        emissive:\"005c01\",\r\n      },{\r\n        name:\"whiteNonEmissive\",\r\n        color: \"141414\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"emissive\",\r\n        color: \"010101\",\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"assault-secondcolor\",\r\n        color: \"030303\",\r\n        emissive:\"000000\",\r\n      }\r\n      \r\n    ];\r\n\r\n\r\n    this.shootManKawaii = [\r\n      {\r\n        name:\"assault-main-color\",\r\n        color:\"8557fa\", // bright purple\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Material.015\", // assault clips\r\n        color:\"ed3bbd\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Material.013\",\r\n        color:\"020082\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Red\",\r\n        color:\"ed3bbd\", //light yellow\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Blue\",\r\n        color:\"e1eb34\", // dark purple body\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"assault-sight\",\r\n        color:\"00ff15\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Green\",\r\n        color:\"5741b0\", //dark grey\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"Grey.005\",\r\n        color:\"8557fa\",\r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"WhiteEmissive\", // bright green eyes\r\n        color: \"ffffff\",\r\n        emissive:\"ffffff\",\r\n      },{\r\n        name:\"whiteNonEmissive\",\r\n        color: \"2eccf0\", // light blue \r\n        emissive:\"000000\",\r\n      },{\r\n        name:\"emissive\",\r\n        color: \"5a5a5a\",\r\n        emissive:\"00ff15\",\r\n      },{\r\n        name:\"assault-secondcolor\",\r\n        color: \"ed3bbd\",\r\n        emissive:\"000000\",\r\n      }\r\n      \r\n    ];\r\n\r\n    this.shootManRGB = [\r\n      {\r\n        name:\"assault-main-color\",\r\n        color:\"f00\", // bright purple\r\n        emissive:\"f00\",\r\n      },{\r\n        name:\"Material.015\", // assault clips\r\n        color:\"0f0\",\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"Material.013\",\r\n        color:\"00f\",\r\n        emissive:\"00f\",\r\n      },{\r\n        name:\"Red\",\r\n        color:\"f00\", //light yellow\r\n        emissive:\"f00\",\r\n      },{\r\n        name:\"Blue\",\r\n        color:\"00f\", // dark purple body\r\n        emissive:\"00f\",\r\n      },{\r\n        name:\"assault-sight\",\r\n        color:\"0f0\",\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"Green\",\r\n        color:\"0f0\", //dark grey\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"Grey.005\",\r\n        color:\"f00\",\r\n        emissive:\"f00\",\r\n      },{\r\n        name:\"WhiteEmissive\", // bright green eyes\r\n        color: \"0f0\",\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"whiteNonEmissive\",\r\n        color: \"00f\", // light blue \r\n        emissive:\"00f\",\r\n      },{\r\n        name:\"emissive\",\r\n        color: \"000000\",\r\n        emissive:\"0f0\",\r\n      },{\r\n        name:\"assault-secondcolor\",\r\n        color: \"00f\",\r\n        emissive:\"000000\",\r\n      }\r\n      \r\n    ];\r\n\r\n\r\n\r\n    /// STICKY\r\n\r\n    this.stickyDefault = [\r\n    { name : \"light\",\r\n      color : \"494949\",\r\n      emissive: \"000000\" \r\n    },{\r\n      name:\"emissive.001\",\r\n      color:\"00ccc3\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"PinkKawaii\",\r\n      color:\"4414ff\",\r\n      emissive : \"000000\" \r\n    },{\r\n      name: \"Material.012\",\r\n      color:\"f7fff9\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii.001\",\r\n      color:\"746b61\",\r\n      emissive:\"000000\",\r\n    },{\r\n      name:\"YellowKawaii.001\",\r\n      color:\"ffa422\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"white-eye\",\r\n      color:\"cccccc\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name :\"blacksmile\",\r\n      color:\"000000\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"white-kawaii\",\r\n      color:\"cccccc\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"YellowKawaii\",\r\n      color:\"ffa422\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"blackKawaii\",\r\n      color:\"000000\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"BlueLight\",\r\n      color:\"ff0625\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"WhiteFat\",\r\n      color:\"cccccc\",\r\n      emissive:\"cccccc\"\r\n    },{\r\n      name:\"DarkGreen\",\r\n      color:\"042140\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii\",\r\n      color:\"746b61\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"Material\",\r\n      color:\"f7fff9\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"dark-sticky\",\r\n      color:\"4313ff\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"emissive\",\r\n      color:\"363636\",\r\n      emissive:\"ff61da\"\r\n    }\r\n    ]\r\n\r\n    this.stickyDark = [\r\n    { name : \"light\",\r\n      color : \"030303\",\r\n      emissive: \"000000\" \r\n    },{\r\n      name:\"emissive.001\",\r\n      color:\"1e00ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"PinkKawaii\",\r\n      color:\"ff6a00\",\r\n      emissive : \"ff0000\" \r\n    },{\r\n      name: \"Material.012\",\r\n      color:\"333333\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii.001\",\r\n      color:\"333333\",\r\n      emissive:\"000000\",\r\n    },{\r\n      name:\"YellowKawaii.001\",\r\n      color:\"030303\",\r\n      emissive:\"030303\"\r\n    },{\r\n      name:\"white-eye\",\r\n      color:\"1e00ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"blacksmile\",\r\n      color:\"1e00ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"white-kawaii\",\r\n      color:\"0008ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"YellowKawaii\",\r\n      color:\"030303\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"blackKawaii\",\r\n      color:\"0008ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"BlueLight\",\r\n      color:\"0008ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"WhiteFat\",\r\n      color:\"1e00ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"DarkGreen\",\r\n      color:\"333333\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii\",\r\n      color:\"333333\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"Material\",\r\n      color:\"ff6a00\",\r\n      emissive : \"ff0000\" \r\n     \r\n    },{\r\n      name:\"dark-sticky\",\r\n      color:\"1e00ff\",\r\n      emissive:\"1e00ff\"\r\n    },{\r\n      name:\"emissive\",\r\n      color:\"030303\",\r\n      emissive : \"ff6a00\" \r\n    }\r\n    ]\r\n\r\n    this.stickyKawaii = [\r\n    { name : \"light\",\r\n      color : \"e4f05d\",\r\n      emissive: \"000000\" \r\n    },{\r\n      name:\"emissive.001\",\r\n      color:\"ea59f7\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"PinkKawaii\",\r\n      color:\"ea59f7\",\r\n      emissive : \"000000\" \r\n    },{\r\n      name: \"Material.012\",\r\n      color:\"333333\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii.001\",\r\n      color:\"85ffd8\",//green\r\n      emissive:\"000000\",\r\n    },{\r\n      name:\"YellowKawaii.001\",\r\n      color:\"e0e647\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"YellowKawaii\",\r\n      color:\"e0e647\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"white-eye\",\r\n      color:\"2ec96f\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"blacksmile\",\r\n      color:\"2ec96f\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"white-kawaii\",\r\n      color:\"2ec96f\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"blackKawaii\",\r\n      color:\"2ec96f\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"BlueLight\",\r\n      color:\"2ec96f\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"WhiteFat\",\r\n      color:\"ffffff\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"DarkGreen\",\r\n      color:\"383854\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"GreyKawaii\",\r\n      color:\"41b0ae\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"Material\",\r\n      color:\"ea59f7\",\r\n      emissive : \"000000\" \r\n    },{\r\n      name:\"dark-sticky\",\r\n      color:\"ea59f7\",\r\n      emissive:\"000000\"\r\n    },{\r\n      name:\"emissive\",\r\n      color:\"2ec96f\",\r\n      emissive : \"ea59f7\" \r\n    }\r\n    ]\r\n\r\n\r\n    this.stickyRGB = [\r\n    { name : \"light\",\r\n      color : \"f00\",\r\n      emissive: \"f00\" \r\n    },{\r\n      name:\"emissive.001\",\r\n      color:\"0f0\",\r\n      emissive:\"0f0\"\r\n    },{\r\n      name:\"PinkKawaii\",\r\n      color:\"00f\",\r\n      emissive : \"00f\" \r\n    },{\r\n      name: \"Material.012\",\r\n      color:\"f00\",\r\n      emissive:\"f00\"\r\n    },{\r\n      name:\"GreyKawaii.001\",\r\n      color:\"0f0\",//green\r\n      emissive:\"0f0\",\r\n    },{\r\n      name:\"YellowKawaii.001\",\r\n      color:\"f00\",\r\n      emissive:\"f00\"\r\n    },{\r\n      name:\"YellowKawaii\",\r\n      color:\"0f0\",\r\n      emissive:\"0f0\"\r\n    },{\r\n      name:\"white-eye\",\r\n      color:\"00f\",\r\n      emissive:\"00f\"\r\n    },{\r\n      name:\"blacksmile\",\r\n      color:\"00f\",\r\n      emissive:\"00f\"\r\n    },{\r\n      name:\"white-kawaii\",\r\n      color:\"f00\",\r\n      emissive:\"f00\"\r\n    },{\r\n      name:\"blackKawaii\",\r\n      color:\"00f\",\r\n      emissive:\"00f\"\r\n    },{\r\n      name:\"BlueLight\",\r\n      color:\"f00\",\r\n      emissive:\"f00\"\r\n    },{\r\n      name:\"WhiteFat\",\r\n      color:\"f00\",\r\n      emissive:\"f00\"\r\n    },{\r\n      name:\"DarkGreen\",\r\n      color:\"00f\",\r\n      emissive:\"00f\"\r\n    },{\r\n      name:\"GreyKawaii\",\r\n      color:\"0f0\",\r\n      emissive:\"0f0\"\r\n    },{\r\n      name:\"Material\",\r\n      color:\"00f\",\r\n      emissive : \"00f\" \r\n    },{\r\n      name:\"dark-sticky\",\r\n      color:\"00f\",\r\n      emissive:\"00f\"\r\n    },{\r\n      name:\"emissive\",\r\n      color:\"000\",\r\n      emissive : \"f00\" \r\n    }\r\n    ]\r\n\r\n\r\n\r\n    this.nitroDefault = [\r\n    {\r\n      name:'darkgreysub',\r\n      color:'0a0a0a',\r\n      emissive:'000000'\r\n    },{\r\n      name:'greensub',\r\n      color:'00cc00',\r\n      emissive:'000000'\r\n    },{\r\n      name:'light grey sub',\r\n      color:'060606',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Eyes',\r\n      color:'000000',\r\n      emissive:'ff6600'\r\n    },{\r\n      name:'tip.005',\r\n      color:'00cb03',\r\n      emissive:'000000'\r\n    },{\r\n      name:'GreenPunk',\r\n      color:'00cb03',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Grey.006',\r\n      color:'606060',\r\n      emissive:'000000'\r\n    },{\r\n      name:'DarkGrey',\r\n      color:'111111',\r\n      emissive:'000000'\r\n    },{\r\n      name:'tip.005',\r\n      color:'00cb03',\r\n      emissive:'000000'\r\n    },{\r\n      name:'GreenPunk.003',\r\n      color:'00cc03',\r\n      emissive:'000000'\r\n    },{\r\n      name:'emissive',\r\n      color:'000000',\r\n      emissive:'ff6600'\r\n    }\r\n    ]\r\n\r\n    this.nitroDark = [\r\n    {\r\n      name:'darkgreysub',\r\n      color:'0a0a0a',\r\n      emissive:'000000'\r\n    },{\r\n      name:'greensub',\r\n      color:'ff0000',\r\n      emissive:'ff0000'\r\n    },{\r\n      name:'light grey sub',\r\n      color:'060606',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Eyes',\r\n      color:'000000',\r\n      emissive:'ff0000'\r\n    },{\r\n      name:'GreenPunk',\r\n      color:'333333',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Grey.006',\r\n      color:'333333',\r\n      emissive:'000000'\r\n    },{\r\n      name:'DarkGrey',\r\n      color:'111111',\r\n      emissive:'000000'\r\n    },{\r\n      name:'tip.005',\r\n      color:'ff0000',\r\n      emissive:'000000'\r\n    },{\r\n      name:'GreenPunk.003',\r\n      color:'333333',\r\n      emissive:'000000'\r\n    },{\r\n      name:'emissive',\r\n      color:'000000',\r\n      emissive:'ff0000'\r\n    }];\r\n\r\n    this.nitroKawaii = [\r\n    {\r\n      name:'darkgreysub',\r\n      color:'504480',\r\n      emissive:'000000'\r\n    },{\r\n      name:'greensub',\r\n      color:'ff1c7e',\r\n      emissive:'ff1c7e'\r\n    },{\r\n      name:'light grey sub',\r\n      color:'504480',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Eyes',\r\n      color:'ff1c7e',\r\n      emissive:'ff1c7e'\r\n    },{\r\n      name:'GreenPunk',\r\n      color:'d12c6e',\r\n      emissive:'000000'\r\n    },{\r\n      name:'Grey.006',\r\n      color:'504480',\r\n      emissive:'000000'\r\n    },{\r\n      name:'DarkGrey',\r\n      color:'07524d',\r\n      emissive:'000000'\r\n    },{\r\n      name:'tip.005',\r\n      color:'d12c6e',\r\n      emissive:'000000'\r\n    },{\r\n      name:'GreenPunk.003',\r\n      color:'d12c6e',\r\n      emissive:'000000'\r\n    },{\r\n      name:'emissive',\r\n      color:'434343',\r\n      emissive:'ff1c7e'\r\n    }\r\n    ]\r\n\r\n    this.nitroRGB = [\r\n    {\r\n      name:'darkgreysub',\r\n      color:'00f',\r\n      emissive:'00f'\r\n    },{\r\n      name:'greensub',\r\n      color:'0f0',\r\n      emissive:'0f0'\r\n    },{\r\n      name:'light grey sub',\r\n      color:'00f',\r\n      emissive:'00f'\r\n    },{\r\n      name:'Eyes',\r\n      color:'f00',\r\n      emissive:'f00'\r\n    },{\r\n      name:'GreenPunk',\r\n      color:'0f0',\r\n      emissive:'0f0'\r\n    },{\r\n      name:'Grey.006',\r\n      color:'00f',\r\n      emissive:'00f'\r\n    },{\r\n      name:'DarkGrey',\r\n      color:'f00',\r\n      emissive:'f00'\r\n    },{\r\n      name:'tip.005',\r\n      color:'f00',\r\n      emissive:'f00'\r\n    },{\r\n      name:'GreenPunk.003',\r\n      color:'0f0',\r\n      emissive:'0f0'\r\n    },{\r\n      name:'emissive',\r\n      color:'000',\r\n      emissive:'f00'\r\n    }]\r\n\r\n\r\n    this.starfishDefault = [\r\n      {\r\n        name:'RedShiny',\r\n        color:'c9cc1b',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'light-sniper',\r\n        color:'494949',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'dark-sniper',\r\n        color:'151515',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'SpkeyBoySniperColor',\r\n        color:'035aff',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'blast.002',\r\n        color:'cc2c00',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'WhiteEmissive',\r\n        color:'010101',\r\n        emissive:'ffd7e5'\r\n      },\r\n      {\r\n        name:'HighlightShiny',\r\n        color:'ff3701',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'GreyShiny',\r\n        color:'616161',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'BlueShiny',\r\n        color:'035aff',\r\n        emissive:'000000'\r\n      },{\r\n        name:'DarkGreyShiny',\r\n        color:'111111',\r\n        emissive:'000000'\r\n      },{\r\n        name:'emissive',\r\n        color:'151515',\r\n        emissive:'035aff'\r\n      }\r\n    ]\r\n\r\n    this.starfishDark = [\r\n      {\r\n        name:'RedShiny',\r\n        color:'333333',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'light-sniper',\r\n        color:'333333',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'dark-sniper',\r\n        color:'151515',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'SpkeyBoySniperColor',\r\n        color:'2f00ff',\r\n        emissive:'2f00ff'\r\n      },\r\n      {\r\n        name:'BlueShiny',\r\n        color:'2f00ff',\r\n        emissive:'2f00ff'\r\n      },\r\n      {\r\n        name:'WhiteEmissive',\r\n        color:'dd00ff',\r\n        emissive:'dd00ff'\r\n      },\r\n      {\r\n        name:'HighlightShiny',\r\n        color:'030303',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'GreyShiny',\r\n        color:'333333',\r\n        emissive:'000000'\r\n      },\r\n      { \r\n        name:'DarkGreyShiny',\r\n        color:'030303',\r\n        emissive:'000000'\r\n      },{\r\n        name:'emissive',\r\n        color:'000000',\r\n        emissive:'2f00ff'\r\n      }\r\n    ]\r\n\r\n    this.starfishKawaii = [\r\n      {\r\n        name:'RedShiny',\r\n        color:'40de94',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'light-sniper',\r\n        color:'333333',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'dark-sniper',\r\n        color:'151515',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'SpkeyBoySniperColor',\r\n        color:'40de94',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'BlueShiny',\r\n        color:'704beb',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'WhiteEmissive',\r\n        color:'55d8fa',\r\n        emissive:'55d8fa'\r\n      },\r\n      {\r\n        name:'HighlightShiny',\r\n        color:'e8d933',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'GreyShiny',\r\n        color:'4a4a4d',\r\n        emissive:'000000'\r\n      },\r\n      {\r\n        name:'DarkGreyShiny',\r\n        color:'704beb',\r\n        emissive:'000000'\r\n      },{\r\n        name:'emissive',\r\n        color:'464646',\r\n        emissive:'2f00ff'\r\n      }\r\n    ]\r\n\r\n    this.starfishRGB = [\r\n      {\r\n        name:'RedShiny',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },\r\n      {\r\n        name:'light-sniper',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },\r\n      {\r\n        name:'dark-sniper',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },\r\n      {\r\n        name:'SpkeyBoySniperColor',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },\r\n      {\r\n        name:'BlueShiny',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },\r\n      {\r\n        name:'WhiteEmissive',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },\r\n      {\r\n        name:'HighlightShiny',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },\r\n      {\r\n        name:'GreyShiny',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },\r\n      {\r\n        name:'DarkGreyShiny',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },{\r\n        name:'emissive',\r\n        color:'000',\r\n        emissive:'f00'\r\n      }\r\n    ]\r\n\r\n    this.thrustDefault = [\r\n      {\r\n      name:'metal',\r\n      color:'777777',\r\n      emissive:'000303'\r\n      },\r\n      {\r\n      name:'emissive.003',\r\n      color:'00ccc3',\r\n      emissive:'000000'\r\n      },\r\n      {\r\n      name:'redemissive',\r\n      color:'040404',\r\n      emissive:'ff0003'\r\n      },\r\n      {\r\n      name:'blast.003',\r\n      color:'cc2c00',\r\n      emissive:'000000'\r\n      },\r\n      {\r\n        name:'redmetal',\r\n        color:'814314',\r\n        emissive:'000000'\r\n      },{\r\n        name:'emissive',\r\n        color:'000',\r\n        emissive:'f00'\r\n      }\r\n    ]\r\n\r\n    this.thrustDark = [\r\n      {\r\n      name:'metal',\r\n      color:'333333',\r\n      emissive:'000000'\r\n      },\r\n      {\r\n      name:'emissive.003',\r\n      color:'000000',\r\n      emissive:'6007fa'\r\n      },\r\n      {\r\n        name:'redemissive',\r\n        color:'000000',\r\n        emissive:'6007fa'\r\n      },\r\n      {\r\n        name:'redmetal',\r\n        color:'1c1c1c',\r\n        emissive:'000000'\r\n      },{\r\n        name:'emissive',\r\n        color:'000',\r\n        emissive:'6007fa'\r\n      }\r\n    ]\r\n\r\n    this.thrustKawaii = [\r\n      {\r\n        name:'metal',\r\n        color:'2462ff',\r\n        emissive:'1a2278'\r\n      },{\r\n        name:'emissive.003',\r\n        color:'000000',\r\n        emissive:'e6d540'\r\n      },{\r\n        name:'redemissive',\r\n        color:'000000',\r\n        emissive:'e6d540'\r\n      },{\r\n        name:'redmetal',\r\n        color:'e6880e',\r\n        emissive:'855921'\r\n      },{\r\n        name:'emissive',\r\n        color:'252525',\r\n        emissive:'855921'\r\n      }\r\n    ]\r\n\r\n    this.thrustRGB = [\r\n      {\r\n        name:'metal',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },{\r\n        name:'emissive.003',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },{\r\n        name:'redemissive',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },{\r\n        name:'redmetal',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },{\r\n        name:'emissive',\r\n        color:'000',\r\n        emissive:'f00'\r\n      }\r\n    ]\r\n\r\n    this.bugDefault = [\r\n      {\r\n        name:'dark-sixgunn',\r\n        color:'292929',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BugColor3',\r\n        color:'0569ec',\r\n        emissive:'000000'\r\n      },{\r\n        name:'YellowBug',\r\n        color:'cc6600',\r\n        emissive:'000000'\r\n      },{\r\n        name:'LightSixGun',\r\n        color:'0b0b0b',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BlackBug',\r\n        color:'010101',\r\n        emissive:'000000'\r\n      },{\r\n        name:'WhiteBug',\r\n        color:'cccccc',\r\n        emissive:'e4e4e4'\r\n      },{\r\n        name:'emissive',\r\n        color:'292929',\r\n        emissive:'0bc5d6'\r\n      }\r\n    ]\r\n\r\n    this.bugDark = [\r\n      {\r\n        name:'dark-sixgunn',\r\n        color:'313131',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BugColor3',\r\n        color:'000000',\r\n        emissive:'ffb224'\r\n      },{\r\n        name:'YellowBug',\r\n        color:'030303',\r\n        emissive:'000000'\r\n      },{\r\n        name:'LightSixGun',\r\n        color:'0b0b0b',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BlackBug',\r\n        color:'313131',\r\n        emissive:'000000'\r\n      },{\r\n        name:'WhiteBug',\r\n        color:'000000',\r\n        emissive:'ffb224'\r\n      },{\r\n        name:'emissive',\r\n        color:'000000',\r\n        emissive:'ffb224'\r\n      }\r\n    ]\r\n    this.bugKawaii = [\r\n      {\r\n        name:'dark-sixgunn',\r\n        color:'dbff59',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BugColor3',\r\n        color:'7c57eb',\r\n        emissive:'000000'\r\n      },{\r\n        name:'YellowBug',\r\n        color:'38d953',\r\n        emissive:'000000'\r\n      },{\r\n        name:'LightSixGun',\r\n        color:'38d953',\r\n        emissive:'000000'\r\n      },{\r\n        name:'BlackBug',\r\n        color:'13005e',\r\n        emissive:'000000'\r\n      },{\r\n        name:'WhiteBug',\r\n        color:'000000',\r\n        emissive:'dbff59'\r\n      },{\r\n        name:'emissive',\r\n        color:'000000',\r\n        emissive:'7c57eb'\r\n      }\r\n    ]\r\n\r\n    this.bugRGB = [\r\n      {\r\n        name:'dark-sixgunn',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },{\r\n        name:'BugColor3',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },{\r\n        name:'YellowBug',\r\n        color:'0f0',\r\n        emissive:'0f0'\r\n      },{\r\n        name:'LightSixGun',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },{\r\n        name:'BlackBug',\r\n        color:'00f',\r\n        emissive:'00f'\r\n      },{\r\n        name:'WhiteBug',\r\n        color:'f00',\r\n        emissive:'f00'\r\n      },{\r\n        name:'emissive',\r\n        color:'000',\r\n        emissive:'0f0'\r\n      }\r\n    ]\r\n\r\n    this.arr = [\r\n      {\r\n        name:\"assault\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.shootManDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.shootManDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.shootManKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.shootManRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\", \r\n            icon:\"wireframe\", \r\n            array:this.shootManDefault\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        name:\"sticky\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.stickyDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.stickyDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.stickyKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.stickyRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\", \r\n            icon:\"wireframe\", \r\n            array:this.stickyDefault\r\n          }\r\n        ]\r\n      },{\r\n        name:\"submachine\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.nitroDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.nitroDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.nitroKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.nitroRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\", \r\n            icon:\"wireframe\", \r\n            array:this.nitroDefault\r\n          }\r\n        ]\r\n      },{\r\n        name:\"sniper\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.starfishDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.starfishDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.starfishKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.starfishRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\", \r\n            icon:\"wireframe\", \r\n            array:this.starfishDefault\r\n          }\r\n        ]\r\n      },{\r\n        name:\"launcher\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.thrustDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.thrustDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.thrustKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.thrustRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\", \r\n            icon:\"wireframe\", \r\n            array:this.thrustDefault\r\n          }\r\n        ]\r\n      },{\r\n        name:\"sixgun\",\r\n        swatches:[\r\n          {\r\n            name:\"default\",\r\n            icon:\"default\",\r\n            array:this.bugDefault\r\n          },{\r\n            name:\"dark\",\r\n            icon:\"dark\", \r\n            array:this.bugDark\r\n          },{\r\n            name:\"kawaii\", \r\n            icon:\"kawaii\", \r\n            array:this.bugKawaii\r\n          },{\r\n            name:\"rgb\", \r\n            icon:\"rgb\", \r\n            array:this.bugRGB\r\n          },{\r\n            name:\"normal\", \r\n            icon:\"normal\", \r\n            array:null\r\n          },{\r\n            name:\"wireframe\",\r\n            icon:\"wireframe\",\r\n            array:this.bugDefault\r\n          }\r\n        ]\r\n      },\r\n    ];\r\n\r\n    \r\n  }\r\n\r\n  getSwatchEmissive(array){\r\n    for(let i = 0;i<array.length; i++){\r\n      if(array[i].name==\"emissive\")\r\n        return array[i];\r\n    }\r\n  }\r\n\r\n  checkIfMaterialMatchesSwatch(mat, swatches){\r\n    for(let i = 0; i<swatches.length; i++){\r\n      if(mat.name == swatches[i].name){\r\n        return {name:swatches[i].name, material:mat, color:swatches[i].color, emissive:swatches[i].emissive};\r\n      }  \r\n    }\r\n    return null;\r\n  }\r\n\r\n  getSwatchByName(character, name){\r\n    const swatch = this.getSwatchesArrayFromName(character);\r\n    return this.getSwatch(swatch, name);\r\n  }\r\n\r\n  getSwatchesArrayFromName(name){\r\n    for(let i = 0; i<this.arr.length; i++){\r\n      if(name==this.arr[i].name)\r\n        return this.arr[i].swatches;\r\n    }\r\n  }\r\n\r\n  getSwatch(array, name){\r\n    for(let i = 0; i<array.length; i++){\r\n      if(array[i].name == name){\r\n        return array[i];\r\n      }\r\n    }\r\n  }\r\n\r\n  getSwatch(array, name){\r\n    for(let i = 0; i<array.length; i++){\r\n      if(array[i].name == name){\r\n        return array[i];\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/Swatches.js?");

/***/ }),

/***/ "./src/TitleScene.js":
/*!***************************!*\
  !*** ./src/TitleScene.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TitleScene\": () => (/* binding */ TitleScene)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _scripts_jsm_environments_RoomEnvironment_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/environments/RoomEnvironment.js */ \"./src/scripts/jsm/environments/RoomEnvironment.js\");\n\r\n\r\n\r\n//import { clone } from \"./scripts/jsm/utils/SkeletonUtils.js\"\r\n\r\nclass TitleScene {\r\n\r\n\tconstructor() {\r\n\r\n\t\tconst self = this;\r\n\t\tthis.scene = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\r\n\t\t//this.scene.background = new Color( 0x88ccff );\r\n\t\tthis.w = 700;\r\n\t\tthis.h = 200;\r\n\t\tthis.renderer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { antialias: false, alpha:true } );\r\n\t\t//this.renderer.setPixelRatio( window.devicePixelRatio );\r\n\t\tthis.renderer.setSize( this.w, this.h );\r\n\t\t\r\n\t\tthis.camera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 50, this.w / this.h, 0.1, 1000 );\r\n\t\tthis.camera.position.z = 1.2;\r\n\t\t\r\n\t\tconst pmremGenerator = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.renderer );\r\n\t\tthis.scene.environment = pmremGenerator.fromScene( new _scripts_jsm_environments_RoomEnvironment_js__WEBPACK_IMPORTED_MODULE_1__.RoomEnvironment(), 0.01 ).texture;\r\n\r\n\r\n\t\tthis.title = self.getModelByName(\"title\").scene;\r\n\t\tthis.title.traverse( function ( obj ) {\r\n\t\t\tif(obj.isMesh){\r\n\t\t\t\tobj.material.environmentMap = self.scene.environment;\r\n\t\t\t}\r\n\t\t});\r\n\t\tconst s = .07;\r\n\t\tthis.title.scale.set(s,s,s);\r\n\t\t//title.position.x-=.5;\r\n\r\n\t\tconst container = document.getElementById( 'title' );\r\n\t\tcontainer.appendChild( this.renderer.domElement );\r\n\t\t\r\n\t\tthis.holder = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\r\n\t\tthis.scene.add(this.holder);\r\n\t\tthis.holder.add(this.title);\r\n\t\t\r\n\t\t// const ambientlight = new AmbientLight( 0x6688cc);\r\n\t\t// this.scene.add( ambientlight );\r\n\t\t\r\n\t\t// const fillLight1 = new DirectionalLight( 0xf0f0f0, 0.5 );\r\n\t\t// fillLight1.position.set( 1, .5, 1 );\r\n\t\t// this.scene.add( fillLight1 );\r\n\r\n\t\t// const fillLight2 = new DirectionalLight( 0xaaaaaa, 10.2 );\r\n\t\t// fillLight2.position.set( 0, 0, 10 );\r\n\t\t// this.scene.add( fillLight2 );\r\n\r\n\t\t//const directionalLight = new DirectionalLight( 0xffffff, 2.2 );\r\n\t\t//directionalLight.position.set( 0, .5, 3 );\r\n\t\t// directionalLight.castShadow = true;\r\n\t\t// directionalLight.shadow.camera.near = 0.01;\r\n\t\t// directionalLight.shadow.camera.far = 500;\r\n\t\t// directionalLight.shadow.camera.right = 30;\r\n\t\t// directionalLight.shadow.camera.left = - 30;\r\n\t\t// directionalLight.shadow.camera.top\t= 30;\r\n\t\t// directionalLight.shadow.camera.bottom = - 30;\r\n\t\t// directionalLight.shadow.mapSize.width = 1024;\r\n\t\t// directionalLight.shadow.mapSize.height = 1024;\r\n\t\t// directionalLight.shadow.radius = 4;\r\n\t\t//directionalLight.shadow.bias = - 0.00006;\r\n\t\t //this.scene.add( directionalLight );\r\n\t\t this.targX = 0;\r\n\t\t this.targY = 0;\r\n\t\t\r\n\t}\r\n\tupdateMouseMove(event){\r\n\t\tthis.targX = ((window.innerWidth/2-event.pageX)*.0002 )*-1;\r\n\t\tthis.targY = ( (200-event.pageY) *.0002)*-1;\r\n\t}\r\n\tgetModelByName(NAME){\r\n\t\tfor(let i = 0; i<appGlobal.loadObjs.length;i++){\r\n\t\t\tif(appGlobal.loadObjs[i].name==\"\"+NAME)\r\n\t\t\t\treturn appGlobal.loadObjs[i].model;\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tupdate(){\r\n\t\tthis.title.rotation.y += (this.targX-this.title.rotation.y)*(appGlobal.deltaTime*30);\r\n\t\tthis.title.rotation.x += (this.targY-this.title.rotation.x)*(appGlobal.deltaTime*30);\r\n\t\tthis.renderer.render( this.scene, this.camera );\r\n\t}\r\n\r\n\tkill(){\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack://zerochill/./src/TitleScene.js?");

/***/ }),

/***/ "./src/Weapon.js":
/*!***********************!*\
  !*** ./src/Weapon.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Weapon\": () => (/* binding */ Weapon)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _GlobalParticleHandler_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./GlobalParticleHandler.js */ \"./src/GlobalParticleHandler.js\");\n\n\n\nclass Weapon {\n\t//{shootCooldown:shootCooldown, bullet:bullet};\n\tconstructor(OBJ) {\n\t\tthis.weaponObj = OBJ;\n\t\tthis.player = OBJ.player;\n\t\tthis.shootCooldown = OBJ.shootCooldown;\n\t\tthis.bullet = OBJ.bullet; // class \n\t\tthis.ammoAmount = OBJ.ammoAmount;\n\t\tthis.reloadCooldown = OBJ.reloadCooldown;\n\t\tthis.zoom = OBJ.zoom;\n\t\tthis.adsRandom = OBJ.adsRandom;\n\t\tthis.impulse = OBJ.impulse;\n\t\tthis.contactParticle = OBJ.contactParticle;\n\t\tthis.damage = OBJ.damage;\n\t\tif(OBJ.knockParams!=null)\n\t\t\tthis.knockParams = OBJ.knockParams;\n\t\tthis.sound = OBJ.sound;\n\t\tthis.name = OBJ.name;\n\t\tthis.adsMouseSensMult = OBJ.adsMouseSenseMult;\n\t\tthis.player.hud.updateTotalAmmo(this.ammoAmount);\n\t\tthis.player.hud.updateAmmo(this.ammoAmount);\n\t\t\t \t\n\t\tthis.firing = false;\n\t\tthis.inc = 0;\n\t\tthis.bullets = [];\n\t\tthis.shootReset = false;\n\t\tthis.canShoot = true;\n\t\tthis.shootTimeout;\t\t\n\t\tthis.currentAmmo = this.ammoAmount;\n\t\tthis.contactEmitters = [];\n\t\tthis.abilityCanShoot = true;\n\n\t\tdocument.getElementById('weapon-icon').style.backgroundImage = \"url('./assets/textures/\"+this.name+\".png')\";\n\n\t}\n\n\t//{mouse:this.mouse, time:deltaTime, world:world}\n\t\n\tupdate(){\n\t\tif(window.appGlobal.mouse.down){\n\t\t\tif(this.player.emoting){\n\t\t\t\tthis.player.killEmoting();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(this.canShoot && !this.player.boosting && this.abilityCanShoot){\n\n\t\t\t\tif(this.currentAmmo != 0){\n\t\t\t\t\tthis.shoot();\n\t\t\t\t}\n\t\t\t \t\n\t\t\t \tthis.canShoot = false;\n\t\t\t \tconst self = this;\n\t\t\t \t\n\t\t\t \tif(this.currentAmmo == 0){\n\t\t\t \t\tthis.reload();\n\t\t\t \t}else{\n\t\t\t \t\tthis.shootTimeout = setTimeout(function(){\n\t\t\t\t \t\tself.canShoot = true;\n\t\t\t\t\t}, this.shootCooldown);\n\t\t\t \t}\n\n\t\t\t \tthis.currentAmmo --;\n\t\t\t \tlet fnlAmmo = this.currentAmmo ;\n\t\t\t \tif(fnlAmmo<0)\n\t\t\t \t\tfnlAmmo = 0;\n\t\t\t \tthis.player.hud.updateAmmo(fnlAmmo);\n\t\t\t}\n\t\t}\n\n\t\tfor(let i = 0; i<this.bullets.length;i++ ){\n\t\t\tthis.bullets[i].update();\n\t\t}\n\t\tfor(let i = 0; i<this.contactEmitters.length;i++ ){\n\t\t\tthis.contactEmitters[i].update();\n\t\t}\n\n\t}\n\n\treload(){\n\t\t\n\t\tif(this.currentAmmo < this.ammoAmount){\n\t\t\tthis.canShoot = false;\n\t\t\tthis.player.fps.reloadAnimation(this.reloadCooldown/1000);\n\t\t\tthis.player.hud.toggleReload(true)\n\t\t\tconst self = this;\n\t\t\t\n\t\t\t\n\t\t\tif(this.shootTimeout!=null){\n\t\t\t\tclearTimeout(this.shootTimeout);\n\t\t\t}\n\n\t\t\tthis.shootTimeout = setTimeout(function(){\n\t\t\t\t\n\t\t\t\tself.player.hud.toggleReload(false)\n\t\t\t\n\t\t \t\tself.canShoot = true;\n\t\t \t\tself.currentAmmo = self.ammoAmount;\n\t\t \t\tself.player.hud.updateAmmo(self.currentAmmo);\n\n\t\t\t}, this.reloadCooldown);\n\t\t}\n\n\t}\n\n\tshoot(){\n\t\tthis.player.fps.shoot({ammoMax:this.ammoAmount, currAmoo:this.currentAmmo});\n\t\tconst name = this.name;\n\t\t\n\t\tconst bullet = this.bullet;\n\t\tconst obj = this.makeBulletObj();\n\t\tappGlobal.soundHandler.playSoundByName({name:this.sound, dist:1});\n\t\tif(window.socket !=null ){\n\t\t\tsocket.emit('shoot', {\n\t\t\t  obj: obj,\n\t\t\t  id: socket.id,\n\t\t\t  name: name\n\t\t\t})\n\t\t}\n\n\t\tthis.bullets.push(new this.bullet(obj, true));\n\t}\n\t\n\tmakeBulletObj(){\n\t\t\n\t\tlet rndMult = 1; \n\t\tlet rx = 0;\n\t\tlet ry = 0;\n\t\tlet rz = 0;\n\t\tlet rnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(); \n\t\tlet dir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tlet dirMiss = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tlet pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tlet kp;\n\t\tlet obj;\n\t\t\n\t\tswitch(this.name){\n\t\t\tcase \"automatic\":\n\t\t\tcase \"sticky\":\n\t\t\tcase \"launcher\":\n\t\t\tcase \"submachine\":\n\t\t\t\t\n\t\t\t\tthis.player.camera.getWorldDirection( dir );\n\t\t\t\t\n\t\t\t\tif(this.player.adsing){\n\t\t\t\t\trndMult = .05;\n\t\t\t\t}\n\t\t\t\trx = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\try = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\trz = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\trnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().set( rx,ry,rz );\n\t\t\t\tdir.add(rnd);\n\t\t\t\t\n\t\t\t\t//pos = new Vector3().copy( this.player.playerCollider.end ).addScaledVector( dir, this.player.playerCollider.radius * 1.5 );\n\t\t\t\tpos = this.player.fps.tipPosition;\n\t\t\t\tkp = {\n\t\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\t\tdistance:0, \n\t\t\t\t\tstrength:0, \n\t\t\t\t\tgravMult:0\n\t\t\t\t}\n\t\t\t\tif(this.knockParams != null){\n\t\t\t\t\tkp = {\n\t\t\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\t\t\tdistance:this.knockParams.distance, \n\t\t\t\t\t\tstrength:this.knockParams.strength, \n\t\t\t\t\t\tgravMult:this.knockParams.gravMult\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tobj = {\n\t\t\t\t\tpos:pos,\n\t\t\t\t\timpulse:this.impulse,\n\t\t\t\t\tdir:dir,\n\t\t\t\t\tknockParams:kp,\n\t\t\t\t\tdamage:this.damage,\n\t\t\t\t\tid:appGlobal.localPlayer.id,\n\t\t\t\t\tworldPosition:appGlobal.world.worldPosition,\n\t\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"sixgun\":\n\t\t\tcase \"sniper\":\n\t\t\t\t\n\t\t\t\tif(this.player.adsing){\n\t\t\t\t\trndMult = 0;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trx = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\try = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\trz = ((-this.adsRandom*.5)+Math.random()*this.adsRandom)*rndMult;\n\t\t\t\tdir.set(rx,ry,rz);\n\t\t\t\t\n\t\t\t\t//pos = new Vector3().copy( this.player.playerCollider.end ).addScaledVector( dir, this.player.playerCollider.radius * 1.5 );\n\t\t\t\tpos = this.player.fps.tipPosition;//new Vector3().copy( this.player.playerCollider.end ).addScaledVector( dir, this.player.playerCollider.radius * 1.5 );\n\t\t\n\t\t\t\tlet hitPoint = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\tlet hit = true;\n\t\t\t\tlet distance = 100;\n\t\t\t\tlet hitId = null;\n\t\t\t\tlet headShot = false;\n\t\t\t\tconst newDir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( dir.x, dir.y );\n\t\t\t\tconst hsl = this.hitScanHelper({dir:newDir});\n\t\t\t\t\n\t\t\t\tif(hsl != null){\n\t\t\t\t\thit = true;\n\t\t\t\t\thitPoint.copy(hsl.hitPoint);\n\t\t\t\t\tdistance = hsl.distance;\n\t\t\t\t\thitId = hsl.hitId;\n\t\t\t\t\theadShot = hsl.isHead;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//return {hit:true, hitPoint:hitPoint, distance:distance, hitId:hitId};\n\n\t\t\t\tkp = {\n\t\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\t\tdistance:0, \n\t\t\t\t\tstrength:0, \n\t\t\t\t\tgravMult:0\n\t\t\t\t}\n\t\t\t\tif(this.knockParams != null){\n\t\t\t\t\tkp = {\n\t\t\t\t\t\tpos:new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), \n\t\t\t\t\t\tdistance:this.knockParams.distance, \n\t\t\t\t\t\tstrength:this.knockParams.strength, \n\t\t\t\t\t\tgravMult:this.knockParams.gravMult\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tobj = {\n\t\t\t\t\thit:hit,\n\t\t\t\t\thitPoint:hitPoint,\n\t\t\t\t\tpos:pos,\n\t\t\t\t\tzSize:distance,\n\t\t\t\t\tdamage:this.damage,\n\t\t\t\t\thitId:hitId,\n\t\t\t\t\tid:appGlobal.localPlayer.id,\n\t\t\t\t\tknockParams:kp,\n\t\t\t\t\theadShot:headShot\n\t\t\t\t}\n\t\t\t\t\n\t\t\tbreak;\n\t\t}\n\t\treturn obj;\n\t}\n\n\n\n\thitScanHelper(OBJ){\n\t\t\n\t\tlet hitPoint = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tlet hitId = null;\n\t\tlet isHead = false;\n\t\tappGlobal.raycaster.setFromCamera( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(OBJ.dir.x,OBJ.dir.y), appGlobal.controller.playerCamera );\n\t\tconst intersection = appGlobal.raycaster.intersectObjects( appGlobal.hitScanArray, false );\n\n\t\tif ( intersection.length > 0 ) {\n\t\t\thitPoint.copy(intersection[ 0 ].point);\n\t\t\tif(intersection[0].object.playerId != null){\n\t\t\t\thitId = intersection[0].object.playerId;\n\t\t\t}\n\t\t\tif(intersection[0].object.isHead != null){\n\t\t\t\tisHead = intersection[0].object.isHead;\n\t\t\t}\n\t\t\treturn {hit:true, hitPoint:hitPoint, distance:intersection[ 0 ].distance, hitId:hitId, isHead:isHead};\n\t\t}\n\t\treturn null;\n\t\t\n\t}\n\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/Weapon.js?");

/***/ }),

/***/ "./src/WeaponEmissiveHandler.js":
/*!**************************************!*\
  !*** ./src/WeaponEmissiveHandler.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"WeaponEmissiveHandler\": () => (/* binding */ WeaponEmissiveHandler)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\nclass WeaponEmissiveHandler {\n\t//{aliveTime:aliveTime, bullet:bullet};\n\tconstructor(OBJ) {\n\t\t\n\t\tconst name = OBJ.name;\n\t\t\n\t\tthis.texture = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().load( './assets/textures/'+name+'-emissive.png' );\n\t\tthis.texture.wrapT = this.texture.wrapS = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.texture.offset.x = 0;\n\t\t\n\t\tthis.blastModel = OBJ.blastModel;\n\t\tthis.emissive = OBJ.emissive;\n\t\tthis.move = .333;\n\t\tthis.random = false;\n\t\tthis.hue = 0;\n\t\tthis.sat = 1;\n\t\tif(OBJ.skin != \"normal\"){\n\t\t\tthis.emissive.emissiveMap = this.texture;\n\t\t\tconst swatchArray = appGlobal.skinsHandler.swatches.getSwatchByName(OBJ.name, OBJ.skin).array;\n\t\t\tconst emissiveSwatchObject = appGlobal.skinsHandler.swatches.getSwatchEmissive(swatchArray);\n\t\t\tlet hsl = {h:0,s:0,l:0};\n\t\t\tconst emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\"#\"+emissiveSwatchObject.emissive).getHSL(hsl);\n\t\t\tconst color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\"#\"+emissiveSwatchObject.color);\n\t\t\tthis.emissive.color = color;\n\t\t\tthis.hue = hsl.h;\n\t\t\tthis.sat = hsl.s;\n\n\t\t\tswitch(name){\n\t\t\t\tcase \"sixgun\":\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = 0.16666666666;\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\tcase \"assault\":\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = 0.03333333333;\n\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\tcase \"sniper\":\n\t\t\t\t\tthis.emissive.roughness = 0.05;\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = .333;\n\t\t\t\tbreak;\n\t\t\t\tcase \"launcher\":\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = 0;\n\t\t\t\tbreak;\n\t\t\t\tcase \"submachine\":\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = .04;\n\t\t\t\tbreak;\n\t\t\t\tcase \"sticky\":\n\t\t\t\t\tthis.random = false;\n\t\t\t\t\tthis.move = 0;\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.random = true;\n\t\t\t\t\tthis.move = 0.07142857142\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.texture.offset.x = -this.move;\n\t\t}\n\t\t\n\t\tthis.blast = OBJ.blast;\n\t\tthis.blast.blendMode = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.blast.visible = false;\n\t\tthis.blast.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(0xffad2b);\n\t\t\n\t\tthis.highlight = 0;\n\t}\n\n\tupdate(){\n\t\tif(appGlobal.skinsHandler.currentSkin != \"normal\")\n\t\t\tthis.emissive.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL(this.hue, this.sat, this.highlight);\n\t\t\n\t\tthis.highlight += (0-this.highlight)*appGlobal.deltaTime*6;\n\t\tif(this.highlight>.5){\n\t\t\tthis.blast.visible = true;\n\t\t}else{\n\t\t\tthis.blast.visible = false;\n\t\t}\n\t}\n\n\tshoot(OBJ){\n\t\tif(!this.random){\n\t\t\tthis.texture.offset.x += this.move;\n\t\t}else{\n\t\t\tthis.texture.offset.x += (this.move*Math.floor(Math.random()*6));\n\t\t} \n\t\tthis.highlight = .6;\n\t\tthis.blastModel.rotation.z += (Math.PI*.35) + (Math.PI*Math.random());\n\t}\n\treload(){\n\t\tthis.texture.offset.x = -this.move;\n\t}\n\n\tkill(){\n\t\tthis.emissive.dispose();\n\t\tthis.texture.dispose();\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/WeaponEmissiveHandler.js?");

/***/ }),

/***/ "./src/World.js":
/*!**********************!*\
  !*** ./src/World.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"World\": () => (/* binding */ World)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _EnvironmentObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EnvironmentObject.js */ \"./src/EnvironmentObject.js\");\n\n//import { WorldMaterialGenerator } from './WorldMaterialGenerator.js';\n\n\nclass World {\n\n\t//constructor( i = 0, parent = null, worldScale=20 ) {\n\tconstructor( OBJ ) {\n\t\tthis.envObjAmount = Math.floor(OBJ.scale*2);\n\t\t//this.envTexture = new WorldMaterialGenerator();\n\t\tthis.index = OBJ.index;\n\t\tthis.worldDecrease = 1;\n\n\t\tthis.mesh;\n\t\t//this.hue = appGlobal.random();\n\t\tthis.hue = appGlobal.hue + 0.1 + ( -.1+appGlobal.random()*.2 ); \n\t\tthis.color  = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL((this.hue)%1.0, .4, .5);\n\t\tthis.envColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHSL((this.hue-.3)%1.0, 0.6, .5);\n\t\t\n\t\tthis.worldPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(OBJ.position);\n\t\tthis.scale = OBJ.scale;\n\t\tthis.envObjs = [];\n\t\t\n\t\tthis.collider = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().copy(this.worldPosition), this.scale );\n\t\tthis.velocity = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\n\t\tthis.sizeEz = 1.0;\n\t\t\n\t\tconst self = this;\n\t\tself.initMesh(OBJ);\n\t\tself.initEnvironment();\n\n\t}\n\n\tinitEnvironment(){\n\t\tfor ( let i = 0; i < this.envObjAmount; i ++ ) {\n\t\t\tconst env = new _EnvironmentObject_js__WEBPACK_IMPORTED_MODULE_1__.EnvironmentObject({i:i, parent:this.mesh, scale:this.scale, color:this.envColor, currArr:this.envObjs});\n\t\t\tthis.envObjs.push(env);\n\t\t}\n\t}\t\n\n\tinitMesh(OBJ){\n\t\tconst sphereMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())({color:this.color});\n\t\t//const sphereGeometryWorld = new SphereGeometry( OBJ.scale, 62, 62 );\n\t\tconst sphereGeometryWorld = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( OBJ.scale, 3 );\n\t\t\n\t\tthis.mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sphereGeometryWorld, sphereMaterial );\n\t\tthis.mesh.castShadow = false;\n\t\tthis.mesh.worldIndex = OBJ.index;\n\t\t\t//this.mesh.receiveShadow = true;\n\t\tthis.mesh.position.copy(OBJ.position);\n\t\t\n\t\tappGlobal.worldsHolder.add(this.mesh);\n\t\t\n\t\tappGlobal.hitScanArray.push(this.mesh);\n\t\tappGlobal.grappleMeshes.push(this.mesh);\n\t}\n\n\tupdate(){\n\t\t\t\n\t\t// this.worldDecrease -=0.0001;\n\t\t// if(this.worldDecrease < 0.1)\n\t\t// \tthis.worldDecrease = 0.1;\n\t\t\n\t\t//this.sizeEz += (appGlobal.worldSize-this.sizeEz)*.07;\n\t\t// this.sizeEz = 1;//+= (appGlobal.worldSize-this.sizeEz)*.07;\n\t\t// this.mesh.scale.set(this.sizeEz, this.sizeEz, this.sizeEz);\n\t\t// this.collider.radius = this.scale*this.sizeEz;\n\t\t\n\t\t// for(let i = 0; i<this.envObjs.length; i++){\n\t\t// \tthis.envObjs[i].update({envObjs:this.envObjs, size:this.sizeEz});\n\t\t// }\n\t}\n\n\tkill (){\n\t\t\n\t\tfor ( let i = 0; i <this.envObjs.length; i ++ ) {\n\t\t\tthis.envObjs[i].kill();\n\t\t}\n\t\t\n\t}\n\n\treset(){\n\t\t\n\t\tthis.initMesh();\n\t\tthis.sizeEz = 1;\n\t\tthis.envObjs = [];\n\t\tthis.initEnvironment();\n\t\t// for ( let i = 0; i < this.envObjAmount; i ++ ) {\n\t\t// \tconst env = new EnvironmentObject({i:i, parent:this.mesh, scale:this.scale});\n\t\t// \tthis.envObjs.push(env);\n\t\t// }\n\t}\n\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/World.js?");

/***/ }),

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _scripts_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scripts/jsm/libs/stats.module.js */ \"./src/scripts/jsm/libs/stats.module.js\");\n/* harmony import */ var _scripts_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scripts/jsm/loaders/GLTFLoader.js */ \"./src/scripts/jsm/loaders/GLTFLoader.js\");\n/* harmony import */ var _scripts_jsm_math_Octree_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scripts/jsm/math/Octree.js */ \"./src/scripts/jsm/math/Octree.js\");\n/* harmony import */ var _scripts_jsm_math_Capsule_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scripts/jsm/math/Capsule.js */ \"./src/scripts/jsm/math/Capsule.js\");\n/* harmony import */ var _World_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./World.js */ \"./src/World.js\");\n/* harmony import */ var _PlayerController_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./PlayerController.js */ \"./src/PlayerController.js\");\n/* harmony import */ var _CustomScene_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./CustomScene.js */ \"./src/CustomScene.js\");\n/* harmony import */ var _StickyBullet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StickyBullet.js */ \"./src/StickyBullet.js\");\n/* harmony import */ var _RocketBullet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RocketBullet.js */ \"./src/RocketBullet.js\");\n/* harmony import */ var _AutoBullet_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AutoBullet.js */ \"./src/AutoBullet.js\");\n/* harmony import */ var _SniperBullet_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./SniperBullet.js */ \"./src/SniperBullet.js\");\n/* harmony import */ var _GlobalParticleHandler_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./GlobalParticleHandler.js */ \"./src/GlobalParticleHandler.js\");\n/* harmony import */ var _RemotePlayer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./RemotePlayer.js */ \"./src/RemotePlayer.js\");\n/* harmony import */ var _ItemHandler_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ItemHandler.js */ \"./src/ItemHandler.js\");\n/* harmony import */ var _RemoteBulletHandler_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./RemoteBulletHandler.js */ \"./src/RemoteBulletHandler.js\");\n/* harmony import */ var _GlobalSoundHandler_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./GlobalSoundHandler.js */ \"./src/GlobalSoundHandler.js\");\n/* harmony import */ var _AbilityPlanetSwitch_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./AbilityPlanetSwitch.js */ \"./src/AbilityPlanetSwitch.js\");\n/* harmony import */ var _AbilityWalls_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./AbilityWalls.js */ \"./src/AbilityWalls.js\");\n/* harmony import */ var _AbilityDirectionalBoost_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./AbilityDirectionalBoost.js */ \"./src/AbilityDirectionalBoost.js\");\n/* harmony import */ var _AbilityTeleport_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./AbilityTeleport.js */ \"./src/AbilityTeleport.js\");\n/* harmony import */ var _AbilityDoubleJump_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./AbilityDoubleJump.js */ \"./src/AbilityDoubleJump.js\");\n/* harmony import */ var _AbilityNade_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./AbilityNade.js */ \"./src/AbilityNade.js\");\n/* harmony import */ var _AbilityJumpPad_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./AbilityJumpPad.js */ \"./src/AbilityJumpPad.js\");\n/* harmony import */ var _AbilitySticky_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./AbilitySticky.js */ \"./src/AbilitySticky.js\");\n/* harmony import */ var _AbilityBlink_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./AbilityBlink.js */ \"./src/AbilityBlink.js\");\n/* harmony import */ var _RemoteController_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./RemoteController.js */ \"./src/RemoteController.js\");\n/* harmony import */ var _PlayerSelectScene_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./PlayerSelectScene.js */ \"./src/PlayerSelectScene.js\");\n/* harmony import */ var _TitleScene_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./TitleScene.js */ \"./src/TitleScene.js\");\n/* harmony import */ var _ParallaxGUI_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./ParallaxGUI.js */ \"./src/ParallaxGUI.js\");\n/* harmony import */ var _Settings_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./Settings.js */ \"./src/Settings.js\");\n/* harmony import */ var _SkinsHandler_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./SkinsHandler.js */ \"./src/SkinsHandler.js\");\n/* harmony import */ var _Servers_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./Servers.js */ \"./src/Servers.js\");\n/* harmony import */ var _GamePad_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./GamePad.js */ \"./src/GamePad.js\");\n/* harmony import */ var https_cdn_socket_io_4_4_1_socket_io_esm_min_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! https://cdn.socket.io/4.4.1/socket.io.esm.min.js */ \"https://cdn.socket.io/4.4.1/socket.io.esm.min.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([https_cdn_socket_io_4_4_1_socket_io_esm_min_js__WEBPACK_IMPORTED_MODULE_33__]);\nhttps_cdn_socket_io_4_4_1_socket_io_esm_min_js__WEBPACK_IMPORTED_MODULE_33__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n//import * as THREE from 'three';\r\nvar THREE = __webpack_require__(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst abilities = {\r\n\tplanetSwitch:{\r\n\t\t\tclass:_AbilityPlanetSwitch_js__WEBPACK_IMPORTED_MODULE_16__.AbilityPlanetSwitch,\r\n\t\t\ttype:\"press\",\r\n\t\t\tcooldown:0,\r\n\t\t\tkey:\"KeyE\",\r\n\t\t\tabilityKey:\"E\",\r\n\t\t\tkillOnLand:true,\r\n\t\t\tname:\"planet switch\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"planet-switch\",\r\n\t},\r\n\twalls:{\r\n\t\t\tclass:_AbilityWalls_js__WEBPACK_IMPORTED_MODULE_17__.AbilityWalls,\r\n\t\t\ttype:\"press\",\r\n\t\t\tcooldown:9000,\r\n\t\t\tkey:\"KeyQ\",\r\n\t\t\tabilityKey:\"Q\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"wall hack\",\r\n\t\t\tabilityTime:3000,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"wall-hack\",\r\n\t},\r\n\tnade:{\r\n\t\t\tclass:_AbilityNade_js__WEBPACK_IMPORTED_MODULE_21__.AbilityNade,\r\n\t\t\ttype:\"press\",\r\n\t\t\tcooldown:9000,\r\n\t\t\tkey:\"KeyQ\",\r\n\t\t\tabilityKey:\"Q\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"nade\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"wall-hack\",\r\n\t},jumpPad:{\r\n\t\t\tclass:_AbilityJumpPad_js__WEBPACK_IMPORTED_MODULE_22__.AbilityJumpPad,\r\n\t\t\ttype:\"press\",\r\n\t\t\tcooldown:9000,\r\n\t\t\tkey:\"KeyQ\",\r\n\t\t\tabilityKey:\"Q\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"nade\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"wall-hack\",\r\n\t},sticky:{\r\n\t\t\tclass:_AbilitySticky_js__WEBPACK_IMPORTED_MODULE_23__.AbilitySticky,\r\n\t\t\ttype:\"press\",\r\n\t\t\tcooldown:9000,\r\n\t\t\tkey:\"KeyQ\",\r\n\t\t\tabilityKey:\"Q\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"sticky\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"wall-hack\",\r\n\t},\r\n\tdirectionalBoost:{\r\n\t\t\tclass:_AbilityDirectionalBoost_js__WEBPACK_IMPORTED_MODULE_18__.AbilityDirectionalBoost,\r\n\t\t\ttype:\"none\",\r\n\t\t\tcooldown:0,\r\n\t\t\tkey:\"LeftShift\",\r\n\t\t\tabilityKey:\"Shift\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"directional boost\",//planet switch\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:false,\r\n\t\t\tsound:null,\r\n\t},\r\n\tteleport:{\r\n\t\t\tclass:_AbilityTeleport_js__WEBPACK_IMPORTED_MODULE_19__.AbilityTeleport,\r\n\t\t\ttype:\"pressConfirm\",\r\n\t\t\tcooldown:7000,\r\n\t\t\tkey:\"KeyE\",\r\n\t\t\tabilityKey:\"E\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"teleport\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"teleport\",\r\n\t},\r\n\tdoubleJump:{\r\n\t\t\tclass:_AbilityDoubleJump_js__WEBPACK_IMPORTED_MODULE_20__.AbilityDoubleJump,\r\n\t\t\ttype:\"none\",\r\n\t\t\tcooldown:0,\r\n\t\t\tkey:\"Space\",\r\n\t\t\tabilityKey:\"Space\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"double jump\",\r\n\t\t\tabilityTime:0,\r\n\t\t\tcooldownUI:false,\r\n\t\t\tsound:\"double-jump\",\r\n\t},\r\n\tblink:{\r\n\t\t\tclass:_AbilityBlink_js__WEBPACK_IMPORTED_MODULE_24__.AbilityBlink,\r\n\t\t\ttype:\"none\",\r\n\t\t\tcooldown:3000,\r\n\t\t\tkey:\"Shift\",\r\n\t\t\tabilityKey:\"Shift\",\r\n\t\t\tkillOnLand:false,\r\n\t\t\tname:\"blink\",\r\n\t\t\tabilityTime:.2,\r\n\t\t\tcooldownUI:true,\r\n\t\t\tsound:\"blink\",\r\n\t},\r\n\t\r\n}\r\nconst particles = {\r\n\texplosion:{\r\n\t\tburst:true,\r\n\t\tamount:20,\r\n\t    killTimeout:400, \r\n\t    mesh:\"box\", \r\n\t    col: new THREE.Color().setHSL(.1,1,.7), \r\n\t    pos:new THREE.Vector3(), \r\n\t    rndPos:0.8, \r\n\t    rot:new THREE.Vector3(), \r\n\t    rndRot:0, \r\n\t    rndScl:.5, \r\n\t    scl:.1,\r\n\t    velPosScale:40,\r\n\t\tvelRot:0,\r\n\t\tvelScl:-5, \r\n\t\tvelPosRnd: 3,\r\n\t\tlookAt:true,\r\n\t\tlookAtLength:3,\r\n\t\tsound:\"explosion\"\r\n\t},\r\n\tshot:{\r\n\t\tburst:true,\r\n\t\tamount:2,\r\n\t    killTimeout:400, \r\n\t    mesh:\"box\", \r\n\t    col: new THREE.Color().setHSL(0,0,.4), \r\n\t    pos:new THREE.Vector3(), \r\n\t    rndPos:0, \r\n\t    rot:new THREE.Vector3(), \r\n\t    rndRot:Math.random()*(Math.PI*2), \r\n\t    rndScl:0, \r\n\t    scl:.15,\r\n\t    velPosScale:10,\r\n\t\tvelRot:0,\r\n\t\tvelScl:-1, \r\n\t\tvelPosRnd: 1,\r\n\t\tlookAt:false,\r\n\t\tlookAtLength:0,\r\n\t\tsound:null\r\n\r\n\t},\r\n\tboost:{\r\n\t\tburst:false,\r\n\t\tamount:10,\r\n\t    killTimeout:600, \r\n\t    mesh:\"box\", \r\n\t    col: new THREE.Color().setHSL(.1,1,.7), \r\n\t    pos:new THREE.Vector3(), \r\n\t    rndPos:.1, \r\n\t    rot:new THREE.Vector3(), \r\n\t    rndRot:Math.random()*(Math.PI*2), \r\n\t    rndScl:0, \r\n\t    scl:.17,\r\n\t    velPosScale:2,\r\n\t\tvelRot:0,\r\n\t\tvelScl:-8, \r\n\t\tvelPosRnd: 1,\r\n\t\tlookAt:false,\r\n\t\tlookAtLength:0,\r\n\t\tsound:null\r\n\t},\r\n\tblink:{\r\n\t\tburst:false,\r\n\t\tamount:30,\r\n\t    killTimeout:600, \r\n\t    mesh:\"box\", \r\n\t    col: new THREE.Color().setHSL(.6,1,.7), \r\n\t    pos:new THREE.Vector3(), \r\n\t    rndPos:1, \r\n\t    rot:new THREE.Vector3(), \r\n\t    rndRot:Math.random()*(Math.PI*2), \r\n\t    rndScl:0, \r\n\t    scl:.3,\r\n\t    velPosScale:2,\r\n\t\tvelRot:0,\r\n\t\tvelScl:-5, \r\n\t\tvelPosRnd: 1,\r\n\t\tlookAt:false,\r\n\t\tlookAtLength:0,\r\n\t\tsound:null\r\n\t},\r\n\tdoubleJump:{\r\n\t\tburst:true,\r\n\t\tamount:5,\r\n\t    killTimeout:300, \r\n\t    mesh:\"sphere\", \r\n\t    col: new THREE.Color().setHSL(.1,1,.7), \r\n\t    pos:new THREE.Vector3(), \r\n\t    rndPos:1.4, \r\n\t    rot:new THREE.Vector3(), \r\n\t    rndRot:Math.random()*(Math.PI*2), \r\n\t    rndScl:0, \r\n\t    scl:.2,\r\n\t    velPosScale:2,\r\n\t\tvelRot:0,\r\n\t\tvelScl:-4, \r\n\t\tvelPosRnd: 5,\r\n\t\tlookAt:false,\r\n\t\tlookAtLength:0,\r\n\t\tsound:null\r\n\t},\r\n}\r\n\r\nconst weapons = {\r\n\tsticky:{\r\n\t\tshootCooldown:150,    \r\n\t\tbullet:_StickyBullet_js__WEBPACK_IMPORTED_MODULE_7__.StickyBullet, \r\n\t\tammoAmount:16,    \r\n\t\treloadCooldown:1000,  \r\n\t\tzoom:80,    \r\n\t\tadsRandom:.5, \r\n\t\timpulse:60 , \r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:10, strength:40, gravMult:4},\r\n\t\tname:\"sticky\",\r\n\t\tdamage:60,\r\n\t\tsound:\"rocket2\",\r\n\t\tabilities:[abilities.doubleJump],\r\n\t\tmodel:\"sticky\",\r\n\t\tadsMouseSenseMult:0\r\n\t},\r\n\tlauncher:{\r\n\t\tshootCooldown:300,  \r\n\t\tbullet:_RocketBullet_js__WEBPACK_IMPORTED_MODULE_8__.RocketBullet, \r\n\t\tammoAmount:12,    \r\n\t\treloadCooldown:1000,  \r\n\t\tzoom:80,    \r\n\t\tadsRandom:.1, \r\n\t\timpulse:90, \r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:10, strength:40, gravMult:4},\r\n\t\tname:\"launcher\",\r\n\t\tdamage:60,\r\n\t\tsound:\"rocket\",\r\n\t\tabilities:[abilities.doubleJump],\r\n\t\tmodel:\"launcher\",\r\n\t\tadsMouseSenseMult:0\r\n\t},\r\n\tautomatic:{\r\n\t\tshootCooldown:80,  \r\n\t\tbullet:_AutoBullet_js__WEBPACK_IMPORTED_MODULE_9__.AutoBullet,   \r\n\t\tammoAmount:30,   \r\n\t\treloadCooldown:1200,  \r\n\t\tzoom:70,    \r\n\t\tadsRandom:.2, \r\n\t\timpulse:180, \r\n\t\tname:\"automatic\",\r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:6, strength:25, gravMult:4},\r\n\t\tdamage:13,\r\n\t\t//damage:1,\r\n\t\tsound:\"automatic-2\",\r\n\t\tabilities:[abilities.blink],\r\n\t\tmodel:\"assault\",\r\n\t\tadsMouseSenseMult:0\r\n\t},\r\n\tsubmachine:{\r\n\t\tshootCooldown:50, \r\n\t\tbullet:_AutoBullet_js__WEBPACK_IMPORTED_MODULE_9__.AutoBullet,   \r\n\t\tammoAmount:25,   \r\n\t\treloadCooldown:800,   \r\n\t\tzoom:80,    \r\n\t\tadsRandom:.3, \r\n\t\timpulse:180, \r\n\t\tname:\"submachine\",\r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:6, strength:15, gravMult:4},\r\n\t\tdamage:9,\r\n\t\tsound:\"sub\",\r\n\t\tabilities:[abilities.nade],\r\n\t\tmodel:\"submachine\",\r\n\t\tadsMouseSenseMult:0\r\n\t},\r\n\tsniper:{\r\n\t\tshootCooldown:350,    \r\n\t\tbullet:_SniperBullet_js__WEBPACK_IMPORTED_MODULE_10__.SniperBullet,   \r\n\t\tammoAmount:3,    \r\n\t\treloadCooldown:1000,  \r\n\t\tzoom:27,    \r\n\t\tadsRandom:.1, \r\n\t\timpulse:180, \r\n\t\tcontactParticle:particles.shot,\r\n\t\tname:\"sniper\",\r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:8, strength:60, gravMult:8},\r\n\t\tdamage:70,\r\n\t\tsound:\"sniper2\",\r\n\t\tabilities:[abilities.walls],\r\n\t\tmodel:\"sniper\",\r\n\t\tadsMouseSenseMult:.5\r\n\t},\r\n\tsixgun:{\r\n\t\tshootCooldown:200,    \r\n\t\tbullet:_SniperBullet_js__WEBPACK_IMPORTED_MODULE_10__.SniperBullet,   \r\n\t\tammoAmount:6,    \r\n\t\treloadCooldown:800,  \r\n\t\tzoom:70,    \r\n\t\tadsRandom:.2, \r\n\t\timpulse:180, \r\n\t\tname:\"sixgun\",\r\n\t\tknockParams:{pos:new THREE.Vector3(), distance:8, strength:50, gravMult:6},\r\n\t\tdamage:50,\r\n\t\tsound:\"sniper-six2\",\r\n\t\tabilities:[abilities.sticky],\r\n\t\tmodel:\"sixgun\",\r\n\t\tadsMouseSenseMult:0\r\n\t},\r\n}\r\n\r\n\r\n\r\nconst globalHelperFunctions = {\r\n\tknockPlayer:\r\n\t\tfunction(OBJ){\r\n\t\t\tif(appGlobal.localPlayer != null){\r\n\t\t\t\tappGlobal.localPlayer.knockPlayer(OBJ);\r\n\t\t\t}\r\n\t\t\t//for(let i = 0; i<appGlobal.playerArray.length; i++){\r\n\t\t\t\t//appGlobal.playerArray[i].knockPlayer(OBJ);\r\n\t\t\t//}\r\n\t\t},\r\n\tplayerSphereCollision:\r\n\t\tfunction(collider, id){\r\n\t\t\t//for (const obj in appGlobal.remotePlayers) {\r\n\t\t\tfor (let i = 0;i<appGlobal.remotePlayers.length; i++){\r\n\t\t\t\tif(appGlobal.remotePlayers[i].id != id && appGlobal.remotePlayers[i].playing){\r\n\t\t\t\t\tconst start = new THREE.Vector3();\r\n\t\t\t\t\tconst end = new THREE.Vector3();\r\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.start.getWorldPosition(start);\r\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.end.getWorldPosition(end);\r\n\t\t\t\t\tconst vector = new THREE.Vector3();\r\n\t\t\t\t\tconst center = vector.addVectors(start, end ).multiplyScalar( 0.5 );\r\n\r\n\t\t\t\t\tconst playerRadius = appGlobal.remotePlayers[i].remotePlayer.radius*2;\r\n\t\t\t\t\tconst r = playerRadius + collider.radius;\r\n\t\t\t\t\tconst r2 = r * r;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// approximation: player = 3 spheres\r\n\t\t\t\t\tlet t = 0;\r\n\t\t\t\t\tfor ( const point of [ start, center, end ] ) {\r\n\r\n\t\t\t\t\t\tconst d2 = point.distanceToSquared( collider.center );\r\n\r\n\t\t\t\t\t\tif ( d2 < r2 ) {\r\n\t\t\t\t\t\t\tlet headShot = false;\r\n\t\t\t\t\t\t\tif(t==2){\r\n\t\t\t\t\t\t\t\theadShot = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {id:appGlobal.remotePlayers[i].id, headShot:headShot};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tt++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\tsplashDamage:\r\n\t\tfunction(OBJ){\r\n\t\t\tconst arr = [];\r\n\t\t\t//for (const obj in appGlobal.remotePlayers) {\r\n\t\t\tfor (let i = 0;i<appGlobal.remotePlayers.length; i++){\r\n\t\t\t\t\r\n\t\t\t\tif(appGlobal.remotePlayers[i].remotePlayer != null){\r\n\t\t\t\t\tconst start = new THREE.Vector3();\r\n\t\t\t\t\tappGlobal.remotePlayers[i].remotePlayer.start.getWorldPosition(start);\r\n\t\t\t\t\tconst dist = start.distanceTo(OBJ.pos);\r\n\t\t\t\t\tconst id = appGlobal.remotePlayers[i].id;\r\n\t\t\t\t\tif(dist < OBJ.distance){\r\n\t\t\t\t\t\tconst s = (OBJ.distance-dist)/OBJ.distance;\r\n\t\t\t\t\t\tconst obj = {damageMult:s, id:id};\r\n\t\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn arr;\r\n\t\t},\r\n\tplayerDoDamage:\r\n\t\tfunction(OBJ){ \r\n\t\t\tif(appGlobal.localPlayer !=null ){\r\n\t\t\t\tappGlobal.localPlayer.handleDoDamage(OBJ);\r\n\t\t\t}\r\n\t\t},\r\n\tplayerReset:\r\n\t\t\r\n\t\tfunction(id, resetFromKill){\r\n\t\t\t\r\n\t\t\tclearTimeout(appGlobal.serverInfoTimeout);\r\n\t\t\tappGlobal.playing = false;\r\n\t\t\t\r\n\t\t\tif(appGlobal.localPlayer != null){\r\n\t\t\t\tappGlobal.localPlayer.kill();\r\n\t\t\t\tappGlobal.localPlayer = null;\r\n\t\t\t\tappGlobal.controller.player = null;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t// socket.emit('handleDeath', {\r\n\t\t\t//   id: socket.id\r\n\t\t\t// });\r\n\t\t\tif(resetFromKill){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(appGlobal.gameState==\"game\"){\r\n\t\t\t\t\t\tdocument.exitPointerLock();\r\n\t\t\t\t\t\toverlayChildDisplayHelper();\r\n\t\t\t\t\t\ttoggleOverlay(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 3000);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\tgetRemotePlayerById:\r\n\t\tfunction(id){\r\n\t\t\tfor(let i = 0;i<appGlobal.remotePlayers.length; i++){\r\n\t\t\t\t//console.log(\"id = \"+id);\r\n\t\t\t\t//console.log(\"looop = \"+appGlobal.remotePlayers[i].id);\r\n\t\t\t\tif(appGlobal.remotePlayers[i].id == id){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tcontroller:appGlobal.remotePlayers[i], \r\n\t\t\t\t\t\tplayer:appGlobal.remotePlayers[i].remotePlayer, \r\n\t\t\t\t\t\tindex:i\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\ttryToRemoveGhost:\r\n\t\tfunction(fromServerArray){\r\n\t\t\tconst arr = [];\r\n\t\t\tfor(let i = 0;i<appGlobal.remotePlayers.length; i++){\r\n\t\t\t\tif(!checkIsInArr(fromServerArray, appGlobal.remotePlayers[i].id)){\r\n\t\t\t\t\tarr.push(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(let x = 0; x<fromServerArray.length; x++){\r\n\t\t\t\tif(!fromServerArray[x].playing){\r\n\t\t\t\t\tarr.push(x);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//console.log(\"ghost array length = \"+arr.length);\r\n\t\t\tfor(let t = 0; t<arr.length; t++){\r\n\t\t\t\tconst index = arr[t];\r\n\r\n\t\t\t\tif(appGlobal.remotePlayers[index]!=null){\r\n\t\t\t\t\tappGlobal.remotePlayers[index].kill();\r\n\t\t\t\t\tappGlobal.remotePlayers.splice(index,1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tgetDistanceForSound:\r\n\t\t\tfunction(position){\r\n\t\t\t\tif(appGlobal.controller != null){\r\n\t\t\t\t\t//3D AUDIO falloff\r\n\t\t\t\t\tconst max = 60;\r\n\t\t\t\t\tconst globalCamPos = new THREE.Vector3();\r\n\t\t\t\t\tappGlobal.controller.camera.getWorldPosition(globalCamPos);\r\n\t\t\t\t\tlet distance = Math.abs(position.distanceTo(globalCamPos));\r\n\t\t\t\t\tconst d = clamp(distance, 0.01, max );\r\n\t\t\t\t\tconst final = clamp( Math.abs(1.0 - (max/d)) ,0, 1 );\r\n\t\t\t\t\treturn final;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t},\r\n\tinitPlayerDom:\r\n\t\tfunction(OBJ){\r\n\t\t\t\r\n\t\t\tif(document.getElementById('' + OBJ.id + '')!=null){\r\n\t\t\t\r\n\t\t\t\treturn document.getElementById(''+OBJ.id+'');\r\n\t\t\t\r\n\t\t\t}else{\r\n\r\n\t\t\t\tlet dom = document.createElement(\"div\");\r\n\t\t\t\tdom.id = OBJ.id;\r\n\t\t\t\tif(OBJ.isRemote){\r\n\t\t\t\t\tdom.className = \"player-info\";\r\n\t\t\t\t\tdocument.getElementById(\"player-list\").append(dom);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.getElementById(\"player-list\").prepend(dom);\r\n\t\t\t\t\tdom.className = \"player-info curr-player\";\r\n\t\t\t\t}\r\n\t\t\t\tdom.innerHTML = \"<span class='player-name'>\" + OBJ.id + \"</span>    <span class='kill-count'>\"+OBJ.killCount+\"</span>\";\r\n\t\t\t\treturn dom;\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\tupdatePlayerDom:\r\n\t\tfunction(OBJ){\r\n\t\t\tOBJ.dom.innerHTML = \"<span class='player-name'>\" + OBJ.id + \"</span>    <span class='kill-count'>\"+OBJ.killCount+\"</span>\";\r\n\t\t},\r\n\tkillPlayerDom:\r\n\t\tfunction(DOM){\r\n\t\t\tDOM.remove();\r\n\t\t},\r\n\tcheckPlaying:\r\n\t\tfunction(){\r\n\t\t\treturn appGlobal.playing && appGlobal.localPlayer != null;\r\n\t\t},\r\n\thandleInitPlaying:\r\n\t\tfunction(){\r\n\t\t\tappGlobal.playing = true;\r\n\t\t\tappGlobal.gameState = \"game\";\r\n\t\t  \toverlayChildDisplayHelper();\r\n\t\t\ttoggleOverlay(false);\r\n\t\t\t\r\n\t\t\tdocument.body.requestPointerLock();\r\n\r\n\t\t\tappGlobal.globalHelperFunctions.setUserName();\r\n\t\t\tappGlobal.controller.initPlayer({ weapon: currentSelectWeapon, movement:currentMovement,  name:appGlobal.user});\t\r\n\t\t\tappGlobal.localPlayer = appGlobal.controller.player;\r\n\t\t\tconst skin = appGlobal.skinsHandler.getCurrentSkinOnCharacter(currMeshName);\r\n\t\t\r\n\t\t\tsocket.emit('startPlaying', {\r\n\t\t\t\tid:socket.id,\r\n\t\t\t\tmeshName:currMeshName,\r\n\t\t\t\tname:appGlobal.user,\r\n\t\t\t\tmovement:currMovementName,\r\n\t\t\t\tskin:skin\r\n\t\t\t});\r\n\r\n\t\t\tappGlobal.serverInfoTimeout = window.setInterval(()=> {\r\n\t\t\t\r\n\t\t\t\tsocket.emit('sendPlayerData', {\r\n\t\t\t\t\tid: socket.id,\r\n\t\t\t\t\tanimationObject:appGlobal.localPlayer.animationObject,\r\n\t\t\t\t\tpos: appGlobal.localPlayer.playerCollider.start,\r\n\t\t\t\t\trot: appGlobal.localPlayer.remoteQuaternion,\r\n\t\t\t\t\tcamRotation:appGlobal.localPlayer.camera.rotation.x, \r\n\t\t\t\t\t//crouching: appGlobal.localPlayer.crouching,\r\n\t\t\t\t})\r\n\t\t\t},1000/SERVERFPS);\r\n\t\t},\r\n\tsetUserName:\r\n\t\tfunction(){\r\n\t\t\t// if(document.getElementById(\"user-name\").value != \"\" && document.getElementById(\"user-name\").value != null){\r\n\t\t\t// \tappGlobal.user = document.getElementById(\"user-name\").value;\r\n\t\t\t// }\r\n\t\t\t// document.getElementById(\"user-name-holder\").style.display = \"none\";\r\n\t\t},\r\n\ttearDownObject:\r\n\t\tfunction (object){\r\n\t\t\tobject.traverse( function ( obj ) {\r\n\t\t\t\tif(obj.isMesh || obj.isSkinnedMesh){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(obj.materials !=null ){\r\n\t\t\t\t\t\tfor(let i = 0; i<obj.materials.length; i++){\r\n\t\t\t\t\t\t\tif(obj.materials[i].map!=null){\r\n\t\t\t\t\t\t\t\tobj.materials[i].map.dispose();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(obj.materials[i].alphaMap!=null){\r\n\t\t\t\t\t\t\t\tobj.materials[i].alphaMap.dispose();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tobj.materials[i].dispose();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(obj.material !=null ){\r\n\t\t\t\t\t\tif(obj.material.map!=null){\r\n\t\t\t\t\t\t\tobj.material.map.dispose();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(obj.material.alphaMap!=null){\r\n\t\t\t\t\t\t\tobj.material.alphaMap.dispose();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tobj.material.dispose();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tobj.geometry.dispose();\r\n\t\t\t\t\t//obj.dispose();\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\tremoveFromHitscanArray:\r\n\t\tfunction(OBJ){\r\n\t\t\tfor(let i = 0; i<appGlobal.hitScanArray.length; i++){\r\n\t\t\t\tif(appGlobal.hitScanArray[i]==OBJ){\r\n\t\t\t\t\tappGlobal.hitScanArray.splice(i, 1);\r\n\t\t      \t\ti--; \r\n\t\t      \t}\r\n\t\t\t}\r\n\t\t\t//appGlobal.hitScanArray.push(this.mesh, this.head);\r\n\t\t}\r\n\r\n}\r\n\r\n\r\nconst settings = {\r\n\t\"mouseSens\":1,\r\n\t\"volume\":1,\r\n\t\"crossHairColor\":\"fff\",\r\n\t\"adsMouseSenseMult\":1,\r\n\t\"gamePad\":\"false\",\r\n\t\"showInstructions\":\"true\"\r\n}\r\nwindow.settingsParams = settings;\r\n\r\nconst appGlobal = {\r\n\tgravity:50,\r\n\tworldScale:15,\r\n\tscene:null,\r\n\tkeyStates:{},\r\n\tSTEPS_PER_FRAME:5,\r\n\tdeltaTime:0,\r\n\tworld:null,\r\n\tmouse:{down:false},\r\n\tlocalPlayer:null,\r\n\tdoingOverlay:true,\r\n\tplaying:false,\r\n\tcontroller:null,\r\n\tparticleHandler:null,\r\n\tweapons:weapons,\r\n\tglobalHelperFunctions:globalHelperFunctions,\r\n\traycaster : new THREE.Raycaster(),\r\n\thitScanArray: [],\r\n\tworldSize:1,\r\n\tserverInfoTimeout:null,\r\n\tgameState:\"pregame\",\r\n\tremoteBullets:null,\r\n\tsocket:null,\r\n\tparticles:particles,\r\n\tworlds:[],\r\n\tgrappleMeshes:[],\r\n\tcharacterOutlineMeshes:[],\r\n\trandom:null,\r\n\titemHandler:null,\r\n\tserverItemArr:[],\r\n\tsoundHandler:null,\r\n\thue:0,\r\n\tloadObjs:[\r\n\t\t{name:\"anis\",    \t    \tmodel:null, loaded:false, url:\"character-anis-3.glb\"},\r\n\t\t{name:\"body-launcher\",  \tmodel:null, loaded:false, url:\"models/launcher/default/body.glb\"         },\r\n\t\t{name:\"body-sticky\",    \tmodel:null, loaded:false, url:\"models/sticky/default/body.glb\"         },\r\n\t\t{name:\"body-assault\",   \tmodel:null, loaded:false, url:\"models/assault/default/body.glb\"         },\r\n\t\t{name:\"body-submachine\",   \tmodel:null, loaded:false, url:\"models/submachine/default/body.glb\"         },\r\n\t\t{name:\"body-sixgun\",    \tmodel:null, loaded:false, url:\"models/sixgun/default/body.glb\"         },\r\n\t\t{name:\"body-sniper\",    \tmodel:null, loaded:false, url:\"models/sniper/default/body.glb\"         },\r\n\t\t{name:\"fps-sniper\",       \tmodel:null, loaded:false, url:\"models/sniper/default/fps.glb\"    },\r\n\t\t{name:\"fps-sixgun\",       \tmodel:null, loaded:false, url:\"models/sixgun/default/fps.glb\"    },\r\n\t\t{name:\"fps-launcher\",     \tmodel:null, loaded:false, url:\"models/launcher/default/fps.glb\"  },\r\n\t\t{name:\"fps-sticky\",       \tmodel:null, loaded:false, url:\"models/sticky/default/fps.glb\"  },\r\n\t\t{name:\"fps-submachine\",   \tmodel:null, loaded:false, url:\"models/submachine/default/fps.glb\"  },\r\n\t\t{name:\"fps-assault\",      \tmodel:null, loaded:false, url:\"models/assault/default/fps.glb\"  },\r\n\t\t\r\n\t\t{name:\"title\",      \t\tmodel:null, loaded:false, url:\"zerochill.glb\"  },\r\n\t\t\r\n\t\t{name:\"assault-boost\",      model:null, loaded:false, url:\"models/assault/default/boost.glb\"  },\r\n\t\t{name:\"assault-directional\",model:null, loaded:false, url:\"models/assault/default/directional.glb\"  },\r\n\t\t{name:\"assault-teleport\",   model:null, loaded:false, url:\"models/assault/default/teleport.glb\"  },\r\n\t\t\r\n\t\t{name:\"submachine-boost\",      model:null, loaded:false, url:\"models/submachine/default/boost.glb\"  },\r\n\t\t{name:\"submachine-directional\",model:null, loaded:false, url:\"models/submachine/default/directional.glb\"  },\r\n\t\t{name:\"submachine-teleport\",   model:null, loaded:false, url:\"models/submachine/default/teleport.glb\"  },\r\n\t\t\r\n\t\t{name:\"sticky-boost\",      model:null, loaded:false, url:\"models/sticky/default/boost.glb\"  },\r\n\t\t{name:\"sticky-directional\",model:null, loaded:false, url:\"models/sticky/default/directional.glb\"  },\r\n\t\t{name:\"sticky-teleport\",   model:null, loaded:false, url:\"models/sticky/default/teleport.glb\"  },\r\n\t\t\r\n\t\t{name:\"launcher-boost\",      model:null, loaded:false, url:\"models/launcher/default/boost.glb\"  },\r\n\t\t{name:\"launcher-directional\",model:null, loaded:false, url:\"models/launcher/default/directional.glb\"  },\r\n\t\t{name:\"launcher-teleport\",   model:null, loaded:false, url:\"models/launcher/default/teleport.glb\"  },\r\n\r\n\t\t{name:\"sixgun-boost\",      model:null, loaded:false, url:\"models/sixgun/default/boost.glb\"  },\r\n\t\t{name:\"sixgun-directional\",model:null, loaded:false, url:\"models/sixgun/default/directional.glb\"  },\r\n\t\t{name:\"sixgun-teleport\",   model:null, loaded:false, url:\"models/sixgun/default/teleport.glb\"  },\r\n\r\n\t\t{name:\"sniper-boost\",      model:null, loaded:false, url:\"models/sniper/default/boost.glb\"  },\r\n\t\t{name:\"sniper-directional\",model:null, loaded:false, url:\"models/sniper/default/directional.glb\"  },\r\n\t\t{name:\"sniper-teleport\",   model:null, loaded:false, url:\"models/sniper/default/teleport.glb\"  },\r\n\t],\r\n\tinitedThree:false,\r\n\tplayerSelectScene:null,\r\n\ttitleScene:null,\r\n\tuser:\"\",\r\n\tsettings:new _Settings_js__WEBPACK_IMPORTED_MODULE_29__.Settings(),\r\n\tservers:null,\r\n\tsocketRooms:[],\r\n\tcurrentRoom:'',\r\n\tgamePad:new _GamePad_js__WEBPACK_IMPORTED_MODULE_32__.GamePad(),\r\n\tremotePlayers:[],\r\n\tworldOctree:new _scripts_jsm_math_Octree_js__WEBPACK_IMPORTED_MODULE_2__.Octree(),\r\n\tworldsHolder:null,\r\n\tparallax:new _ParallaxGUI_js__WEBPACK_IMPORTED_MODULE_28__.ParallaxGUI(),\r\n\tskinsHandler:new _SkinsHandler_js__WEBPACK_IMPORTED_MODULE_30__.SkinsHandler(),\r\n};\r\n\r\nwindow.appGlobal = appGlobal;\r\n\r\nlet currentSelectWeapon = appGlobal.weapons.automatic;\r\nlet currentMovement = abilities.planetSwitch;\r\nlet currMeshName = \"assault\";\r\nlet currMovementName = \"boost\"\r\nlet joinedFirstRoom = false;\r\nlet initedServers = false;\r\nlet playerIndex = \"\";\r\nlet playerAmount = 0;\r\nlet maxPlayers = 0;\r\nlet currLoad = 0;\r\n//let remotePlayers = [];//window.remotePlayers = {};\r\nlet stats;\r\nconst SERVERFPS = 20;\r\n\r\nfunction initLoading(){\r\n\t\r\n\tconst loader = new _scripts_jsm_loaders_GLTFLoader_js__WEBPACK_IMPORTED_MODULE_1__.GLTFLoader().setPath( 'assets/' );\r\n\tfor(let i = 0; i<appGlobal.loadObjs.length; i++){\r\n\t\tconst ii = i;\r\n\t\tloader.load( appGlobal.loadObjs[i].url, function ( gltf ) {\r\n\t\t\thandleLoad(ii,gltf);\r\n\t\t});\r\n\t}\r\n\t/*\r\n\tloader.load( 'character-anis.glb', function ( gltf ) {\r\n\t\thandleLoad(0,gltf);\r\n\t});\r\n\tloader.load( 'test3.glb', function ( gltf ) {\r\n\t\thandleLoad(1,gltf);\r\n\t});\r\n\tloader.load( 'test4.glb', function ( gltf ) {\r\n\t\thandleLoad(2,gltf);\r\n\t});\r\n\tloader.load( 'fps.glb', function ( gltf ) {\r\n\t\thandleLoad(3,gltf);\r\n\t});\r\n\t*/\r\n}\r\n\r\n\r\nfunction handleLoad(index, gltf){\r\n\tcurrLoad++;\r\n\tappGlobal.loadObjs[index].loaded = true;\r\n\tappGlobal.loadObjs[index].model = gltf;\r\n\tdocument.getElementById(\"loaded\").innerHTML = currLoad;\r\n\tdocument.getElementById(\"loading-total\").innerHTML = appGlobal.loadObjs.length;\r\n\tif(checkLoaded()){\r\n\t\tdocument.getElementById('loading').style.display = \"none\";\r\n\t\tdocument.getElementById('overlay').style.display = \"block\";\r\n\t\tinitThree();\r\n\t}\r\n}\r\nfunction checkLoaded(){\r\n\tfor(let i = 0; i<appGlobal.loadObjs.length; i++){\r\n\t\tif(!appGlobal.loadObjs[i].loaded)\r\n\t\t\treturn false;\t\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction initThree(){\r\n\r\n\tdocument.getElementById(\"class-button-automatic\").className = \"class-btn-active\";\r\n\tdocument.getElementById(\"movement-button-planet\").className = \"movement-btn-active\";\r\n\t\r\n\toverlayChildDisplayHelper();\r\n\t\r\n\t//appGlobal.settings = ;\r\n\tappGlobal.scene = new _CustomScene_js__WEBPACK_IMPORTED_MODULE_6__.CustomScene();\r\n\tappGlobal.particleHandler = new _GlobalParticleHandler_js__WEBPACK_IMPORTED_MODULE_11__.GlobalParticleHandler();\r\n\tappGlobal.controller = new _PlayerController_js__WEBPACK_IMPORTED_MODULE_5__.PlayerController({id:socket.id, user:appGlobal.user});\r\n\tappGlobal.remoteBullets = new _RemoteBulletHandler_js__WEBPACK_IMPORTED_MODULE_14__.RemoteBulletHandler();\r\n\tappGlobal.itemHandler = new _ItemHandler_js__WEBPACK_IMPORTED_MODULE_13__.ItemHandler();\r\n\tappGlobal.soundHandler = new _GlobalSoundHandler_js__WEBPACK_IMPORTED_MODULE_15__.GlobalSoundHandler();\r\n\tappGlobal.playerSelectScene = new _PlayerSelectScene_js__WEBPACK_IMPORTED_MODULE_26__.PlayerSelectScene();\r\n\tappGlobal.titleScene = new _TitleScene_js__WEBPACK_IMPORTED_MODULE_27__.TitleScene();\r\n\t//appGlobal.parallax = new ParallaxGUI();\r\n\tappGlobal.scene.reset();\r\n\t\r\n\tconst container = document.getElementById( 'container' );\r\n\tcontainer.appendChild( appGlobal.scene.renderer.domElement );\r\n\r\n\tstats = new _scripts_jsm_libs_stats_module_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\r\n\tstats.domElement.style.position = 'absolute';\r\n\tstats.domElement.style.top = '0px';\r\n\tcontainer.appendChild( stats.domElement );\r\n\t\r\n\tappGlobal.initedThree = true;\r\n\t\r\n\t//const worldOctree = new Octree();\r\n\tanimate();\r\n}\r\n\r\nfunction overlayChildDisplayHelper(){\r\n\r\n\tdocument.getElementById(\"class-select\").style.display=\"none\";\r\n\tdocument.getElementById(\"game-over\").style.display=\"none\";\r\n\tdocument.getElementById(\"player-list\").style.display=\"none\";\r\n\r\n\tswitch(appGlobal.gameState){\r\n\t\tcase\"pregame\":\r\n\t\tcase \"game\":\r\n\t\t\tif(appGlobal.playing){\r\n\t\t\t\tdocument.getElementById(\"player-list\").style.display=\"block\";\r\n\t\t\t}else{\r\n\t\t\t\tdocument.getElementById(\"class-select\").style.display = \"block\";\r\n\t\t\t}\r\n\t\t\ttoggleOverlay(true);\r\n\t\tbreak;\r\n\t\tcase \"postgame\":\r\n\t\t\tdocument.getElementById(\"game-over\").style.display = \"block\";\r\n\t\t\tdocument.getElementById(\"player-list\").style.display=\"block\";\r\n\t\t\ttoggleOverlay(true);\r\n\t\tbreak;\r\n\t}\r\n}\r\n\r\nfunction resetHelper(){\r\n\tfor(let i = 0; i<appGlobal.worlds.length; i++){\r\n\t\tappGlobal.worlds[i].kill();\r\n\t}\r\n\tappGlobal.worlds = [];\r\n\tappGlobal.particleHandler.kill();\r\n\tappGlobal.remoteBullets.kill();\r\n\tappGlobal.itemHandler.kill();\r\n\tappGlobal.scene.kill();\r\n\r\n\tappGlobal.hitScanArray = [];\r\n\tappGlobal.grappleMeshes = [];\r\n\t\r\n\tappGlobal.scene.reset();\r\n\tappGlobal.controller.controls.reset();\r\n\t//appGlobal.itemHandler.reset();\r\n\t//appGlobal.scene = new CustomScene();\r\n\t//appGlobal.world = new World();\r\n}\r\n\r\n\r\ndocument.addEventListener( 'keydown', ( event ) => {\r\n\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\tif(checkShoulPreventDefault()){\r\n\t\t\tevent.stopPropagation();event.preventDefault();\r\n\t\t}\r\n\t}\r\n\r\n\tappGlobal.keyStates[ event.code ] = true;\r\n\t\r\n\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\t//if(appGlobal.localPlayer!=null)\r\n\t\tappGlobal.localPlayer.handleKeyDown(event.code)\r\n\t}\r\n\t\r\n\tif(event.code==\"Tab\"){\r\n\t\t\r\n\t\tif( !appGlobal.doingOverlay ){\r\n\t\t\tif(appGlobal.gameState == \"game\" && appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\t\t\toverlayChildDisplayHelper();\r\n\t\t\t\ttoggleOverlay(true)\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\ndocument.addEventListener( 'keyup', ( event ) => {\r\n\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\tif(checkShoulPreventDefault()){\r\n\t\t\tevent.stopPropagation();event.preventDefault();\r\n\t\t}\r\n\t}\r\n\tappGlobal.keyStates[ event.code ] = false;\r\n\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\tif(appGlobal.localPlayer!=null)\r\n\t\t\tappGlobal.localPlayer.handleKeyUp(event.code)\r\n\t}\r\n\tif(event.code == \"Tab\"){\r\n\t\t\r\n\t\tif(appGlobal.gameState==\"game\" && appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\t\twindow.focus();\r\n\t\t\ttoggleOverlay(false)\r\n\t\t}\r\n\r\n\t}\r\n\r\n});\r\n\r\ndocument.addEventListener('pointerlockchange', function(){\r\n\r\n}, false);\r\n\r\ndocument.addEventListener( 'mousedown', (event) => {\r\n\t\r\n\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\tevent.preventDefault();\r\n\t\tif(event.button==0){\r\n\t\t\tdocument.body.requestPointerLock();\r\n\t\t\tappGlobal.mouse.down = true;\r\n\t\t}else if(event.button == 2){\r\n\t\t\tappGlobal.localPlayer.ads(true);\r\n\t\t\tappGlobal.localPlayer.killEmoting();\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\n\r\n// function checkPlaying(){\r\n// \treturn appGlobal.playing && appGlobal.localPlayer != null;\r\n// }\r\n\r\nfunction checkShoulPreventDefault(){\r\n\treturn event.code==\"Tab\" || event.code==\"LeftControl\" || event.code == \"KeyW\" || event.code==\"KeyD\" || event.code==\"KeyS\" || event.code==\"KeyA\"\r\n}\r\n\r\ndocument.addEventListener( 'mouseup', ( event ) => {\r\n\tevent.preventDefault();\r\n\tif(event.button==0){\r\n\t\tappGlobal.mouse.down = false;\r\n\t}else if(event.button == 2){\r\n\t\t\r\n\t\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\t\tappGlobal.localPlayer.ads(false);\r\n\t\t}\r\n\r\n\t}\r\n\t//player.handleMouseUp();\r\n\t//throwBall();\r\n});\r\n\r\ndocument.body.addEventListener( 'mousemove', ( event ) => {\r\n\tif ( document.pointerLockElement === document.body ) {\r\n\t\tif(appGlobal.globalHelperFunctions.checkPlaying()){\r\n\t\t\tappGlobal.localPlayer.updateMouseMove(event);\r\n\t\t\t\r\n\t\t}\r\n\t}else{\r\n\t\tif(!appGlobal.playing){\r\n\t\t\tif(appGlobal.titleScene!=null)\r\n\t\t\t\tappGlobal.titleScene.updateMouseMove(event);\r\n\t\t\t\tappGlobal.parallax.updateMouseMove(event);\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nwindow.addEventListener( 'resize', function(){\r\n\tif(appGlobal.scene){\r\n\t\tappGlobal.scene.updateWindowSize();\r\n\t}\r\n});\r\n\r\nfunction animate() {\r\n\t\r\n\tif(!appGlobal.playing){\r\n\t\tappGlobal.playerSelectScene.update();\r\n\t\tappGlobal.titleScene.update();\r\n\t\tappGlobal.parallax.update();\r\n\t}\r\n\r\n\tappGlobal.gamePad.update();\r\n\tappGlobal.scene.update();\r\n\t\r\n\t\r\n\t// for(let i = 0; i<appGlobal.remotePlayers.length; i++){\r\n\t// \tappGlobal.remotePlayers[i].update();\t\r\n\t// }\r\n\r\n\tstats.update();\r\n\trequestAnimationFrame( animate );\r\n\r\n}\r\n\r\n\r\nfunction toggleOverlay(showOverlay){\r\n\tappGlobal.doingOverlay = showOverlay;\r\n\tif(showOverlay){\r\n\t\tdocument.getElementById(\"hud\").style.display=\"none\";\r\n\t\tdocument.getElementById(\"overlay\").style.display=\"block\";\t\r\n\t}else{\r\n\t\tdocument.getElementById(\"hud\").style.display=\"block\";\r\n\t\tdocument.getElementById(\"overlay\").style.display=\"none\";\r\n\t}\r\n}\r\n\r\nif(document.getElementById(\"close-login-btn\")!=null){\r\n\tdocument.getElementById(\"close-login-btn\").addEventListener(\"click\", function(){\r\n\t\tdocument.getElementById('user').style.display = \"none\";\r\n\t});\r\n}\r\nif(document.getElementById(\"user-btn\")!=null){\r\n\tdocument.getElementById(\"user-btn\").addEventListener(\"click\", function(){\r\n\t\tdocument.getElementById('user').style.display = \"block\";\r\n\t});\r\n}\r\n\r\n\r\ndocument.getElementById(\"close-instructions-btn\").addEventListener(\"click\", function (){\r\n\tdocument.getElementById(\"instructions-modal\").style.display = \"none\";\r\n\tappGlobal.settings.handleInstructionsClose();\r\n});\r\n\r\n\r\ndocument.getElementById(\"class-button-sticky\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sticky);\r\n\tcurrentSelectWeapon = appGlobal.weapons.sticky;\r\n\tcurrMeshName = \"sticky\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-sticky\"), \"class-btn-active\", \"class-btn\", {type:\"class\", class:\"sticky\"});\r\n});\r\ndocument.getElementById(\"class-button-automatic\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.automatic);\r\n\tcurrentSelectWeapon = appGlobal.weapons.automatic;\r\n\tcurrMeshName = \"assault\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-automatic\"), \"class-btn-active\", \"class-btn\", {type:\"class\", class:\"assault\"});\r\n});\r\ndocument.getElementById(\"class-button-sub\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.submachine);\r\n\tcurrentSelectWeapon = appGlobal.weapons.submachine;\r\n\tcurrMeshName = \"submachine\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-sub\"), \"class-btn-active\", \"class-btn\", {type:\"class\", class:\"submachine\"});\r\n});\r\ndocument.getElementById(\"class-button-sniper\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sniper);\r\n\tcurrentSelectWeapon = appGlobal.weapons.sniper;\r\n\tcurrMeshName = \"sniper\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-sniper\"), \"class-btn-active\", \"class-btn\",  {type:\"class\", class:\"sniper\"});\r\n});\r\ndocument.getElementById(\"class-button-launcher\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.launcher);\r\n\tcurrentSelectWeapon = appGlobal.weapons.launcher;\r\n\tcurrMeshName = \"launcher\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-launcher\"), \"class-btn-active\", \"class-btn\", {type:\"class\", class:\"launcher\"});\r\n});\r\ndocument.getElementById(\"class-button-sixgun\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sixgun);\r\n\tcurrentSelectWeapon = appGlobal.weapons.sixgun;\r\n\tcurrMeshName = \"sixgun\";\r\n\thandleSwitchClass(document.getElementById(\"class-button-sixgun\"), \"class-btn-active\", \"class-btn\",  {type:\"class\", class:\"sixgun\"});\r\n});\r\n\r\ndocument.getElementById(\"movement-button-planet\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sixgun);\r\n\tcurrMovementName = \"boost\";\r\n\tcurrentMovement = abilities.planetSwitch;\r\n\thandleSwitchClass(document.getElementById(\"movement-button-planet\"), \"movement-btn-active\", \"movement-btn\",  {type:\"movement\", name:\"planet switch\"});\r\n});\r\ndocument.getElementById(\"movement-button-directional\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sixgun);\r\n\tcurrMovementName = \"directional\";\r\n\tcurrentMovement = abilities.directionalBoost;\r\n\thandleSwitchClass(document.getElementById(\"movement-button-directional\"), \"movement-btn-active\", \"movement-btn\", {type:\"movement\", name:\"directional\"});\r\n});\r\ndocument.getElementById(\"movement-button-teleport\").addEventListener(\"click\", function (){\r\n\t//handleInitPlaying(appGlobal.weapons.sixgun);\r\n\tcurrMovementName = \"teleport\";\r\n\tcurrentMovement = abilities.teleport;\r\n\thandleSwitchClass(document.getElementById(\"movement-button-teleport\"), \"movement-btn-active\", \"movement-btn\", {type:\"movement\", name:\"teleport\"});\r\n});\r\n\r\ndocument.getElementById(\"play-btn\").addEventListener(\"click\", function (){\r\n\tappGlobal.globalHelperFunctions.handleInitPlaying();\r\n\t// overlayChildDisplayHelper();\r\n\t// toggleOverlay(false);\r\n\t// document.getElementById(\"hud\").style.display=\"none\";\r\n});\r\n\r\ndocument.getElementById(\"spectate-btn\").addEventListener(\"click\", function (){\r\n\toverlayChildDisplayHelper();\r\n\ttoggleOverlay(false);\r\n\tdocument.getElementById(\"hud\").style.display=\"none\";\r\n});\r\n\r\nfunction handleSwitchClass(elem, activeName, nonActiveName, OBJ){\r\n\tconst collection = document.getElementsByClassName(activeName);\r\n\tfor(let i = 0; i<collection.length; i++){\r\n\t\tcollection[i].className = nonActiveName;\r\n\t}\r\n\telem.className = activeName;\r\n\tif(OBJ.type == \"class\")\r\n\t\tappGlobal.playerSelectScene.handleCharacterSwitch( {class:OBJ.class, movement:currMovementName} );\r\n\telse if(OBJ.type==\"movement\")\r\n\t\tappGlobal.playerSelectScene.handleMovementSwitch( {movement:currMovementName, class:currMeshName} );\r\n}\r\n\r\n// function handleInitPlaying(){\r\n\t\r\n// }\r\n\r\nfunction getQuery(){\r\n\r\n    const query = window.location.search.substring(1);\r\n   \tconst vars = query.split(\"&\");\r\n    return parseQuery(vars);\r\n    \r\n}\r\n\r\nfunction parseQuery(vars){\r\n\tfor (let i = 0; i < vars.length; i++) {\r\n        const pair = vars[i].split('=');\r\n        if(pair != null){\r\n\t        if (decodeURIComponent(pair[0]) == \"game\" || decodeURIComponent(pair[0]) == \"g\") {\r\n\t        \tif(isSocketRoom(pair[1]))\r\n\t        \t\treturn pair[1];\r\n\t        }\r\n    \t}\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction isSocketRoom(name){\r\n\tfor(let i = 0; i<appGlobal.socketRooms.length; i++){\r\n\t\tif(appGlobal.socketRooms[i]==name)\r\n\t\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\nvar socket = (0,https_cdn_socket_io_4_4_1_socket_io_esm_min_js__WEBPACK_IMPORTED_MODULE_33__.io)(\"localhost:3000\", function(){} );\r\nwindow.socket = socket;\r\n  \r\nsocket.on('connect', () => {\r\n \t\r\n \tsocket.on('serverInitialPing', (data)=>{\r\n \t\t\r\n \t\tif(data.id==socket.id && !initedServers){\r\n \t\t\t\r\n \t\t\tappGlobal.servers = new _Servers_js__WEBPACK_IMPORTED_MODULE_31__.Servers({info:data.info});\r\n\t \t\tconst q = getQuery();\r\n\t \t\tif(q != null){\r\n\t \t\t\tsocket.emit(\"switchRooms\", {id:socket.id, gameToJoin:q, gameToLeave:\"join\"});\r\n\t \t\t}else{\r\n\t \t\t\tsocket.emit(\"switchRooms\", {id:socket.id, gameToJoin:data.gameToJoin, gameToLeave:\"join\"});\r\n\t \t\t}\r\n\t \t\tinitedServers = true;\r\n\r\n \t\t}\r\n\r\n \t})\r\n\t\r\n\tsocket.on('serverInitJoinGame',(data)=> {\r\n\t\tif(!joinedFirstRoom){\r\n\t\t\tappGlobal.roomName = data.roomName;\r\n\t\t\tupdateURL();\r\n\t\t\tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n\t\t\tappGlobal.random = new Math.seedrandom(\"\"+data.seed+\"\");\r\n\t\t\tplayerIndex = data.playerIndex;\r\n\t\t\tappGlobal.gameState = data.state;\r\n\t\t\tappGlobal.serverItemArr = data.itemArr;\r\n\t\t\tappGlobal.user = data.user;\r\n\t\t\tjoinedFirstRoom = true;\r\n\t\t\tinitLoading();\r\n\t\t}\r\n\t});\r\n\t\r\n\tsocket.on('serverTimer',(data)=> {\r\n\t\tappGlobal.servers.updateServerInfo({info:data.info})\r\n\t\tlet min = Math.floor(data.serverTime/60);\r\n\t\tlet sec = Math.floor(data.serverTime%60);\r\n\t\tdocument.getElementById('timer').innerHTML = pad(min,2)+\":\"+pad(sec, 2);\r\n\t});\r\n\r\n\tsocket.on('serverShoot',(data)=> {\r\n\t\tif(data.id!=socket.id){\r\n\t\t\tconst obj = {id:data.id, name:data.name, obj:data.obj}\r\n\t\t\tappGlobal.remoteBullets.shoot(obj);\r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('serverDoDamage',(data)=> {\r\n\t\tif(appGlobal.localPlayer!=null){\r\n\t\t\tif (data.id == socket.id) {\r\n\t\t\t\tappGlobal.localPlayer.receiveDamage(data);\r\n\t\t\t} \r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('serverUpdateDead',(data)=> {\r\n\t\tconst player = appGlobal.globalHelperFunctions.getRemotePlayerById(data.id);\r\n\t\tif(player!=null){\r\n\t\t\tappGlobal.remotePlayers[player.index].killRemotePlayer();\r\n\t\t}\r\n\t});\r\n  \r\n \r\n\tsocket.on('updateAll', (data) => {\r\n\t\t\r\n\t\tif(appGlobal.initedThree){\r\n\t\t\t\r\n\t\t\tfor(let i = 0; i<data.players.length; i++){\r\n\t\t\t\t\r\n\t\t\t\tconst player = appGlobal.globalHelperFunctions.getRemotePlayerById(data.players[i].id);\r\n\t\t\t\t\r\n\t\t\t\tif(data.players[i].id != socket.id){ //remote players\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(player == null){\r\n\t\t\t\t\t\tappGlobal.remotePlayers.push(new _RemoteController_js__WEBPACK_IMPORTED_MODULE_25__.RemoteController({id:data.players[i].id, name:data.players[i].name}));\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tif(data.players[i].playing){\r\n\t\t\t\t\t\t\tif(!player.controller.playing){\r\n\t\t\t\t\t\t    \tplayer.controller.initRemotePlayer({meshName:data.players[i].meshName, movement:data.players[i].movement, skin:data.players[i].skin});\r\n\t\t\t\t\t\t    }else{\r\n\r\n\t\t\t\t\t\t    \tplayer.controller.updateRemote({\r\n\t\t\t\t\t\t    \t\tpos:data.players[i].position, \r\n\t\t\t\t\t\t    \t\trot:data.players[i].rotation, \r\n\t\t\t\t\t\t    \t\tkillCount:data.players[i].killCount, \r\n\t\t\t\t\t\t    \t\tanimationObject:data.players[i].animationObject,\r\n\t\t\t\t\t\t    \t\tname:data.players[i].name,\r\n\t\t\t\t\t\t    \t\tspineRot:data.players[i].camRotation\r\n\t\t\t\t\t\t    \t})\r\n\t\t\t\t\t\t    }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}  \r\n\t\t\t    }else{ //is local\r\n\t\t\t    \tif(appGlobal.localPlayer != null){\r\n\t\t\t    \t\tappGlobal.controller.updateKillCount(data.players[i].killCount);\r\n\t\t\t    \t}\t\r\n\t\t\t    }\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t});\r\n\r\n\tsocket.on('playerDisconnect', (data) => {\r\n\t\tconst player = appGlobal.globalHelperFunctions.getRemotePlayerById(data)\r\n\t\tif(player != null){\r\n\t\t\tappGlobal.remotePlayers[player.index].kill();\r\n\t\t\tappGlobal.remotePlayers.splice(player.index,1);\r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('resetGame', (data) => {\r\n\t\t\r\n\t\tfor(let i = 0; i<appGlobal.remotePlayers.length;i++){\r\n\t\t\tappGlobal.remotePlayers[i].killRemotePlayer();\r\n\t\t}\r\n\t\t\r\n\t\tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n\t\tappGlobal.random = new Math.seedrandom(\"\"+data.seed+\"\");\r\n\t\tappGlobal.gameState = data.state;\r\n\t\tappGlobal.globalHelperFunctions.playerReset(socket.id, false);\r\n\t\t\r\n\t\tresetHelper();\r\n\t\toverlayChildDisplayHelper();\r\n\r\n\t});\r\n  \r\n\tsocket.on('endGame', (data) => {\r\n\t\t\r\n\t\tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n\t\tappGlobal.gameState = data.state;\r\n\r\n\t\tif(checkIfWinnerId(socket.id, data.winners)){\r\n\t\t\tdocument.getElementById(\"game-over-text\").innerHTML = \"VICTORY!\";\r\n\t\t}else{\r\n\t\t\tdocument.getElementById(\"game-over-text\").innerHTML = \"DEFEAT\";\r\n\t\t}\r\n\r\n\t\tif(window.logged.in){\r\n\t\t\tfor(let i = 0;i<data.endGamePackage.length; i++){\r\n\t\t\t\tif(socket.id == data.endGamePackage[i].id){\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst xpAdd =       data.endGamePackage[i].xpAdd;\r\n\t\t\t\t\tconst deathCount =  data.endGamePackage[i].deathCount;\r\n\t\t\t\t\tconst killCount =   data.endGamePackage[i].killCount;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// $.get(\"/endgame?xpAdd=\"+xpAdd+\"&deathCount=\"+deathCount+\"&killCount=\"+killCount, function(OBJ) {\r\n\t\t\t\t\t// \t//if(OBJ.xpAdd && OBJ.xpTotal )\r\n\t\t\t\t\t// \t//console.log(OBJ)\r\n\t\t\t\t\t// \tdocument.getElementById(\"xp-bar\").style.display = \"inline-block\";\r\n\t\t\t\t\t// \tdocument.getElementById(\"game-over-stats\").style.display = \"block\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// \tdocument.getElementById(\"xp-add\").innerHTML =   parseInt(OBJ.xpAdd);\r\n\t\t\t\t\t// \tdocument.getElementById(\"xp-total\").innerHTML = parseInt(OBJ.xpTotal);\r\n\t\t\t\t\t// \tlet kdMatch = 0;\r\n\t\t\t\t\t// \tif(parseInt(OBJ.deathAdd) != 0){\r\n\t\t\t\t\t// \t\tkdMatch = parseInt(OBJ.killAdd) / parseInt(OBJ.deathAdd);\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// \tdocument.getElementById(\"kd-match\").innerHTML =   ( kdMatch ).toFixed(2);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// \tlet kdTotal = 0;\r\n\t\t\t\t\t// \tif(parseInt(OBJ.deathTotal) != 0){\r\n\t\t\t\t\t// \t\tkdTotal = parseInt(OBJ.killTotal) / parseInt(OBJ.deathTotal);\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t// \tdocument.getElementById(\"kd-total\").innerHTML = (kdTotal).toFixed(2);\r\n\r\n\t\t\t\t\t// })\r\n\t\t\t\t\tdocument.getElementById(\"xp-bar\").style.display = \"none\";\r\n\t\t\t\t\tdocument.getElementById(\"game-over-stats\").style.display = \"none\";\r\n\t\t\t\t\tdocument.getElementById(\"xp-error\").style.display = \"none\";\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tfetch(\"/endgame\",{\r\n\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\theaders:{\r\n\t\t\t\t\t\t\t\"Content-Type\":\"application/json\",\r\n\t\t\t\t\t\t\t\"Accept\":\"application/json\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbody:JSON.stringify({\r\n\t\t\t\t\t\t\txpAdd:xpAdd,\r\n\t\t\t\t\t\t\tdeathCount:deathCount,\r\n\t\t\t\t\t\t\tkillCount:killCount\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).then( res => {\r\n\t\t\t\t\t\tif(res.ok) {\r\n\t\t\t\t\t\t\treturn res.json()\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\treturn res.json().then(json => Promise.reject(json))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).then( data => {\r\n\t\t\t\t\t\tif(data.error!=null){\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-bar\").style.display = \"none\";\r\n\t\t\t\t\t\t\tdocument.getElementById(\"game-over-stats\").style.display = \"none\";\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-error\").style.display=\"block\";\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-error\").innerHTML = data.error;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-bar\").style.display = \"inline-block\";\r\n\t\t\t\t\t\t\tdocument.getElementById(\"game-over-stats\").style.display = \"block\";\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-error\").style.display=\"none\";\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-add\").innerHTML =   parseInt(data.xpAdd);\r\n\t\t\t\t\t\t\tdocument.getElementById(\"xp-total\").innerHTML = parseInt(data.xpTotal);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet kdMatch = 0;\r\n\t\t\t\t\t\t\tif(parseInt(data.deathAdd) != 0){\r\n\t\t\t\t\t\t\t\tkdMatch = parseInt(data.killAdd) / parseInt(data.deathAdd);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdocument.getElementById(\"kd-match\").innerHTML =   ( kdMatch ).toFixed(2);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet kdTotal = 0;\r\n\t\t\t\t\t\t\tif(parseInt(data.deathTotal) != 0){\r\n\t\t\t\t\t\t\t\tkdTotal = parseInt(data.killTotal) / parseInt(data.deathTotal);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tdocument.getElementById(\"kd-total\").innerHTML = (kdTotal).toFixed(2);\r\n\r\n\t\t\t\t\t\t\tdocument.getElementById(\"hc-total\").innerHTML = parseInt(data.bux);\r\n\t\t\t\t\t\t\tdocument.getElementById(\"hc-match\").innerHTML = parseInt(data.buxAdd);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t}).catch(e => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdocument.getElementById(\"xp-bar\").style.display = \"none\";\r\n\t\t\t\t\t\tdocument.getElementById(\"game-over-stats\").style.display = \"none\";\r\n\t\t\t\t\t\tdocument.getElementById(\"xp-error\").style.display=\"block\";\r\n\t\t\t\t\t\tdocument.getElementById(\"xp-error\").innerHTML = \"there was an error retrieving your data ;/\";\r\n\r\n\t\t\t\t\t})\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tdocument.getElementById(\"xp-bar\").style.display = \"none\";\r\n\t\t\tdocument.getElementById(\"game-over-stats\").style.display = \"none\";\r\n\t\t}\r\n\r\n\t\tappGlobal.globalHelperFunctions.playerReset(socket.id, false);\r\n\t\tdocument.exitPointerLock();\r\n\t\toverlayChildDisplayHelper();\r\n\t\t\r\n\t});\r\n\r\n\tsocket.on('startGame', (data) => {\r\n\t\tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n\t\tappGlobal.gameState = data.state;\r\n\t});\r\n\r\n\tsocket.on('serverKillItem', (data) => {\r\n\t\tappGlobal.itemHandler.killItem(data.index);\r\n\t\tif(appGlobal.localPlayer !=null ){\r\n\t\t\tif(data.id == appGlobal.localPlayer.id){\r\n\t\t\t\tappGlobal.localPlayer.heal(data);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(data.id != socket.id){\r\n\t\t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(new THREE.Vector3().copy(data.position) );\r\n\t    \tappGlobal.soundHandler.playSoundByName({name:data.sound, dist:dist});\r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('serverPlaySoundAtPosition', (data) => {\r\n\t\tif(data.id != socket.id){\r\n\t\t\tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(new THREE.Vector3().copy(data.position) );\r\n\t\t\tappGlobal.soundHandler.playSoundByName({name:data.sound, dist:dist});\r\n\t\t}\r\n\t});\r\n\t\r\n\r\n\tsocket.on('serverAbilityVisual', (data) => {\r\n\t\tif(data.id != socket.id){\r\n\t\t\tconst player = appGlobal.globalHelperFunctions.getRemotePlayerById(data.id);\r\n\t\t    if(player != null){\r\n\t\t    \tconst dist = appGlobal.globalHelperFunctions.getDistanceForSound(new THREE.Vector3().copy(data.position) );\r\n\t\t\t\tappGlobal.soundHandler.playSoundByName({name:data.sound, dist:dist});\r\n\t\t    \tplayer.player.handleRemoteAbility({abilityName:data.abilityName})\r\n\t\t    }\r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('serverSwitchGames', (data) => {\r\n\t\tif(data.id == socket.id){\r\n\r\n\t\t\tfor(let i = 0; i<appGlobal.remotePlayers.length;i++){\r\n\t\t\t\tappGlobal.remotePlayers[i].killRemotePlayer();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n\t\t\tappGlobal.random = new Math.seedrandom(\"\"+data.seed+\"\");\r\n\t\t\tappGlobal.gameState = data.state;\r\n\t\t\tappGlobal.globalHelperFunctions.playerReset(socket.id, false);\r\n\t\t\tappGlobal.roomName = data.roomName;\r\n\t\t\tupdateURL();\r\n\t\t\tresetHelper();\r\n\t\t\toverlayChildDisplayHelper();\r\n\t\t\t//appGlobal.servers.updateServerInfo({info:data.info})\r\n\r\n\t\t}\r\n\t});\r\n\r\n\tsocket.on('serverCantJoinGame', (data) => {\r\n\t\tif(data.id == socket.id){\r\n\t\t\tdocument.getElementById(\"error\").style.display = \"block\";\r\n\t\t\tdocument.getElementById(\"close-error-btn\").addEventListener(\"click\", function(){\r\n\t\t\t\tdocument.getElementById(\"error\").style.display = \"none\";\r\n\t\t\t\tdocument.getElementById(\"servers\").style.display = \"block\";\r\n\t\t\t})\r\n\t\t}\r\n\t});\r\n\r\n});\r\n\r\nfunction checkIfWinnerId(socketid, winnersArray){\r\n\tfor(let i = 0; i<winnersArray.length; i++){\r\n\t\tif(socketid == winnersArray[i])\r\n\t\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction clamp(num, min, max){\r\n\treturn Math.min(Math.max(num, min), max)\r\n}\r\n\r\nfunction checkIsInArr(arr,id){\r\n\tfor(let i = 0; i<arr.length; i++){\r\n\t\tif(arr[i].id==id){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n\r\nfunction updateURL(){\r\n\tconst params = new URLSearchParams(location.search);\r\n\tparams.set('game', appGlobal.roomName);\r\n\tparams.toString(); // => test=123&cheese=yummy\r\n\twindow.history.replaceState({}, '', `${location.pathname}?${params.toString()}`);\r\n}\r\n\r\n\r\nfunction pad(n, width, z) {\r\n  z = z || '0';\r\n  n = n + '';\r\n  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\r\n}\r\n\r\n// function switchRooms(){\r\n\r\n// \tfor(let i = 0; i<appGlobal.remotePlayers.length;i++){\r\n// \t\tappGlobal.remotePlayers[i].killRemotePlayer();\r\n// \t}\r\n\r\n// \tappGlobal.random = new Math.seedrandom(\"\"+data.seed+\"\");\r\n// \tappGlobal.gameState = data.state;\r\n// \tappGlobal.globalHelperFunctions.playerReset(socket.id, false);\r\n\r\n// \tresetHelper();\r\n// \toverlayChildDisplayHelper();\r\n\r\n\t\r\n// \tsocket.on('endGame', (data) => {\r\n// \tdocument.getElementById(\"debug\").innerHTML = data.state;\r\n// \tappGlobal.gameState = data.state;\r\n\r\n// \tappGlobal.globalHelperFunctions.playerReset(socket.id, false);\r\n\t\r\n// \tdocument.exitPointerLock();\r\n// \toverlayChildDisplayHelper();\r\n\r\n// }\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://zerochill/./src/main.js?");

/***/ }),

/***/ "https://cdn.socket.io/4.4.1/socket.io.esm.min.js":
false,

/***/ "./src/scripts/jsm/controls/OrbitControls.js":
/*!***************************************************!*\
  !*** ./src/scripts/jsm/controls/OrbitControls.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MapControls\": () => (/* binding */ MapControls),\n/* harmony export */   \"OrbitControls\": () => (/* binding */ OrbitControls)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 1.2; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), MIDDLE: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), RIGHT: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), TWO: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.getDistance = function () {\n\n\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setFromUnitVectors( object.up, new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\tconst lastQuaternion = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst sphericalDelta = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst rotateEnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst rotateDelta = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tconst panStart = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst panEnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst panDelta = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tconst dollyStart = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst dollyEnd = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst dollyDelta = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tconst pointers = [];\n\t\tconst pointerPositions = {};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan() {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly() {\n\n\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst position = getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\n\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\taddPointer( event );\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchStart( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseDown( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\tonTouchMove( event );\n\n\t\t\t} else {\n\n\t\t\t\tonMouseMove( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t    removePointer( event );\n\n\t\t    if ( pointers.length === 0 ) {\n\n\t\t        scope.domElement.releasePointerCapture( event.pointerId );\n\n\t\t        scope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t        scope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t    }\n\n\t\t    scope.dispatchEvent( _endEvent );\n\n\t\t    state = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onPointerCancel( event ) {\n\n\t\t\tremovePointer( event );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()):\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\ttrackPointer( event );\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tfunction addPointer( event ) {\n\n\t\t\tpointers.push( event );\n\n\t\t}\n\n\t\tfunction removePointer( event ) {\n\n\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction trackPointer( event ) {\n\n\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\tif ( position === undefined ) {\n\n\t\t\t\tposition = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t}\n\n\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t}\n\n\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\tconst pointer = ( event.pointerId === pointers[ 0 ].pointerId ) ? pointers[ 1 ] : pointers[ 0 ];\n\n\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.mouseButtons.RIGHT = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\tthis.touches.ONE = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.touches.TWO = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/controls/OrbitControls.js?");

/***/ }),

/***/ "./src/scripts/jsm/environments/RoomEnvironment.js":
/*!*********************************************************!*\
  !*** ./src/scripts/jsm/environments/RoomEnvironment.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RoomEnvironment\": () => (/* binding */ RoomEnvironment)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/**\n * https://github.com/google/model-viewer/blob/master/packages/model-viewer/src/three-components/EnvironmentScene.ts\n */\n\n\n\nclass RoomEnvironment extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tconst geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tgeometry.deleteAttribute( 'uv' );\n\n\t\tconst roomMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( { side: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) } );\n\t\tconst boxMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tconst mainLight = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0xffffff, 5.0, 28, 2 );\n\t\tmainLight.position.set( 0.418, 16.199, 0.300 );\n\t\tthis.add( mainLight );\n\n\t\tconst room = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, roomMaterial );\n\t\troom.position.set( - 0.757, 13.219, 0.717 );\n\t\troom.scale.set( 31.713, 28.305, 28.591 );\n\t\tthis.add( room );\n\n\t\tconst box1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox1.position.set( - 10.906, 2.009, 1.846 );\n\t\tbox1.rotation.set( 0, - 0.195, 0 );\n\t\tbox1.scale.set( 2.328, 7.905, 4.651 );\n\t\tthis.add( box1 );\n\n\t\tconst box2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox2.position.set( - 5.607, - 0.754, - 0.758 );\n\t\tbox2.rotation.set( 0, 0.994, 0 );\n\t\tbox2.scale.set( 1.970, 1.534, 3.955 );\n\t\tthis.add( box2 );\n\n\t\tconst box3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox3.position.set( 6.167, 0.857, 7.803 );\n\t\tbox3.rotation.set( 0, 0.561, 0 );\n\t\tbox3.scale.set( 3.927, 6.285, 3.687 );\n\t\tthis.add( box3 );\n\n\t\tconst box4 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox4.position.set( - 2.017, 0.018, 6.124 );\n\t\tbox4.rotation.set( 0, 0.333, 0 );\n\t\tbox4.scale.set( 2.002, 4.566, 2.064 );\n\t\tthis.add( box4 );\n\n\t\tconst box5 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox5.position.set( 2.291, - 0.756, - 2.621 );\n\t\tbox5.rotation.set( 0, - 0.286, 0 );\n\t\tbox5.scale.set( 1.546, 1.552, 1.496 );\n\t\tthis.add( box5 );\n\n\t\tconst box6 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, boxMaterial );\n\t\tbox6.position.set( - 2.193, - 0.369, - 5.547 );\n\t\tbox6.rotation.set( 0, 0.516, 0 );\n\t\tbox6.scale.set( 3.875, 3.487, 2.986 );\n\t\tthis.add( box6 );\n\n\n\t\t// -x right\n\t\tconst light1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 50 ) );\n\t\tlight1.position.set( - 16.116, 14.37, 8.208 );\n\t\tlight1.scale.set( 0.1, 2.428, 2.739 );\n\t\tthis.add( light1 );\n\n\t\t// -x left\n\t\tconst light2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 50 ) );\n\t\tlight2.position.set( - 16.109, 18.021, - 8.207 );\n\t\tlight2.scale.set( 0.1, 2.425, 2.751 );\n\t\tthis.add( light2 );\n\n\t\t// +x\n\t\tconst light3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 17 ) );\n\t\tlight3.position.set( 14.904, 12.198, - 1.832 );\n\t\tlight3.scale.set( 0.15, 4.265, 6.331 );\n\t\tthis.add( light3 );\n\n\t\t// +z\n\t\tconst light4 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 43 ) );\n\t\tlight4.position.set( - 0.462, 8.89, 14.520 );\n\t\tlight4.scale.set( 4.38, 5.441, 0.088 );\n\t\tthis.add( light4 );\n\n\t\t// -z\n\t\tconst light5 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 20 ) );\n\t\tlight5.position.set( 3.235, 11.486, - 12.541 );\n\t\tlight5.scale.set( 2.5, 2.0, 0.1 );\n\t\tthis.add( light5 );\n\n\t\t// +y\n\t\tconst light6 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, createAreaLightMaterial( 100 ) );\n\t\tlight6.position.set( 0.0, 20.0, 0.0 );\n\t\tlight6.scale.set( 1.0, 0.1, 1.0 );\n\t\tthis.add( light6 );\n\n\t}\n\n}\n\nfunction createAreaLightMaterial( intensity ) {\n\n\tconst material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\tmaterial.color.setScalar( intensity );\n\treturn material;\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/environments/RoomEnvironment.js?");

/***/ }),

/***/ "./src/scripts/jsm/libs/stats.module.js":
/*!**********************************************!*\
  !*** ./src/scripts/jsm/libs/stats.module.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Stats);\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/libs/stats.module.js?");

/***/ }),

/***/ "./src/scripts/jsm/loaders/FontLoader.js":
/*!***********************************************!*\
  !*** ./src/scripts/jsm/loaders/FontLoader.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Font\": () => (/* binding */ Font),\n/* harmony export */   \"FontLoader\": () => (/* binding */ FontLoader)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass FontLoader extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n}\n\n//\n\nclass Font {\n\n\tconstructor( data ) {\n\n\t\tthis.type = 'Font';\n\n\t\tthis.data = data;\n\n\t}\n\n\tgenerateShapes( text, size = 100 ) {\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n}\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from( text );\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nFont.prototype.isFont = true;\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/loaders/FontLoader.js?");

/***/ }),

/***/ "./src/scripts/jsm/loaders/GLTFLoader.js":
/*!***********************************************!*\
  !*** ./src/scripts/jsm/loaders/GLTFLoader.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GLTFLoader\": () => (/* binding */ GLTFLoader)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass GLTFLoader extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenColor.fromArray( extension.sheenColorFactor );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || 0;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture ).then( function ( texture ) {\n\n\t\t\t\ttexture.encoding = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst source = json.images[ extension.source ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.roughness += geometryRoughness;',\n\t\t\t'material.roughness = min( material.roughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = 1.0;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\tmaterial.refractionRatio = 0.98;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\tconst result = this.resultBuffer;\n\tconst values = this.sampleValues;\n\tconst stride = this.valueSize;\n\n\tconst stride2 = stride * 2;\n\tconst stride3 = stride * 3;\n\n\tconst td = t1 - t0;\n\n\tconst p = ( t - t0 ) / td;\n\tconst pp = p * p;\n\tconst ppp = pp * p;\n\n\tconst offset1 = i1 * stride3;\n\tconst offset0 = offset1 - stride3;\n\n\tconst s2 = - 2 * ppp + 3 * pp;\n\tconst s3 = ppp - pp;\n\tconst s0 = 1 - s2;\n\tconst s1 = s3 - pp + p;\n\n\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t}\n\n\treturn result;\n\n};\n\nconst _q = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t9729: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t9984: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t9985: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t9986: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t9987: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t33648: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t10497: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\tSTEP: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox|^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst source = json.images[ textureDef.source ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, source, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tconst cacheKey = ( source.uri || source.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = source.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\tObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\tObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\tmaterialParams.emissive = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material )\n\t\t\t\t\t\t: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierarchy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) || key instanceof Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierarchy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierarchy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tconst vector = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/loaders/GLTFLoader.js?");

/***/ }),

/***/ "./src/scripts/jsm/math/Capsule.js":
/*!*****************************************!*\
  !*** ./src/scripts/jsm/math/Capsule.js ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Capsule\": () => (/* binding */ Capsule)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nconst _v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _v2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _v3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\nconst EPS = 1e-10;\n\nclass Capsule {\n\n\tconstructor( start = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 0, 0 ), end = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0, 1, 0 ), radius = 1 ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.radius = radius;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Capsule( this.start.clone(), this.end.clone(), this.radius );\n\n\t}\n\n\tset( start, end, radius ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\t\tthis.radius = radius;\n\n\t}\n\n\tcopy( capsule ) {\n\n\t\tthis.start.copy( capsule.start );\n\t\tthis.end.copy( capsule.end );\n\t\tthis.radius = capsule.radius;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.copy( this.end ).add( this.start ).multiplyScalar( 0.5 );\n\n\t}\n\n\ttranslate( v ) {\n\n\t\tthis.start.add( v );\n\t\tthis.end.add( v );\n\n\t}\n\n\tcheckAABBAxis( p1x, p1y, p2x, p2y, minx, maxx, miny, maxy, radius ) {\n\n\t\treturn (\n\t\t\t( minx - p1x < radius || minx - p2x < radius ) &&\n\t\t\t( p1x - maxx < radius || p2x - maxx < radius ) &&\n\t\t\t( miny - p1y < radius || miny - p2y < radius ) &&\n\t\t\t( p1y - maxy < radius || p2y - maxy < radius )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn (\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.x, this.start.y, this.end.x, this.end.y,\n\t\t\t\tbox.min.x, box.max.x, box.min.y, box.max.y,\n\t\t\t\tthis.radius ) &&\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.x, this.start.z, this.end.x, this.end.z,\n\t\t\t\tbox.min.x, box.max.x, box.min.z, box.max.z,\n\t\t\t\tthis.radius ) &&\n\t\t\tthis.checkAABBAxis(\n\t\t\t\tthis.start.y, this.start.z, this.end.y, this.end.z,\n\t\t\t\tbox.min.y, box.max.y, box.min.z, box.max.z,\n\t\t\t\tthis.radius )\n\t\t);\n\n\t}\n\n\tlineLineMinimumPoints( line1, line2 ) {\n\n\t\tconst r = _v1.copy( line1.end ).sub( line1.start );\n\t\tconst s = _v2.copy( line2.end ).sub( line2.start );\n\t\tconst w = _v3.copy( line2.start ).sub( line1.start );\n\n\t\tconst a = r.dot( s ),\n\t\t\tb = r.dot( r ),\n\t\t\tc = s.dot( s ),\n\t\t\td = s.dot( w ),\n\t\t\te = r.dot( w );\n\n\t\tlet t1, t2;\n\t\tconst divisor = b * c - a * a;\n\n\t\tif ( Math.abs( divisor ) < EPS ) {\n\n\t\t\tconst d1 = - d / c;\n\t\t\tconst d2 = ( a - d ) / c;\n\n\t\t\tif ( Math.abs( d1 - 0.5 ) < Math.abs( d2 - 0.5 ) ) {\n\n\t\t\t\tt1 = 0;\n\t\t\t\tt2 = d1;\n\n\t\t\t} else {\n\n\t\t\t\tt1 = 1;\n\t\t\t\tt2 = d2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tt1 = ( d * a + e * c ) / divisor;\n\t\t\tt2 = ( t1 * a - d ) / c;\n\n\t\t}\n\n\t\tt2 = Math.max( 0, Math.min( 1, t2 ) );\n\t\tt1 = Math.max( 0, Math.min( 1, t1 ) );\n\n\t\tconst point1 = r.multiplyScalar( t1 ).add( line1.start );\n\t\tconst point2 = s.multiplyScalar( t2 ).add( line2.start );\n\n\t\treturn [ point1, point2 ];\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/math/Capsule.js?");

/***/ }),

/***/ "./src/scripts/jsm/math/Octree.js":
/*!****************************************!*\
  !*** ./src/scripts/jsm/math/Octree.js ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Octree\": () => (/* binding */ Octree)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _math_Capsule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math/Capsule.js */ \"./src/scripts/jsm/math/Capsule.js\");\n\n\n\n\nconst _v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _v2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _plane = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _line1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _line2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _sphere = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\nconst _capsule = new _math_Capsule_js__WEBPACK_IMPORTED_MODULE_1__.Capsule();\n\nclass Octree {\n\n\n\tconstructor( box ) {\n\n\t\tthis.triangles = [];\n\t\tthis.box = box;\n\t\tthis.subTrees = [];\n\n\t}\n\n\taddTriangle( triangle ) {\n\n\t\tif ( ! this.bounds ) this.bounds = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tthis.bounds.min.x = Math.min( this.bounds.min.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.min.y = Math.min( this.bounds.min.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.min.z = Math.min( this.bounds.min.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\t\tthis.bounds.max.x = Math.max( this.bounds.max.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.max.y = Math.max( this.bounds.max.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.max.z = Math.max( this.bounds.max.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\n\t\tthis.triangles.push( triangle );\n\n\t\treturn this;\n\n\t}\n\n\tcalcBox() {\n\n\t\tthis.box = this.bounds.clone();\n\n\t\t// offset small ammount to account for regular grid\n\t\tthis.box.min.x -= 0.01;\n\t\tthis.box.min.y -= 0.01;\n\t\tthis.box.min.z -= 0.01;\n\n\t\treturn this;\n\n\t}\n\n\tsplit( level ) {\n\n\t\tif ( ! this.box ) return;\n\n\t\tconst subTrees = [];\n\t\tconst halfsize = _v2.copy( this.box.max ).sub( this.box.min ).multiplyScalar( 0.5 );\n\n\t\tfor ( let x = 0; x < 2; x ++ ) {\n\n\t\t\tfor ( let y = 0; y < 2; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z < 2; z ++ ) {\n\n\t\t\t\t\tconst box = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\t\t\t\tconst v = _v1.set( x, y, z );\n\n\t\t\t\t\tbox.min.copy( this.box.min ).add( v.multiply( halfsize ) );\n\t\t\t\t\tbox.max.copy( box.min ).add( halfsize );\n\n\t\t\t\t\tsubTrees.push( new Octree( box ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet triangle;\n\n\t\twhile ( triangle = this.triangles.pop() ) {\n\n\t\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\t\tif ( subTrees[ i ].box.intersectsTriangle( triangle ) ) {\n\n\t\t\t\t\tsubTrees[ i ].triangles.push( triangle );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\tconst len = subTrees[ i ].triangles.length;\n\n\t\t\tif ( len > 8 && level < 16 ) {\n\n\t\t\t\tsubTrees[ i ].split( level + 1 );\n\n\t\t\t}\n\n\t\t\tif ( len !== 0 ) {\n\n\t\t\t\tthis.subTrees.push( subTrees[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tbuild() {\n\n\t\tthis.calcBox();\n\t\tthis.split( 0 );\n\n\t\treturn this;\n\n\t}\n\n\tgetRayTriangles( ray, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\t\t\tif ( ! ray.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getRayTriangles( ray, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles;\n\n\t}\n\n\ttriangleCapsuleIntersect( capsule, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tconst d1 = _plane.distanceToPoint( capsule.start ) - capsule.radius;\n\t\tconst d2 = _plane.distanceToPoint( capsule.end ) - capsule.radius;\n\n\t\tif ( ( d1 > 0 && d2 > 0 ) || ( d1 < - capsule.radius && d2 < - capsule.radius ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tconst delta = Math.abs( d1 / ( Math.abs( d1 ) + Math.abs( d2 ) ) );\n\t\tconst intersectPoint = _v1.copy( capsule.start ).lerp( capsule.end, delta );\n\n\t\tif ( triangle.containsPoint( intersectPoint ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: intersectPoint.clone(), depth: Math.abs( Math.min( d1, d2 ) ) };\n\n\t\t}\n\n\t\tconst r2 = capsule.radius * capsule.radius;\n\n\t\tconst line1 = _line1.set( capsule.start, capsule.end );\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tconst line2 = _line2.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\n\t\t\tconst [ point1, point2 ] = capsule.lineLineMinimumPoints( line1, line2 );\n\n\t\t\tif ( point1.distanceToSquared( point2 ) < r2 ) {\n\n\t\t\t\treturn { normal: point1.clone().sub( point2 ).normalize(), point: point2.clone(), depth: capsule.radius - point1.distanceTo( point2 ) };\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\ttriangleSphereIntersect( sphere, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tif ( ! sphere.intersectsPlane( _plane ) ) return false;\n\n\t\tconst depth = Math.abs( _plane.distanceToSphere( sphere ) );\n\t\tconst r2 = sphere.radius * sphere.radius - depth * depth;\n\n\t\tconst plainPoint = _plane.projectPoint( sphere.center, _v1 );\n\n\t\tif ( triangle.containsPoint( sphere.center ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: plainPoint.clone(), depth: Math.abs( _plane.distanceToSphere( sphere ) ) };\n\n\t\t}\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\t_line1.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\t\t\t_line1.closestPointToPoint( plainPoint, true, _v2 );\n\n\t\t\tconst d = _v2.distanceToSquared( sphere.center );\n\n\t\t\tif ( d < r2 ) {\n\n\t\t\t\treturn { normal: sphere.center.clone().sub( _v2 ).normalize(), point: _v2.clone(), depth: sphere.radius - Math.sqrt( d ) };\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tgetSphereTriangles( sphere, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! sphere.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getSphereTriangles( sphere, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetCapsuleTriangles( capsule, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! capsule.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getCapsuleTriangles( capsule, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tsphereIntersect( sphere ) {\n\n\t\t_sphere.copy( sphere );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getSphereTriangles( sphere, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleSphereIntersect( _sphere, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_sphere.center.add( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _sphere.center.clone().sub( sphere.center );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tcapsuleIntersect( capsule ) {\n\n\t\t_capsule.copy( capsule );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getCapsuleTriangles( _capsule, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleCapsuleIntersect( _capsule, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_capsule.translate( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _capsule.getCenter( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())() ).sub( capsule.getCenter( _v1 ) );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\trayIntersect( ray ) {\n\n\t\tif ( ray.direction.length() === 0 ) return;\n\n\t\tconst triangles = [];\n\t\tlet triangle, position, distance = 1e100;\n\n\t\tthis.getRayTriangles( ray, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tconst result = ray.intersectTriangle( triangles[ i ].a, triangles[ i ].b, triangles[ i ].c, true, _v1 );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tconst newdistance = result.sub( ray.origin ).length();\n\n\t\t\t\tif ( distance > newdistance ) {\n\n\t\t\t\t\tposition = result.clone().add( ray.origin );\n\t\t\t\t\tdistance = newdistance;\n\t\t\t\t\ttriangle = triangles[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn distance < 1e100 ? { distance: distance, triangle: triangle, position: position } : false;\n\n\t}\n\n\tfromGraphNode( group ) {\n\n\t\tgroup.updateWorldMatrix( true, true );\n\n\t\tgroup.traverse( ( obj ) => {\n\n\t\t\tif ( obj.isMesh === true ) {\n\n\t\t\t\tlet geometry, isTemp = false;\n\n\t\t\t\tif ( obj.geometry.index !== null ) {\n\n\t\t\t\t\tisTemp = true;\n\t\t\t\t\tgeometry = obj.geometry.toNonIndexed();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgeometry = obj.geometry;\n\n\t\t\t\t}\n\n\t\t\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\t\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\t\t\tconst v1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tconst v2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tconst v3 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tv1.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv2.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv3.applyMatrix4( obj.matrixWorld );\n\n\t\t\t\t\tthis.addTriangle( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( v1, v2, v3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTemp ) {\n\n\t\t\t\t\tgeometry.dispose();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.build();\n\n\t\treturn this;\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/math/Octree.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/EffectComposer.js":
/*!**********************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/EffectComposer.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"EffectComposer\": () => (/* binding */ EffectComposer),\n/* harmony export */   \"FullScreenQuad\": () => (/* binding */ FullScreenQuad),\n/* harmony export */   \"Pass\": () => (/* binding */ Pass)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shaders/CopyShader.js */ \"./src/scripts/jsm/shaders/CopyShader.js\");\n/* harmony import */ var _ShaderPass_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ShaderPass.js */ \"./src/scripts/jsm/postprocessing/ShaderPass.js\");\n/* harmony import */ var _MaskPass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./MaskPass.js */ \"./src/scripts/jsm/postprocessing/MaskPass.js\");\n\n\n\n\n\n\nclass EffectComposer {\n\n\tconstructor( renderer, renderTarget ) {\n\n\t\tthis.renderer = renderer;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst parameters = {\n\t\t\t\tminFilter: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t\t\t\tmagFilter: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t\t\t\tformat: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n\t\t\t};\n\n\t\t\tconst size = renderer.getSize( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())() );\n\t\t\tthis._pixelRatio = renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this._width * this._pixelRatio, this._height * this._pixelRatio, parameters );\n\t\t\trenderTarget.texture.name = 'EffectComposer.rt1';\n\n\t\t} else {\n\n\t\t\tthis._pixelRatio = 1;\n\t\t\tthis._width = renderTarget.width;\n\t\t\tthis._height = renderTarget.height;\n\n\t\t}\n\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\t\tthis.renderTarget2.texture.name = 'EffectComposer.rt2';\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t\tthis.renderToScreen = true;\n\n\t\tthis.passes = [];\n\n\t\t// dependencies\n\n\t\tif ( _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_1__.CopyShader === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on CopyShader' );\n\n\t\t}\n\n\t\tif ( _ShaderPass_js__WEBPACK_IMPORTED_MODULE_2__.ShaderPass === undefined ) {\n\n\t\t\tconsole.error( 'THREE.EffectComposer relies on ShaderPass' );\n\n\t\t}\n\n\t\tthis.copyPass = new _ShaderPass_js__WEBPACK_IMPORTED_MODULE_2__.ShaderPass( _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_1__.CopyShader );\n\n\t\tthis.clock = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t}\n\n\tswapBuffers() {\n\n\t\tconst tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t}\n\n\taddPass( pass ) {\n\n\t\tthis.passes.push( pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tinsertPass( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\t\tpass.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t}\n\n\tremovePass( pass ) {\n\n\t\tconst index = this.passes.indexOf( pass );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.passes.splice( index, 1 );\n\n\t\t}\n\n\t}\n\n\tisLastEnabledPass( passIndex ) {\n\n\t\tfor ( let i = passIndex + 1; i < this.passes.length; i ++ ) {\n\n\t\t\tif ( this.passes[ i ].enabled ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\trender( deltaTime ) {\n\n\t\t// deltaTime value is in seconds\n\n\t\tif ( deltaTime === undefined ) {\n\n\t\t\tdeltaTime = this.clock.getDelta();\n\n\t\t}\n\n\t\tconst currentRenderTarget = this.renderer.getRenderTarget();\n\n\t\tlet maskActive = false;\n\n\t\tfor ( let i = 0, il = this.passes.length; i < il; i ++ ) {\n\n\t\t\tconst pass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.renderToScreen = ( this.renderToScreen && this.isLastEnabledPass( i ) );\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tconst context = this.renderer.getContext();\n\t\t\t\t\tconst stencil = this.renderer.state.buffers.stencil;\n\n\t\t\t\t\t//context.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, deltaTime );\n\n\t\t\t\t\t//context.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\t\t\t\t\tstencil.setFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( _MaskPass_js__WEBPACK_IMPORTED_MODULE_3__.MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof _MaskPass_js__WEBPACK_IMPORTED_MODULE_3__.MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof _MaskPass_js__WEBPACK_IMPORTED_MODULE_3__.ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\treset( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tconst size = this.renderer.getSize( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())() );\n\t\t\tthis._pixelRatio = this.renderer.getPixelRatio();\n\t\t\tthis._width = size.width;\n\t\t\tthis._height = size.height;\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( this._width * this._pixelRatio, this._height * this._pixelRatio );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis._width = width;\n\t\tthis._height = height;\n\n\t\tconst effectiveWidth = this._width * this._pixelRatio;\n\t\tconst effectiveHeight = this._height * this._pixelRatio;\n\n\t\tthis.renderTarget1.setSize( effectiveWidth, effectiveHeight );\n\t\tthis.renderTarget2.setSize( effectiveWidth, effectiveHeight );\n\n\t\tfor ( let i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[ i ].setSize( effectiveWidth, effectiveHeight );\n\n\t\t}\n\n\t}\n\n\tsetPixelRatio( pixelRatio ) {\n\n\t\tthis._pixelRatio = pixelRatio;\n\n\t\tthis.setSize( this._width, this._height );\n\n\t}\n\n}\n\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n_geometry.setAttribute( 'position', new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/EffectComposer.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/MaskPass.js":
/*!****************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/MaskPass.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ClearMaskPass\": () => (/* binding */ ClearMaskPass),\n/* harmony export */   \"MaskPass\": () => (/* binding */ MaskPass)\n/* harmony export */ });\n/* harmony import */ var _Pass_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Pass.js */ \"./src/scripts/jsm/postprocessing/Pass.js\");\n\n\nclass MaskPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_0__.Pass {\n\n\tconstructor( scene, camera ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.clear = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis.inverse = false;\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst context = renderer.getContext();\n\t\tconst state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tlet writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.setRenderTarget( readBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\trenderer.setRenderTarget( writeBuffer );\n\t\tif ( this.clear ) renderer.clear();\n\t\trenderer.render( this.scene, this.camera );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setLocked( false );\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff ); // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\t\tstate.buffers.stencil.setLocked( true );\n\n\t}\n\n}\n\nclass ClearMaskPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_0__.Pass {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.needsSwap = false;\n\n\t}\n\n\trender( renderer /*, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\trenderer.state.buffers.stencil.setLocked( false );\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/MaskPass.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/OutlinePass.js":
/*!*******************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/OutlinePass.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"OutlinePass\": () => (/* binding */ OutlinePass)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Pass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Pass.js */ \"./src/scripts/jsm/postprocessing/Pass.js\");\n/* harmony import */ var _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shaders/CopyShader.js */ \"./src/scripts/jsm/shaders/CopyShader.js\");\n\n\n\n\nclass OutlinePass extends _Pass_js__WEBPACK_IMPORTED_MODULE_1__.Pass {\n\n\tconstructor( resolution, scene, camera, selectedObjects ) {\n\n\t\tsuper();\n\n\t\tthis.renderScene = scene;\n\t\tthis.renderCamera = camera;\n\t\tthis.selectedObjects = selectedObjects !== undefined ? selectedObjects : [];\n\t\tthis.visibleEdgeColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1, 1, 1 );\n\t\tthis.hiddenEdgeColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.0, 0.00, 0.00 );\n\t\tthis.edgeGlow = 0.0;\n\t\tthis.usePatternTexture = false;\n\t\tthis.edgeThickness = .4;\n\t\tthis.edgeStrength = 2;\n\t\tthis.downSampleRatio = 2;\n\t\tthis.pulsePeriod = 0;\n\n\t\tthis._visibilityCache = new Map();\n\n\n\t\tthis.resolution = ( resolution !== undefined ) ? new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( resolution.x, resolution.y ) : new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 256, 256 );\n\n\t\tconst pars = { minFilter: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), magFilter: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()), format: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) };\n\n\t\tconst resx = Math.round( this.resolution.x / this.downSampleRatio );\n\t\tconst resy = Math.round( this.resolution.y / this.downSampleRatio );\n\n\t\tthis.renderTargetMaskBuffer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.resolution.x, this.resolution.y, pars );\n\t\tthis.renderTargetMaskBuffer.texture.name = 'OutlinePass.mask';\n\t\tthis.renderTargetMaskBuffer.texture.generateMipmaps = false;\n\n\t\tthis.depthMaterial = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.depthMaterial.side = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.depthMaterial.depthPacking = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.depthMaterial.blending = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\t\tthis.prepareMaskMaterial = this.getPrepareMaskMaterial();\n\t\tthis.prepareMaskMaterial.side = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\t\tthis.prepareMaskMaterial.fragmentShader = replaceDepthToViewZ( this.prepareMaskMaterial.fragmentShader, this.renderCamera );\n\n\t\tthis.renderTargetDepthBuffer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( this.resolution.x, this.resolution.y, pars );\n\t\tthis.renderTargetDepthBuffer.texture.name = 'OutlinePass.depth';\n\t\tthis.renderTargetDepthBuffer.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetMaskDownSampleBuffer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( resx, resy, pars );\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.name = 'OutlinePass.depthDownSample';\n\t\tthis.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetBlurBuffer1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( resx, resy, pars );\n\t\tthis.renderTargetBlurBuffer1.texture.name = 'OutlinePass.blur1';\n\t\tthis.renderTargetBlurBuffer1.texture.generateMipmaps = false;\n\t\tthis.renderTargetBlurBuffer2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( Math.round( resx / 2 ), Math.round( resy / 2 ), pars );\n\t\tthis.renderTargetBlurBuffer2.texture.name = 'OutlinePass.blur2';\n\t\tthis.renderTargetBlurBuffer2.texture.generateMipmaps = false;\n\n\t\tthis.edgeDetectionMaterial = this.getEdgeDetectionMaterial();\n\t\tthis.renderTargetEdgeBuffer1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( resx, resy, pars );\n\t\tthis.renderTargetEdgeBuffer1.texture.name = 'OutlinePass.edge1';\n\t\tthis.renderTargetEdgeBuffer1.texture.generateMipmaps = false;\n\t\tthis.renderTargetEdgeBuffer2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( Math.round( resx / 2 ), Math.round( resy / 2 ), pars );\n\t\tthis.renderTargetEdgeBuffer2.texture.name = 'OutlinePass.edge2';\n\t\tthis.renderTargetEdgeBuffer2.texture.generateMipmaps = false;\n\n\t\tconst MAX_EDGE_THICKNESS = 4;\n\t\tconst MAX_EDGE_GLOW = 4;\n\n\t\tthis.separableBlurMaterial1 = this.getSeperableBlurMaterial( MAX_EDGE_THICKNESS );\n\t\tthis.separableBlurMaterial1.uniforms[ 'texSize' ].value.set( resx, resy );\n\t\tthis.separableBlurMaterial1.uniforms[ 'kernelRadius' ].value = 1;\n\t\tthis.separableBlurMaterial2 = this.getSeperableBlurMaterial( MAX_EDGE_GLOW );\n\t\tthis.separableBlurMaterial2.uniforms[ 'texSize' ].value.set( Math.round( resx / 2 ), Math.round( resy / 2 ) );\n\t\tthis.separableBlurMaterial2.uniforms[ 'kernelRadius' ].value = MAX_EDGE_GLOW;\n\n\t\t// Overlay material\n\t\tthis.overlayMaterial = this.getOverlayMaterial();\n\n\t\t// copy material\n\t\tif ( _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_2__.CopyShader === undefined ) console.error( 'THREE.OutlinePass relies on CopyShader' );\n\n\t\tconst copyShader = _shaders_CopyShader_js__WEBPACK_IMPORTED_MODULE_2__.CopyShader;\n\n\t\tthis.copyUniforms = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( copyShader.uniforms );\n\t\tthis.copyUniforms[ 'opacity' ].value = 1.0;\n\n\t\tthis.materialCopy = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\t\t\tuniforms: this.copyUniforms,\n\t\t\tvertexShader: copyShader.vertexShader,\n\t\t\tfragmentShader: copyShader.fragmentShader,\n\t\t\tblending: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.enabled = true;\n\t\tthis.needsSwap = false;\n\n\t\tthis._oldClearColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.oldClearAlpha = 1;\n\n\t\tthis.fsQuad = new _Pass_js__WEBPACK_IMPORTED_MODULE_1__.FullScreenQuad( null );\n\n\t\tthis.tempPulseColor1 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.tempPulseColor2 = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\t\tthis.textureMatrix = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t\tfunction replaceDepthToViewZ( string, camera ) {\n\n\t\t\tconst type = camera.isPerspectiveCamera ? 'perspective' : 'orthographic';\n\n\t\t\treturn string.replace( /DEPTH_TO_VIEW_Z/g, type + 'DepthToViewZ' );\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tthis.renderTargetMaskBuffer.dispose();\n\t\tthis.renderTargetDepthBuffer.dispose();\n\t\tthis.renderTargetMaskDownSampleBuffer.dispose();\n\t\tthis.renderTargetBlurBuffer1.dispose();\n\t\tthis.renderTargetBlurBuffer2.dispose();\n\t\tthis.renderTargetEdgeBuffer1.dispose();\n\t\tthis.renderTargetEdgeBuffer2.dispose();\n\n\t}\n\n\tsetSize( width, height ) {\n\n\t\tthis.renderTargetMaskBuffer.setSize( width, height );\n\t\tthis.renderTargetDepthBuffer.setSize( width, height );\n\n\t\tlet resx = Math.round( width / this.downSampleRatio );\n\t\tlet resy = Math.round( height / this.downSampleRatio );\n\t\tthis.renderTargetMaskDownSampleBuffer.setSize( resx, resy );\n\t\tthis.renderTargetBlurBuffer1.setSize( resx, resy );\n\t\tthis.renderTargetEdgeBuffer1.setSize( resx, resy );\n\t\tthis.separableBlurMaterial1.uniforms[ 'texSize' ].value.set( resx, resy );\n\n\t\tresx = Math.round( resx / 2 );\n\t\tresy = Math.round( resy / 2 );\n\n\t\tthis.renderTargetBlurBuffer2.setSize( resx, resy );\n\t\tthis.renderTargetEdgeBuffer2.setSize( resx, resy );\n\n\t\tthis.separableBlurMaterial2.uniforms[ 'texSize' ].value.set( resx, resy );\n\n\t}\n\n\tchangeVisibilityOfSelectedObjects( bVisible ) {\n\n\t\tconst cache = this._visibilityCache;\n\n\t\tfunction gatherSelectedMeshesCallBack( object ) {\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tif ( bVisible === true ) {\n\n\t\t\t\t\tobject.visible = cache.get( object );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcache.set( object, object.visible );\n\t\t\t\t\tobject.visible = bVisible;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < this.selectedObjects.length; i ++ ) {\n\n\t\t\tconst selectedObject = this.selectedObjects[ i ];\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\n\n\t\t}\n\n\t}\n\n\tchangeVisibilityOfNonSelectedObjects( bVisible ) {\n\n\t\tconst cache = this._visibilityCache;\n\t\tconst selectedMeshes = [];\n\n\t\tfunction gatherSelectedMeshesCallBack( object ) {\n\n\t\t\tif ( object.isMesh ) selectedMeshes.push( object );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < this.selectedObjects.length; i ++ ) {\n\n\t\t\tconst selectedObject = this.selectedObjects[ i ];\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\n\n\t\t}\n\n\t\tfunction VisibilityChangeCallBack( object ) {\n\n\t\t\tif ( object.isMesh || object.isSprite ) {\n\n\t\t\t\t// only meshes and sprites are supported by OutlinePass\n\n\t\t\t\tlet bFound = false;\n\n\t\t\t\tfor ( let i = 0; i < selectedMeshes.length; i ++ ) {\n\n\t\t\t\t\tconst selectedObjectId = selectedMeshes[ i ].id;\n\n\t\t\t\t\tif ( selectedObjectId === object.id ) {\n\n\t\t\t\t\t\tbFound = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( bFound === false ) {\n\n\t\t\t\t\tconst visibility = object.visible;\n\n\t\t\t\t\tif ( bVisible === false || cache.get( object ) === true ) {\n\n\t\t\t\t\t\tobject.visible = bVisible;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcache.set( object, visibility );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isPoints || object.isLine ) {\n\n\t\t\t\t// the visibilty of points and lines is always set to false in order to\n\t\t\t\t// not affect the outline computation\n\n\t\t\t\tif ( bVisible === true ) {\n\n\t\t\t\t\tobject.visible = cache.get( object ); // restore\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcache.set( object, object.visible );\n\t\t\t\t\tobject.visible = bVisible;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.renderScene.traverse( VisibilityChangeCallBack );\n\n\t}\n\n\tupdateTextureMatrix() {\n\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.textureMatrix.multiply( this.renderCamera.projectionMatrix );\n\t\tthis.textureMatrix.multiply( this.renderCamera.matrixWorldInverse );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\tif ( this.selectedObjects.length > 0 ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\t\tconst oldAutoClear = renderer.autoClear;\n\n\t\t\trenderer.autoClear = false;\n\n\t\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t\trenderer.setClearColor( 0xffffff, 1 );\n\n\t\t\t// Make selected objects invisible\n\t\t\tthis.changeVisibilityOfSelectedObjects( false );\n\n\t\t\tconst currentBackground = this.renderScene.background;\n\t\t\tthis.renderScene.background = null;\n\n\t\t\t// 1. Draw Non Selected objects in the depth buffer\n\t\t\tthis.renderScene.overrideMaterial = this.depthMaterial;\n\t\t\trenderer.setRenderTarget( this.renderTargetDepthBuffer );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.renderScene, this.renderCamera );\n\n\t\t\t// Make selected objects visible\n\t\t\tthis.changeVisibilityOfSelectedObjects( true );\n\t\t\tthis._visibilityCache.clear();\n\n\t\t\t// Update Texture Matrix for Depth compare\n\t\t\tthis.updateTextureMatrix();\n\n\t\t\t// Make non selected objects invisible, and draw only the selected objects, by comparing the depth buffer of non selected objects\n\t\t\tthis.changeVisibilityOfNonSelectedObjects( false );\n\t\t\tthis.renderScene.overrideMaterial = this.prepareMaskMaterial;\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'cameraNearFar' ].value.set( this.renderCamera.near, this.renderCamera.far );\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'depthTexture' ].value = this.renderTargetDepthBuffer.texture;\n\t\t\tthis.prepareMaskMaterial.uniforms[ 'textureMatrix' ].value = this.textureMatrix;\n\t\t\trenderer.setRenderTarget( this.renderTargetMaskBuffer );\n\t\t\trenderer.clear();\n\t\t\trenderer.render( this.renderScene, this.renderCamera );\n\t\t\tthis.renderScene.overrideMaterial = null;\n\t\t\tthis.changeVisibilityOfNonSelectedObjects( true );\n\t\t\tthis._visibilityCache.clear();\n\n\t\t\tthis.renderScene.background = currentBackground;\n\n\t\t\t// 2. Downsample to Half resolution\n\t\t\tthis.fsQuad.material = this.materialCopy;\n\t\t\tthis.copyUniforms[ 'tDiffuse' ].value = this.renderTargetMaskBuffer.texture;\n\t\t\trenderer.setRenderTarget( this.renderTargetMaskDownSampleBuffer );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.tempPulseColor1.copy( this.visibleEdgeColor );\n\t\t\tthis.tempPulseColor2.copy( this.hiddenEdgeColor );\n\n\t\t\tif ( this.pulsePeriod > 0 ) {\n\n\t\t\t\tconst scalar = ( 1 + 0.25 ) / 2 + Math.cos( performance.now() * 0.01 / this.pulsePeriod ) * ( 1.0 - 0.25 ) / 2;\n\t\t\t\tthis.tempPulseColor1.multiplyScalar( scalar );\n\t\t\t\tthis.tempPulseColor2.multiplyScalar( scalar );\n\n\t\t\t}\n\n\t\t\t// 3. Apply Edge Detection Pass\n\t\t\tthis.fsQuad.material = this.edgeDetectionMaterial;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'maskTexture' ].value = this.renderTargetMaskDownSampleBuffer.texture;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'texSize' ].value.set( this.renderTargetMaskDownSampleBuffer.width, this.renderTargetMaskDownSampleBuffer.height );\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'visibleEdgeColor' ].value = this.tempPulseColor1;\n\t\t\tthis.edgeDetectionMaterial.uniforms[ 'hiddenEdgeColor' ].value = this.tempPulseColor2;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// 4. Apply Blur on Half res\n\t\t\tthis.fsQuad.material = this.separableBlurMaterial1;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'colorTexture' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionX;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'kernelRadius' ].value = this.edgeThickness;\n\t\t\trenderer.setRenderTarget( this.renderTargetBlurBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'colorTexture' ].value = this.renderTargetBlurBuffer1.texture;\n\t\t\tthis.separableBlurMaterial1.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer1 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// Apply Blur on quarter res\n\t\t\tthis.fsQuad.material = this.separableBlurMaterial2;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'colorTexture' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetBlurBuffer2 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'colorTexture' ].value = this.renderTargetBlurBuffer2.texture;\n\t\t\tthis.separableBlurMaterial2.uniforms[ 'direction' ].value = OutlinePass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetEdgeBuffer2 );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\t// Blend it additively over the input texture\n\t\t\tthis.fsQuad.material = this.overlayMaterial;\n\t\t\tthis.overlayMaterial.uniforms[ 'maskTexture' ].value = this.renderTargetMaskBuffer.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeTexture1' ].value = this.renderTargetEdgeBuffer1.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeTexture2' ].value = this.renderTargetEdgeBuffer2.texture;\n\t\t\tthis.overlayMaterial.uniforms[ 'patternTexture' ].value = this.patternTexture;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeStrength' ].value = this.edgeStrength;\n\t\t\tthis.overlayMaterial.uniforms[ 'edgeGlow' ].value = this.edgeGlow;\n\t\t\tthis.overlayMaterial.uniforms[ 'usePatternTexture' ].value = this.usePatternTexture;\n\n\n\t\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\trenderer.setClearColor( this._oldClearColor, this.oldClearAlpha );\n\t\t\trenderer.autoClear = oldAutoClear;\n\n\t\t}\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.materialCopy;\n\t\t\tthis.copyUniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\tgetPrepareMaskMaterial() {\n\n\t\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\n\t\t\tuniforms: {\n\t\t\t\t'depthTexture': { value: null },\n\t\t\t\t'cameraNearFar': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.5, 0.5 ) },\n\t\t\t\t'textureMatrix': { value: null }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}`\n\n\t\t} );\n\n\t}\n\n\tgetEdgeDetectionMaterial() {\n\n\t\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\n\t\t\tuniforms: {\n\t\t\t\t'maskTexture': { value: null },\n\t\t\t\t'texSize': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.5, 0.5 ) },\n\t\t\t\t'visibleEdgeColor': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 ) },\n\t\t\t\t'hiddenEdgeColor': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 1.0, 1.0 ) },\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\tgetSeperableBlurMaterial( maxRadius ) {\n\n\t\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\n\t\t\tdefines: {\n\t\t\t\t'MAX_RADIUS': maxRadius,\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t'colorTexture': { value: null },\n\t\t\t\t'texSize': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.5, 0.5 ) },\n\t\t\t\t'direction': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.5, 0.5 ) },\n\t\t\t\t'kernelRadius': { value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}`\n\t\t} );\n\n\t}\n\n\tgetOverlayMaterial() {\n\n\t\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\n\t\t\tuniforms: {\n\t\t\t\t'maskTexture': { value: null },\n\t\t\t\t'edgeTexture1': { value: null },\n\t\t\t\t'edgeTexture2': { value: null },\n\t\t\t\t'patternTexture': { value: null },\n\t\t\t\t'edgeStrength': { value: 1.0 },\n\t\t\t\t'edgeGlow': { value: 1.0 },\n\t\t\t\t'usePatternTexture': { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}`,\n\n\t\t\tfragmentShader:\n\t\t\t\t`varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}`,\n\t\t\tblending: Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t}\n\n}\n\nOutlinePass.BlurDirectionX = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1.0, 0.0 );\nOutlinePass.BlurDirectionY = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 0.0, 1.0 );\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/OutlinePass.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/Pass.js":
/*!************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/Pass.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FullScreenQuad\": () => (/* binding */ FullScreenQuad),\n/* harmony export */   \"Pass\": () => (/* binding */ Pass)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\nclass Pass {\n\n\tconstructor() {\n\n\t\t// if set to true, the pass is processed by the composer\n\t\tthis.enabled = true;\n\n\t\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\t\tthis.needsSwap = true;\n\n\t\t// if set to true, the pass clears its buffer before rendering\n\t\tthis.clear = false;\n\n\t\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\t\tthis.renderToScreen = false;\n\n\t}\n\n\tsetSize( /* width, height */ ) {}\n\n\trender( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n}\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nconst _camera = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( - 1, 1, 1, - 1, 0, 1 );\n\n// https://github.com/mrdoob/three.js/pull/21358\n\nconst _geometry = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n_geometry.setAttribute( 'position', new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( [ - 1, 3, 0, - 1, - 1, 0, 3, - 1, 0 ], 3 ) );\n_geometry.setAttribute( 'uv', new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( [ 0, 2, 0, 0, 2, 0 ], 2 ) );\n\nclass FullScreenQuad {\n\n\tconstructor( material ) {\n\n\t\tthis._mesh = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( _geometry, material );\n\n\t}\n\n\tdispose() {\n\n\t\tthis._mesh.geometry.dispose();\n\n\t}\n\n\trender( renderer ) {\n\n\t\trenderer.render( this._mesh, _camera );\n\n\t}\n\n\tget material() {\n\n\t\treturn this._mesh.material;\n\n\t}\n\n\tset material( value ) {\n\n\t\tthis._mesh.material = value;\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/Pass.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/RenderPass.js":
/*!******************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/RenderPass.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderPass\": () => (/* binding */ RenderPass)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Pass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Pass.js */ \"./src/scripts/jsm/postprocessing/Pass.js\");\n\n\n\nclass RenderPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_1__.Pass {\n\n\tconstructor( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\t\tsuper();\n\n\t\tthis.scene = scene;\n\t\tthis.camera = camera;\n\n\t\tthis.overrideMaterial = overrideMaterial;\n\n\t\tthis.clearColor = clearColor;\n\t\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\t\tthis.clear = true;\n\t\tthis.clearDepth = false;\n\t\tthis.needsSwap = false;\n\t\tthis._oldClearColor = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tconst oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tlet oldClearAlpha, oldOverrideMaterial;\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\toldOverrideMaterial = this.scene.overrideMaterial;\n\n\t\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\t}\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.getClearColor( this._oldClearColor );\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\tif ( this.clearDepth ) {\n\n\t\t\trenderer.clearDepth();\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\n\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\trenderer.render( this.scene, this.camera );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( this._oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif ( this.overrideMaterial !== undefined ) {\n\n\t\t\tthis.scene.overrideMaterial = oldOverrideMaterial;\n\n\t\t}\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/RenderPass.js?");

/***/ }),

/***/ "./src/scripts/jsm/postprocessing/ShaderPass.js":
/*!******************************************************!*\
  !*** ./src/scripts/jsm/postprocessing/ShaderPass.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ShaderPass\": () => (/* binding */ ShaderPass)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _Pass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Pass.js */ \"./src/scripts/jsm/postprocessing/Pass.js\");\n\n\n\nclass ShaderPass extends _Pass_js__WEBPACK_IMPORTED_MODULE_1__.Pass {\n\n\tconstructor( shader, textureID ) {\n\n\t\tsuper();\n\n\t\tthis.textureID = ( textureID !== undefined ) ? textureID : 'tDiffuse';\n\n\t\tif ( shader instanceof Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()) ) {\n\n\t\t\tthis.uniforms = shader.uniforms;\n\n\t\t\tthis.material = shader;\n\n\t\t} else if ( shader ) {\n\n\t\t\tthis.uniforms = Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( shader.uniforms );\n\n\t\t\tthis.material = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( {\n\n\t\t\t\tdefines: Object.assign( {}, shader.defines ),\n\t\t\t\tuniforms: this.uniforms,\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.fsQuad = new _Pass_js__WEBPACK_IMPORTED_MODULE_1__.FullScreenQuad( this.material );\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tthis.fsQuad.material = this.material;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\t// TODO: Avoid using autoClear properties, see https://github.com/mrdoob/three.js/pull/15571#issuecomment-465669600\n\t\t\tif ( this.clear ) renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/postprocessing/ShaderPass.js?");

/***/ }),

/***/ "./src/scripts/jsm/shaders/CopyShader.js":
/*!***********************************************!*\
  !*** ./src/scripts/jsm/shaders/CopyShader.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CopyShader\": () => (/* binding */ CopyShader)\n/* harmony export */ });\n/**\n * Full-screen textured quad shader\n */\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'opacity': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}`\n\n};\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/shaders/CopyShader.js?");

/***/ }),

/***/ "./src/scripts/jsm/shaders/FXAAShader.js":
/*!***********************************************!*\
  !*** ./src/scripts/jsm/shaders/FXAAShader.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FXAAShader\": () => (/* binding */ FXAAShader)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n/**\n * NVIDIA FXAA by Timothy Lottes\n * https://developer.download.nvidia.com/assets/gamedev/files/sdk/11/FXAA_WhitePaper.pdf\n * - WebGL port by @supereggbert\n * http://www.glge.org/demos/fxaa/\n */\n\nconst FXAAShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'resolution': { value: new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader:\n\n\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t//----------------------------------------------------------------------------------\n\t// File:\t\t\t\tes3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\n\t// SDK Version: v3.00\n\t// Email:\t\t\t gameworks@nvidia.com\n\t// Site:\t\t\t\thttp://developer.nvidia.com/\n\t//\n\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t//\n\t// Redistribution and use in source and binary forms, with or without\n\t// modification, are permitted provided that the following conditions\n\t// are met:\n\t//\t* Redistributions of source code must retain the above copyright\n\t//\t\tnotice, this list of conditions and the following disclaimer.\n\t//\t* Redistributions in binary form must reproduce the above copyright\n\t//\t\tnotice, this list of conditions and the following disclaimer in the\n\t//\t\tdocumentation and/or other materials provided with the distribution.\n\t//\t* Neither the name of NVIDIA CORPORATION nor the names of its\n\t//\t\tcontributors may be used to endorse or promote products derived\n\t//\t\tfrom this software without specific prior written permission.\n\t//\n\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS\\'\\' AND ANY\n\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t// PURPOSE ARE DISCLAIMED.\tIN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t//\n\t//----------------------------------------------------------------------------------\n\n\t/* glsl */`\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\t#define FXAA_PC 1\n\t\t#define FXAA_GLSL_100 1\n\t\t#define FXAA_QUALITY_PRESET 12\n\n\t\t#define FXAA_GREEN_AS_LUMA 1\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_PC_CONSOLE\n\t\t\t\t//\n\t\t\t\t// The console algorithm for PC is included\n\t\t\t\t// for developers targeting really low spec machines.\n\t\t\t\t// Likely better to just run FXAA_PC, and use a really low preset.\n\t\t\t\t//\n\t\t\t\t#define FXAA_PC_CONSOLE 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_120\n\t\t\t\t#define FXAA_GLSL_120 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_130\n\t\t\t\t#define FXAA_GLSL_130 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_3\n\t\t\t\t#define FXAA_HLSL_3 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_4\n\t\t\t\t#define FXAA_HLSL_4 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_5\n\t\t\t\t#define FXAA_HLSL_5 0\n\t\t#endif\n\t\t/*==========================================================================*/\n\t\t#ifndef FXAA_GREEN_AS_LUMA\n\t\t\t\t//\n\t\t\t\t// For those using non-linear color,\n\t\t\t\t// and either not able to get luma in alpha, or not wanting to,\n\t\t\t\t// this enables FXAA to run using green as a proxy for luma.\n\t\t\t\t// So with this enabled, no need to pack luma in alpha.\n\t\t\t\t//\n\t\t\t\t// This will turn off AA on anything which lacks some amount of green.\n\t\t\t\t// Pure red and blue or combination of only R and B, will get no AA.\n\t\t\t\t//\n\t\t\t\t// Might want to lower the settings for both,\n\t\t\t\t//\t\tfxaaConsoleEdgeThresholdMin\n\t\t\t\t//\t\tfxaaQualityEdgeThresholdMin\n\t\t\t\t// In order to insure AA does not get turned off on colors\n\t\t\t\t// which contain a minor amount of green.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_GREEN_AS_LUMA 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_EARLY_EXIT\n\t\t\t\t//\n\t\t\t\t// Controls algorithm\\'s early exit path.\n\t\t\t\t// On PS3 turning this ON adds 2 cycles to the shader.\n\t\t\t\t// On 360 turning this OFF adds 10ths of a millisecond to the shader.\n\t\t\t\t// Turning this off on console will result in a more blurry image.\n\t\t\t\t// So this defaults to on.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_EARLY_EXIT 1\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_DISCARD\n\t\t\t\t//\n\t\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t\t//\n\t\t\t\t// 1 = Use discard on pixels which don\\'t need AA.\n\t\t\t\t//\t\t For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t\t// 0 = Return unchanged color on pixels which don\\'t need AA.\n\t\t\t\t//\n\t\t\t\t#define FXAA_DISCARD 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t//\n\t\t\t\t// Used for GLSL 120 only.\n\t\t\t\t//\n\t\t\t\t// 1 = GL API supports fast pixel offsets\n\t\t\t\t// 0 = do not use fast pixel offsets\n\t\t\t\t//\n\t\t\t\t#ifdef GL_EXT_gpu_shader4\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 0\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t//\n\t\t\t\t// 1 = API supports gather4 on alpha channel.\n\t\t\t\t// 0 = API does not support gather4 on alpha channel.\n\t\t\t\t//\n\t\t\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 0\n\t\t\t\t#endif\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tFXAA QUALITY - TUNING KNOBS\n\t\t------------------------------------------------------------------------------\n\t\tNOTE the other tuning knobs are now in the shader function inputs!\n\t\t============================================================================*/\n\t\t#ifndef FXAA_QUALITY_PRESET\n\t\t\t\t//\n\t\t\t\t// Choose the quality preset.\n\t\t\t\t// This needs to be compiled into the shader as it effects code.\n\t\t\t\t// Best option to include multiple presets is to\n\t\t\t\t// in each shader define the preset, then include this file.\n\t\t\t\t//\n\t\t\t\t// OPTIONS\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n\t\t\t\t// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n\t\t\t\t// 39\t\t\t - no dither, very expensive\n\t\t\t\t//\n\t\t\t\t// NOTES\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n\t\t\t\t// 13 = about same speed as FXAA 3.9 and better than 12\n\t\t\t\t// 23 = closest to FXAA 3.9 visually and performance wise\n\t\t\t\t//\t_ = the lowest digit is directly related to performance\n\t\t\t\t// _\t= the highest digit is directly related to style\n\t\t\t\t//\n\t\t\t\t#define FXAA_QUALITY_PRESET 12\n\t\t#endif\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - PRESETS\n\n\t\t============================================================================*/\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - MEDIUM DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 10)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 3.0\n\t\t\t\t#define FXAA_QUALITY_P2 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 11)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 3.0\n\t\t\t\t#define FXAA_QUALITY_P3 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 12)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 4.0\n\t\t\t\t#define FXAA_QUALITY_P4 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 13)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 4.0\n\t\t\t\t#define FXAA_QUALITY_P5 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 14)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 4.0\n\t\t\t\t#define FXAA_QUALITY_P6 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 15)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 12.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - LOW DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 20)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 2.0\n\t\t\t\t#define FXAA_QUALITY_P2 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 21)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 22)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 23)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 24)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 3.0\n\t\t\t\t#define FXAA_QUALITY_P6 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 25)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 26)\n\t\t\t\t#define FXAA_QUALITY_PS 9\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 4.0\n\t\t\t\t#define FXAA_QUALITY_P8 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 27)\n\t\t\t\t#define FXAA_QUALITY_PS 10\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 4.0\n\t\t\t\t#define FXAA_QUALITY_P9 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 28)\n\t\t\t\t#define FXAA_QUALITY_PS 11\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 4.0\n\t\t\t\t#define FXAA_QUALITY_P10 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 29)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - EXTREME QUALITY\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 39)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.0\n\t\t\t\t#define FXAA_QUALITY_P2 1.0\n\t\t\t\t#define FXAA_QUALITY_P3 1.0\n\t\t\t\t#define FXAA_QUALITY_P4 1.0\n\t\t\t\t#define FXAA_QUALITY_P5 1.5\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAPI PORTING\n\n\t\t============================================================================*/\n\t\t#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard discard\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 vec2\n\t\t\t\t#define FxaaFloat3 vec3\n\t\t\t\t#define FxaaFloat4 vec4\n\t\t\t\t#define FxaaHalf float\n\t\t\t\t#define FxaaHalf2 vec2\n\t\t\t\t#define FxaaHalf3 vec3\n\t\t\t\t#define FxaaHalf4 vec4\n\t\t\t\t#define FxaaInt2 ivec2\n\t\t\t\t#define FxaaSat(x) clamp(x, 0.0, 1.0)\n\t\t\t\t#define FxaaTex sampler2D\n\t\t#else\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard clip(-1)\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 float2\n\t\t\t\t#define FxaaFloat3 float3\n\t\t\t\t#define FxaaFloat4 float4\n\t\t\t\t#define FxaaHalf half\n\t\t\t\t#define FxaaHalf2 half2\n\t\t\t\t#define FxaaHalf3 half3\n\t\t\t\t#define FxaaHalf4 half4\n\t\t\t\t#define FxaaSat(x) saturate(x)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t#define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n\t\t\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_120 == 1)\n\t\t\t\t// Requires,\n\t\t\t\t//\t#version 120\n\t\t\t\t// And at least,\n\t\t\t\t//\t#extension GL_EXT_gpu_shader4 : enable\n\t\t\t\t//\t(or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n\t\t\t\t#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n\t\t\t\t#if (FXAA_FAST_PIXEL_OFFSET == 1)\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n\t\t\t\t#else\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n\t\t\t\t#endif\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_130 == 1)\n\t\t\t\t// Requires \"#version 130\" or better\n\t\t\t\t#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_3 == 1)\n\t\t\t\t#define FxaaInt2 float2\n\t\t\t\t#define FxaaTex sampler2D\n\t\t\t\t#define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n\t\t\t\t#define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_4 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t\t\t#define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n\t\t\t\t#define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n\t\t\t\t#define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t GREEN AS LUMA OPTION SUPPORT FUNCTION\n\t\t============================================================================*/\n\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n\t\t#else\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\t\t#endif\n\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA3 QUALITY - PC\n\n\t\t============================================================================*/\n\t\t#if (FXAA_PC == 1)\n\t\t/*--------------------------------------------------------------------------*/\n\t\tFxaaFloat4 FxaaPixelShader(\n\t\t\t\t//\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy} = center of pixel\n\t\t\t\tFxaaFloat2 pos,\n\t\t\t\t//\n\t\t\t\t// Used only for FXAA Console, and not used on the 360 version.\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy_} = upper left of pixel\n\t\t\t\t// {_zw} = lower right of pixel\n\t\t\t\tFxaaFloat4 fxaaConsolePosPos,\n\t\t\t\t//\n\t\t\t\t// Input color texture.\n\t\t\t\t// {rgb_} = color in linear or perceptual color space\n\t\t\t\t// if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t//\t\t {__a} = luma in perceptual color space (not linear)\n\t\t\t\tFxaaTex tex,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for \"tex\".\n\t\t\t\t// For 360, same texture, just alias with a 2nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -1.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegOne,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for \"tex\".\n\t\t\t\t// For 360, same texture, just alias with a 3nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -2.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegTwo,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x_} = 1.0/screenWidthInPixels\n\t\t\t\t// {_y} = 1.0/screenHeightInPixels\n\t\t\t\tFxaaFloat2 fxaaQualityRcpFrame,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// This effects sub-pixel AA quality and inversely sharpness.\n\t\t\t\t//\t Where N ranges between,\n\t\t\t\t//\t\t N = 0.50 (default)\n\t\t\t\t//\t\t N = 0.33 (sharper)\n\t\t\t\t// {x__} = -N/screenWidthInPixels\n\t\t\t\t// {_y_} = -N/screenHeightInPixels\n\t\t\t\t// {_z_} =\tN/screenWidthInPixels\n\t\t\t\t// {__w} =\tN/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Not used on 360, but used on PS3 and PC.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} = -2.0/screenWidthInPixels\n\t\t\t\t// {_y_} = -2.0/screenHeightInPixels\n\t\t\t\t// {_z_} =\t2.0/screenWidthInPixels\n\t\t\t\t// {__w} =\t2.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} =\t8.0/screenWidthInPixels\n\t\t\t\t// {_y_} =\t8.0/screenHeightInPixels\n\t\t\t\t// {_z_} = -4.0/screenWidthInPixels\n\t\t\t\t// {__w} = -4.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsole360RcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_SUBPIX define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Choose the amount of sub-pixel aliasing removal.\n\t\t\t\t// This can effect sharpness.\n\t\t\t\t//\t 1.00 - upper limit (softer)\n\t\t\t\t//\t 0.75 - default amount of filtering\n\t\t\t\t//\t 0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n\t\t\t\t//\t 0.25 - almost off\n\t\t\t\t//\t 0.00 - completely off\n\t\t\t\tFxaaFloat fxaaQualitySubpix,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// The minimum amount of local contrast required to apply algorithm.\n\t\t\t\t//\t 0.333 - too little (faster)\n\t\t\t\t//\t 0.250 - low quality\n\t\t\t\t//\t 0.166 - default\n\t\t\t\t//\t 0.125 - high quality\n\t\t\t\t//\t 0.063 - overkill (slower)\n\t\t\t\tFxaaFloat fxaaQualityEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t//\t 0.0833 - upper limit (default, the start of visible unfiltered edges)\n\t\t\t\t//\t 0.0625 - high quality (faster)\n\t\t\t\t//\t 0.0312 - visible limit (slower)\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaQualityEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only three safe values here: 2 and 4 and 8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// For all other platforms can be a non-power of two.\n\t\t\t\t//\t 8.0 is sharper (default!!!)\n\t\t\t\t//\t 4.0 is softer\n\t\t\t\t//\t 2.0 is really soft (good only for vector graphics inputs)\n\t\t\t\tFxaaFloat fxaaConsoleEdgeSharpness,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only two safe values here: 1/4 and 1/8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// Other platforms can use other values.\n\t\t\t\t//\t 0.125 leaves less aliasing, but is softer (default!!!)\n\t\t\t\t//\t 0.25 leaves more aliasing, and is sharper\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// This only applies when FXAA_EARLY_EXIT is 1.\n\t\t\t\t// This does not apply to PS3,\n\t\t\t\t// PS3 was simplified to avoid more shader instructions.\n\t\t\t\t//\t 0.06 - faster but more aliasing in darks\n\t\t\t\t//\t 0.05 - default\n\t\t\t\t//\t 0.04 - slower and less aliasing in darks\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Extra constants for 360 FXAA Console only.\n\t\t\t\t// Use zeros or anything else for other platforms.\n\t\t\t\t// These must be in physical constant registers and NOT immediates.\n\t\t\t\t// Immediates will result in compiler un-optimizing.\n\t\t\t\t// {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n\t\t\t\tFxaaFloat4 fxaaConsole360ConstDir\n\t\t) {\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posM;\n\t\t\t\tposM.x = pos.x;\n\t\t\t\tposM.y = pos.y;\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\t#define lumaM luma4A.w\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#define lumaE luma4A.z\n\t\t\t\t\t\t#define lumaS luma4A.x\n\t\t\t\t\t\t#define lumaSE luma4A.y\n\t\t\t\t\t\t#define lumaNW luma4B.w\n\t\t\t\t\t\t#define lumaN luma4B.z\n\t\t\t\t\t\t#define lumaW luma4B.x\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat maxSM = max(lumaS, lumaM);\n\t\t\t\tFxaaFloat minSM = min(lumaS, lumaM);\n\t\t\t\tFxaaFloat maxESM = max(lumaE, maxSM);\n\t\t\t\tFxaaFloat minESM = min(lumaE, minSM);\n\t\t\t\tFxaaFloat maxWN = max(lumaN, lumaW);\n\t\t\t\tFxaaFloat minWN = min(lumaN, lumaW);\n\t\t\t\tFxaaFloat rangeMax = max(maxWN, maxESM);\n\t\t\t\tFxaaFloat rangeMin = min(minWN, minESM);\n\t\t\t\tFxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n\t\t\t\tFxaaFloat range = rangeMax - rangeMin;\n\t\t\t\tFxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n\t\t\t\tFxaaBool earlyExit = range < rangeMaxClamped;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(earlyExit)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\tFxaaDiscard;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\treturn rgbyM;\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 0)\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNS = lumaN + lumaS;\n\t\t\t\tFxaaFloat lumaWE = lumaW + lumaE;\n\t\t\t\tFxaaFloat subpixRcpRange = 1.0/range;\n\t\t\t\tFxaaFloat subpixNSWE = lumaNS + lumaWE;\n\t\t\t\tFxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n\t\t\t\tFxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNESE = lumaNE + lumaSE;\n\t\t\t\tFxaaFloat lumaNWNE = lumaNW + lumaNE;\n\t\t\t\tFxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n\t\t\t\tFxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNWSW = lumaNW + lumaSW;\n\t\t\t\tFxaaFloat lumaSWSE = lumaSW + lumaSE;\n\t\t\t\tFxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n\t\t\t\tFxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n\t\t\t\tFxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n\t\t\t\tFxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n\t\t\t\tFxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n\t\t\t\tFxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n\t\t\t\tFxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n\t\t\t\tFxaaBool horzSpan = edgeHorz >= edgeVert;\n\t\t\t\tFxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!horzSpan) lumaN = lumaW;\n\t\t\t\tif(!horzSpan) lumaS = lumaE;\n\t\t\t\tif(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n\t\t\t\tFxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat gradientN = lumaN - lumaM;\n\t\t\t\tFxaaFloat gradientS = lumaS - lumaM;\n\t\t\t\tFxaaFloat lumaNN = lumaN + lumaM;\n\t\t\t\tFxaaFloat lumaSS = lumaS + lumaM;\n\t\t\t\tFxaaBool pairN = abs(gradientN) >= abs(gradientS);\n\t\t\t\tFxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n\t\t\t\tif(pairN) lengthSign = -lengthSign;\n\t\t\t\tFxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posB;\n\t\t\t\tposB.x = posM.x;\n\t\t\t\tposB.y = posM.y;\n\t\t\t\tFxaaFloat2 offNP;\n\t\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\t\t\t\tif(!horzSpan) posB.x += lengthSign * 0.5;\n\t\t\t\tif( horzSpan) posB.y += lengthSign * 0.5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posN;\n\t\t\t\tposN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat2 posP;\n\t\t\t\tposP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n\t\t\t\tFxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n\t\t\t\tFxaaFloat subpixE = subpixC * subpixC;\n\t\t\t\tFxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!pairN) lumaNN = lumaSS;\n\t\t\t\tFxaaFloat gradientScaled = gradient * 1.0/4.0;\n\t\t\t\tFxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n\t\t\t\tFxaaFloat subpixF = subpixD * subpixE;\n\t\t\t\tFxaaBool lumaMLTZero = lumaMM < 0.0;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tlumaEndN -= lumaNN * 0.5;\n\t\t\t\tlumaEndP -= lumaNN * 0.5;\n\t\t\t\tFxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\tFxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n\t\t\t\tFxaaBool doneNP = (!doneN) || (!doneP);\n\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 3)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 4)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 5)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 6)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 7)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_QUALITY_PS > 8)\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 9)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 10)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 11)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 12)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat dstN = posM.x - posN.x;\n\t\t\t\tFxaaFloat dstP = posP.x - posM.x;\n\t\t\t\tif(!horzSpan) dstN = posM.y - posN.y;\n\t\t\t\tif(!horzSpan) dstP = posP.y - posM.y;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLength = (dstP + dstN);\n\t\t\t\tFxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLengthRcp = 1.0/spanLength;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool directionN = dstN < dstP;\n\t\t\t\tFxaaFloat dst = min(dstN, dstP);\n\t\t\t\tFxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n\t\t\t\tFxaaFloat subpixG = subpixF * subpixF;\n\t\t\t\tFxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n\t\t\t\tFxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n\t\t\t\tFxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n\t\t\t\tif(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n\t\t\t\tif( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\treturn FxaaTexTop(tex, posM);\n\t\t\t\t#else\n\t\t\t\t\t\treturn FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t\t\t\t#endif\n\t\t}\n\t\t/*==========================================================================*/\n\t\t#endif\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\tvUv,\n\t\t\t\tvec4(0.0),\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\tresolution,\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\t0.75,\n\t\t\t\t0.166,\n\t\t\t\t0.0833,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\tvec4(0.0)\n\t\t\t);\n\n\t\t\t// TODO avoid querying texture twice for same texel\n\t\t\tgl_FragColor.a = texture2D(tDiffuse, vUv).a;\n\t\t}`\n\n};\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/shaders/FXAAShader.js?");

/***/ }),

/***/ "./src/scripts/jsm/utils/SkeletonUtils.js":
/*!************************************************!*\
  !*** ./src/scripts/jsm/utils/SkeletonUtils.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"clone\": () => (/* binding */ clone),\n/* harmony export */   \"findBoneTrackData\": () => (/* binding */ findBoneTrackData),\n/* harmony export */   \"getBoneByName\": () => (/* binding */ getBoneByName),\n/* harmony export */   \"getBones\": () => (/* binding */ getBones),\n/* harmony export */   \"getEqualsBonesNames\": () => (/* binding */ getEqualsBonesNames),\n/* harmony export */   \"getHelperFromSkeleton\": () => (/* binding */ getHelperFromSkeleton),\n/* harmony export */   \"getNearestBone\": () => (/* binding */ getNearestBone),\n/* harmony export */   \"getSkeletonOffsets\": () => (/* binding */ getSkeletonOffsets),\n/* harmony export */   \"renameBones\": () => (/* binding */ renameBones),\n/* harmony export */   \"retarget\": () => (/* binding */ retarget),\n/* harmony export */   \"retargetClip\": () => (/* binding */ retargetClip)\n/* harmony export */ });\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\nfunction retarget( target, source, options = {} ) {\n\n\tconst pos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tquat = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tscale = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tbindBoneMatrix = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\trelativeMatrix = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tglobalMatrix = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\toptions.preserveMatrix = options.preserveMatrix !== undefined ? options.preserveMatrix : true;\n\toptions.preservePosition = options.preservePosition !== undefined ? options.preservePosition : true;\n\toptions.preserveHipPosition = options.preserveHipPosition !== undefined ? options.preserveHipPosition : false;\n\toptions.useTargetMatrix = options.useTargetMatrix !== undefined ? options.useTargetMatrix : false;\n\toptions.hip = options.hip !== undefined ? options.hip : 'hip';\n\toptions.names = options.names || {};\n\n\tconst sourceBones = source.isObject3D ? source.skeleton.bones : getBones( source ),\n\t\tbones = target.isObject3D ? target.skeleton.bones : getBones( target );\n\n\tlet bindBones,\n\t\tbone, name, boneTo,\n\t\tbonesPosition;\n\n\t// reset bones\n\n\tif ( target.isObject3D ) {\n\n\t\ttarget.skeleton.pose();\n\n\t} else {\n\n\t\toptions.useTargetMatrix = true;\n\t\toptions.preserveMatrix = false;\n\n\t}\n\n\tif ( options.preservePosition ) {\n\n\t\tbonesPosition = [];\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tbonesPosition.push( bones[ i ].position.clone() );\n\n\t\t}\n\n\t}\n\n\tif ( options.preserveMatrix ) {\n\n\t\t// reset matrix\n\n\t\ttarget.updateMatrixWorld();\n\n\t\ttarget.matrixWorld.identity();\n\n\t\t// reset children matrix\n\n\t\tfor ( let i = 0; i < target.children.length; ++ i ) {\n\n\t\t\ttarget.children[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t}\n\n\tif ( options.offsets ) {\n\n\t\tbindBones = [];\n\n\t\tfor ( let i = 0; i < bones.length; ++ i ) {\n\n\t\t\tbone = bones[ i ];\n\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\tif ( options.offsets && options.offsets[ name ] ) {\n\n\t\t\t\tbone.matrix.multiply( options.offsets[ name ] );\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tbindBones.push( bone.matrixWorld.clone() );\n\n\t\t}\n\n\t}\n\n\tfor ( let i = 0; i < bones.length; ++ i ) {\n\n\t\tbone = bones[ i ];\n\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\tboneTo = getBoneByName( name, sourceBones );\n\n\t\tglobalMatrix.copy( bone.matrixWorld );\n\n\t\tif ( boneTo ) {\n\n\t\t\tboneTo.updateMatrixWorld();\n\n\t\t\tif ( options.useTargetMatrix ) {\n\n\t\t\t\trelativeMatrix.copy( boneTo.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\trelativeMatrix.copy( target.matrixWorld ).invert();\n\t\t\t\trelativeMatrix.multiply( boneTo.matrixWorld );\n\n\t\t\t}\n\n\t\t\t// ignore scale to extract rotation\n\n\t\t\tscale.setFromMatrixScale( relativeMatrix );\n\t\t\trelativeMatrix.scale( scale.set( 1 / scale.x, 1 / scale.y, 1 / scale.z ) );\n\n\t\t\t// apply to global matrix\n\n\t\t\tglobalMatrix.makeRotationFromQuaternion( quat.setFromRotationMatrix( relativeMatrix ) );\n\n\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\tconst boneIndex = bones.indexOf( bone ),\n\t\t\t\t\twBindMatrix = bindBones ? bindBones[ boneIndex ] : bindBoneMatrix.copy( target.skeleton.boneInverses[ boneIndex ] ).invert();\n\n\t\t\t\tglobalMatrix.multiply( wBindMatrix );\n\n\t\t\t}\n\n\t\t\tglobalMatrix.copyPosition( relativeMatrix );\n\n\t\t}\n\n\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\tbone.matrix.multiply( globalMatrix );\n\n\t\t} else {\n\n\t\t\tbone.matrix.copy( globalMatrix );\n\n\t\t}\n\n\t\tif ( options.preserveHipPosition && name === options.hip ) {\n\n\t\t\tbone.matrix.setPosition( pos.set( 0, bone.position.y, 0 ) );\n\n\t\t}\n\n\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\tbone.updateMatrixWorld();\n\n\t}\n\n\tif ( options.preservePosition ) {\n\n\t\tfor ( let i = 0; i < bones.length; ++ i ) {\n\n\t\t\tbone = bones[ i ];\n\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\tif ( name !== options.hip ) {\n\n\t\t\t\tbone.position.copy( bonesPosition[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( options.preserveMatrix ) {\n\n\t\t// restore matrix\n\n\t\ttarget.updateMatrixWorld( true );\n\n\t}\n\n}\n\nfunction retargetClip( target, source, clip, options = {} ) {\n\n\toptions.useFirstFramePosition = options.useFirstFramePosition !== undefined ? options.useFirstFramePosition : false;\n\toptions.fps = options.fps !== undefined ? options.fps : 30;\n\toptions.names = options.names || [];\n\n\tif ( ! source.isObject3D ) {\n\n\t\tsource = getHelperFromSkeleton( source );\n\n\t}\n\n\tconst numFrames = Math.round( clip.duration * ( options.fps / 1000 ) * 1000 ),\n\t\tdelta = 1 / options.fps,\n\t\tconvertedTracks = [],\n\t\tmixer = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( source ),\n\t\tbones = getBones( target.skeleton ),\n\t\tboneDatas = [];\n\tlet positionOffset,\n\t\tbone, boneTo, boneData,\n\t\tname;\n\n\tmixer.clipAction( clip ).play();\n\tmixer.update( 0 );\n\n\tsource.updateMatrixWorld();\n\n\tfor ( let i = 0; i < numFrames; ++ i ) {\n\n\t\tconst time = i * delta;\n\n\t\tretarget( target, source, options );\n\n\t\tfor ( let j = 0; j < bones.length; ++ j ) {\n\n\t\t\tname = options.names[ bones[ j ].name ] || bones[ j ].name;\n\n\t\t\tboneTo = getBoneByName( name, source.skeleton );\n\n\t\t\tif ( boneTo ) {\n\n\t\t\t\tbone = bones[ j ];\n\t\t\t\tboneData = boneDatas[ j ] = boneDatas[ j ] || { bone: bone };\n\n\t\t\t\tif ( options.hip === name ) {\n\n\t\t\t\t\tif ( ! boneData.pos ) {\n\n\t\t\t\t\t\tboneData.pos = {\n\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 3 )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( options.useFirstFramePosition ) {\n\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\tpositionOffset = bone.position.clone();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbone.position.sub( positionOffset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneData.pos.times[ i ] = time;\n\n\t\t\t\t\tbone.position.toArray( boneData.pos.values, i * 3 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! boneData.quat ) {\n\n\t\t\t\t\tboneData.quat = {\n\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\tvalues: new Float32Array( numFrames * 4 )\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tboneData.quat.times[ i ] = time;\n\n\t\t\t\tbone.quaternion.toArray( boneData.quat.values, i * 4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tmixer.update( delta );\n\n\t\tsource.updateMatrixWorld();\n\n\t}\n\n\tfor ( let i = 0; i < boneDatas.length; ++ i ) {\n\n\t\tboneData = boneDatas[ i ];\n\n\t\tif ( boneData ) {\n\n\t\t\tif ( boneData.pos ) {\n\n\t\t\t\tconvertedTracks.push( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\n\t\t\t\t\t'.bones[' + boneData.bone.name + '].position',\n\t\t\t\t\tboneData.pos.times,\n\t\t\t\t\tboneData.pos.values\n\t\t\t\t) );\n\n\t\t\t}\n\n\t\t\tconvertedTracks.push( new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\n\t\t\t\t'.bones[' + boneData.bone.name + '].quaternion',\n\t\t\t\tboneData.quat.times,\n\t\t\t\tboneData.quat.values\n\t\t\t) );\n\n\t\t}\n\n\t}\n\n\tmixer.uncacheAction( clip );\n\n\treturn new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( clip.name, - 1, convertedTracks );\n\n}\n\nfunction getHelperFromSkeleton( skeleton ) {\n\n\tconst source = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( skeleton.bones[ 0 ] );\n\tsource.skeleton = skeleton;\n\n\treturn source;\n\n}\n\nfunction getSkeletonOffsets( target, source, options = {} ) {\n\n\tconst targetParentPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\ttargetPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tsourceParentPos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tsourcePos = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\ttargetDir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(),\n\t\tsourceDir = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())();\n\n\toptions.hip = options.hip !== undefined ? options.hip : 'hip';\n\toptions.names = options.names || {};\n\n\tif ( ! source.isObject3D ) {\n\n\t\tsource = getHelperFromSkeleton( source );\n\n\t}\n\n\tconst nameKeys = Object.keys( options.names ),\n\t\tnameValues = Object.values( options.names ),\n\t\tsourceBones = source.isObject3D ? source.skeleton.bones : getBones( source ),\n\t\tbones = target.isObject3D ? target.skeleton.bones : getBones( target ),\n\t\toffsets = [];\n\n\tlet bone, boneTo,\n\t\tname, i;\n\n\ttarget.skeleton.pose();\n\n\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\tbone = bones[ i ];\n\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\tboneTo = getBoneByName( name, sourceBones );\n\n\t\tif ( boneTo && name !== options.hip ) {\n\n\t\t\tconst boneParent = getNearestBone( bone.parent, nameKeys ),\n\t\t\t\tboneToParent = getNearestBone( boneTo.parent, nameValues );\n\n\t\t\tboneParent.updateMatrixWorld();\n\t\t\tboneToParent.updateMatrixWorld();\n\n\t\t\ttargetParentPos.setFromMatrixPosition( boneParent.matrixWorld );\n\t\t\ttargetPos.setFromMatrixPosition( bone.matrixWorld );\n\n\t\t\tsourceParentPos.setFromMatrixPosition( boneToParent.matrixWorld );\n\t\t\tsourcePos.setFromMatrixPosition( boneTo.matrixWorld );\n\n\t\t\ttargetDir.subVectors(\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( targetPos.x, targetPos.y ),\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( targetParentPos.x, targetParentPos.y )\n\t\t\t).normalize();\n\n\t\t\tsourceDir.subVectors(\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sourcePos.x, sourcePos.y ),\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())( sourceParentPos.x, sourceParentPos.y )\n\t\t\t).normalize();\n\n\t\t\tconst laterialAngle = targetDir.angle() - sourceDir.angle();\n\n\t\t\tconst offset = new Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())().makeRotationFromEuler(\n\t\t\t\tnew Object(function webpackMissingModule() { var e = new Error(\"Cannot find module 'three'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\tlaterialAngle\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tbone.matrix.multiply( offset );\n\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\tbone.updateMatrixWorld();\n\n\t\t\toffsets[ name ] = offset;\n\n\t\t}\n\n\t}\n\n\treturn offsets;\n\n}\n\nfunction renameBones( skeleton, names ) {\n\n\tconst bones = getBones( skeleton );\n\n\tfor ( let i = 0; i < bones.length; ++ i ) {\n\n\t\tconst bone = bones[ i ];\n\n\t\tif ( names[ bone.name ] ) {\n\n\t\t\tbone.name = names[ bone.name ];\n\n\t\t}\n\n\t}\n\n\treturn this;\n\n}\n\nfunction getBones( skeleton ) {\n\n\treturn Array.isArray( skeleton ) ? skeleton : skeleton.bones;\n\n}\n\nfunction getBoneByName( name, skeleton ) {\n\n\tfor ( let i = 0, bones = getBones( skeleton ); i < bones.length; i ++ ) {\n\n\t\tif ( name === bones[ i ].name )\n\n\t\t\treturn bones[ i ];\n\n\t}\n\n}\n\nfunction getNearestBone( bone, names ) {\n\n\twhile ( bone.isBone ) {\n\n\t\tif ( names.indexOf( bone.name ) !== - 1 ) {\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t\tbone = bone.parent;\n\n\t}\n\n}\n\nfunction findBoneTrackData( name, tracks ) {\n\n\tconst regexp = /\\[(.*)\\]\\.(.*)/,\n\t\tresult = { name: name };\n\n\tfor ( let i = 0; i < tracks.length; ++ i ) {\n\n\t\t// 1 is track name\n\t\t// 2 is track type\n\t\tconst trackData = regexp.exec( tracks[ i ].name );\n\n\t\tif ( trackData && name === trackData[ 1 ] ) {\n\n\t\t\tresult[ trackData[ 2 ] ] = i;\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\nfunction getEqualsBonesNames( skeleton, targetSkeleton ) {\n\n\tconst sourceBones = getBones( skeleton ),\n\t\ttargetBones = getBones( targetSkeleton ),\n\t\tbones = [];\n\n\tsearch : for ( let i = 0; i < sourceBones.length; i ++ ) {\n\n\t\tconst boneName = sourceBones[ i ].name;\n\n\t\tfor ( let j = 0; j < targetBones.length; j ++ ) {\n\n\t\t\tif ( boneName === targetBones[ j ].name ) {\n\n\t\t\t\tbones.push( boneName );\n\n\t\t\t\tcontinue search;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn bones;\n\n}\n\nfunction clone( source ) {\n\n\tconst sourceLookup = new Map();\n\tconst cloneLookup = new Map();\n\n\tconst clone = source.clone();\n\n\tparallelTraverse( source, clone, function ( sourceNode, clonedNode ) {\n\n\t\tsourceLookup.set( clonedNode, sourceNode );\n\t\tcloneLookup.set( sourceNode, clonedNode );\n\n\t} );\n\n\tclone.traverse( function ( node ) {\n\n\t\tif ( ! node.isSkinnedMesh ) return;\n\n\t\tconst clonedMesh = node;\n\t\tconst sourceMesh = sourceLookup.get( node );\n\t\tconst sourceBones = sourceMesh.skeleton.bones;\n\n\t\tclonedMesh.skeleton = sourceMesh.skeleton.clone();\n\t\tclonedMesh.bindMatrix.copy( sourceMesh.bindMatrix );\n\n\t\tclonedMesh.skeleton.bones = sourceBones.map( function ( bone ) {\n\n\t\t\treturn cloneLookup.get( bone );\n\n\t\t} );\n\n\t\tclonedMesh.bind( clonedMesh.skeleton, clonedMesh.bindMatrix );\n\n\t} );\n\n\treturn clone;\n\n}\n\n\n\n\nfunction parallelTraverse( a, b, callback ) {\n\n\tcallback( a, b );\n\n\tfor ( let i = 0; i < a.children.length; i ++ ) {\n\n\t\tparallelTraverse( a.children[ i ], b.children[ i ], callback );\n\n\t}\n\n}\n\n\n\n\n//# sourceURL=webpack://zerochill/./src/scripts/jsm/utils/SkeletonUtils.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/async module */
/******/ 	(() => {
/******/ 		var webpackThen = typeof Symbol === "function" ? Symbol("webpack then") : "__webpack_then__";
/******/ 		var webpackExports = typeof Symbol === "function" ? Symbol("webpack exports") : "__webpack_exports__";
/******/ 		var webpackError = typeof Symbol === "function" ? Symbol("webpack error") : "__webpack_error__";
/******/ 		var completeQueue = (queue) => {
/******/ 			if(queue) {
/******/ 				queue.forEach((fn) => (fn.r--));
/******/ 				queue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));
/******/ 			}
/******/ 		}
/******/ 		var completeFunction = (fn) => (!--fn.r && fn());
/******/ 		var queueFunction = (queue, fn) => (queue ? queue.push(fn) : completeFunction(fn));
/******/ 		var wrapDeps = (deps) => (deps.map((dep) => {
/******/ 			if(dep !== null && typeof dep === "object") {
/******/ 				if(dep[webpackThen]) return dep;
/******/ 				if(dep.then) {
/******/ 					var queue = [];
/******/ 					dep.then((r) => {
/******/ 						obj[webpackExports] = r;
/******/ 						completeQueue(queue);
/******/ 						queue = 0;
/******/ 					}, (e) => {
/******/ 						obj[webpackError] = e;
/******/ 						completeQueue(queue);
/******/ 						queue = 0;
/******/ 					});
/******/ 					var obj = {};
/******/ 					obj[webpackThen] = (fn, reject) => (queueFunction(queue, fn), dep['catch'](reject));
/******/ 					return obj;
/******/ 				}
/******/ 			}
/******/ 			var ret = {};
/******/ 			ret[webpackThen] = (fn) => (completeFunction(fn));
/******/ 			ret[webpackExports] = dep;
/******/ 			return ret;
/******/ 		}));
/******/ 		__webpack_require__.a = (module, body, hasAwait) => {
/******/ 			var queue = hasAwait && [];
/******/ 			var exports = module.exports;
/******/ 			var currentDeps;
/******/ 			var outerResolve;
/******/ 			var reject;
/******/ 			var isEvaluating = true;
/******/ 			var nested = false;
/******/ 			var whenAll = (deps, onResolve, onReject) => {
/******/ 				if (nested) return;
/******/ 				nested = true;
/******/ 				onResolve.r += deps.length;
/******/ 				deps.map((dep, i) => (dep[webpackThen](onResolve, onReject)));
/******/ 				nested = false;
/******/ 			};
/******/ 			var promise = new Promise((resolve, rej) => {
/******/ 				reject = rej;
/******/ 				outerResolve = () => (resolve(exports), completeQueue(queue), queue = 0);
/******/ 			});
/******/ 			promise[webpackExports] = exports;
/******/ 			promise[webpackThen] = (fn, rejectFn) => {
/******/ 				if (isEvaluating) { return completeFunction(fn); }
/******/ 				if (currentDeps) whenAll(currentDeps, fn, rejectFn);
/******/ 				queueFunction(queue, fn);
/******/ 				promise['catch'](rejectFn);
/******/ 			};
/******/ 			module.exports = promise;
/******/ 			body((deps) => {
/******/ 				currentDeps = wrapDeps(deps);
/******/ 				var fn;
/******/ 				var getResult = () => (currentDeps.map((d) => {
/******/ 					if(d[webpackError]) throw d[webpackError];
/******/ 					return d[webpackExports];
/******/ 				}))
/******/ 				var promise = new Promise((resolve, reject) => {
/******/ 					fn = () => (resolve(getResult));
/******/ 					fn.r = 0;
/******/ 					whenAll(currentDeps, fn, reject);
/******/ 				});
/******/ 				return fn.r ? promise : getResult();
/******/ 			}, (err) => (err && reject(promise[webpackError] = err), outerResolve()));
/******/ 			isEvaluating = false;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.js");
/******/ 	
/******/ })()
;